var Ax=Object.defineProperty;var qw=d=>{throw TypeError(d)};var _x=(d,e,t)=>e in d?Ax(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t;var xe=(d,e,t)=>_x(d,typeof e!="symbol"?e+"":e,t),rm=(d,e,t)=>e.has(d)||qw("Cannot "+t);var l=(d,e,t)=>(rm(d,e,"read from private field"),t?t.call(d):e.get(d)),x=(d,e,t)=>e.has(d)?qw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(d):e.set(d,t),_=(d,e,t,i)=>(rm(d,e,"write to private field"),i?i.call(d,t):e.set(d,t),t),E=(d,e,t)=>(rm(d,e,"access private method"),t);var un=(d,e,t,i)=>({set _(r){_(d,e,r,t)},get _(){return l(d,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function np(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var om={exports:{}},qc={},am={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw;function Sx(){if(Yw)return Fe;Yw=1;var d=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function R(M,$,le){this.props=M,this.context=$,this.refs=C,this.updater=le||A}R.prototype.isReactComponent={},R.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},R.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function k(){}k.prototype=R.prototype;function F(M,$,le){this.props=M,this.context=$,this.refs=C,this.updater=le||A}var D=F.prototype=new k;D.constructor=F,b(D,R.prototype),D.isPureReactComponent=!0;var I=Array.isArray,H=Object.prototype.hasOwnProperty,j={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function V(M,$,le){var Ae,ke={},ve=null,me=null;if($!=null)for(Ae in $.ref!==void 0&&(me=$.ref),$.key!==void 0&&(ve=""+$.key),$)H.call($,Ae)&&!B.hasOwnProperty(Ae)&&(ke[Ae]=$[Ae]);var Le=arguments.length-2;if(Le===1)ke.children=le;else if(1<Le){for(var Oe=Array(Le),De=0;De<Le;De++)Oe[De]=arguments[De+2];ke.children=Oe}if(M&&M.defaultProps)for(Ae in Le=M.defaultProps,Le)ke[Ae]===void 0&&(ke[Ae]=Le[Ae]);return{$$typeof:d,type:M,key:ve,ref:me,props:ke,_owner:j.current}}function Q(M,$){return{$$typeof:d,type:M.type,key:$,ref:M.ref,props:M.props,_owner:M._owner}}function ne(M){return typeof M=="object"&&M!==null&&M.$$typeof===d}function te(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(le){return $[le]})}var Ee=/\/+/g;function fe(M,$){return typeof M=="object"&&M!==null&&M.key!=null?te(""+M.key):$.toString(36)}function he(M,$,le,Ae,ke){var ve=typeof M;(ve==="undefined"||ve==="boolean")&&(M=null);var me=!1;if(M===null)me=!0;else switch(ve){case"string":case"number":me=!0;break;case"object":switch(M.$$typeof){case d:case e:me=!0}}if(me)return me=M,ke=ke(me),M=Ae===""?"."+fe(me,0):Ae,I(ke)?(le="",M!=null&&(le=M.replace(Ee,"$&/")+"/"),he(ke,$,le,"",function(De){return De})):ke!=null&&(ne(ke)&&(ke=Q(ke,le+(!ke.key||me&&me.key===ke.key?"":(""+ke.key).replace(Ee,"$&/")+"/")+M)),$.push(ke)),1;if(me=0,Ae=Ae===""?".":Ae+":",I(M))for(var Le=0;Le<M.length;Le++){ve=M[Le];var Oe=Ae+fe(ve,Le);me+=he(ve,$,le,Oe,ke)}else if(Oe=w(M),typeof Oe=="function")for(M=Oe.call(M),Le=0;!(ve=M.next()).done;)ve=ve.value,Oe=Ae+fe(ve,Le++),me+=he(ve,$,le,Oe,ke);else if(ve==="object")throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return me}function we(M,$,le){if(M==null)return M;var Ae=[],ke=0;return he(M,Ae,"","",function(ve){return $.call(le,ve,ke++)}),Ae}function ge(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(le){(M._status===0||M._status===-1)&&(M._status=1,M._result=le)},function(le){(M._status===0||M._status===-1)&&(M._status=2,M._result=le)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var K={current:null},U={transition:null},oe={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:U,ReactCurrentOwner:j};function J(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:we,forEach:function(M,$,le){we(M,function(){$.apply(this,arguments)},le)},count:function(M){var $=0;return we(M,function(){$++}),$},toArray:function(M){return we(M,function($){return $})||[]},only:function(M){if(!ne(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Fe.Component=R,Fe.Fragment=t,Fe.Profiler=r,Fe.PureComponent=F,Fe.StrictMode=i,Fe.Suspense=f,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Fe.act=J,Fe.cloneElement=function(M,$,le){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Ae=b({},M.props),ke=M.key,ve=M.ref,me=M._owner;if($!=null){if($.ref!==void 0&&(ve=$.ref,me=j.current),$.key!==void 0&&(ke=""+$.key),M.type&&M.type.defaultProps)var Le=M.type.defaultProps;for(Oe in $)H.call($,Oe)&&!B.hasOwnProperty(Oe)&&(Ae[Oe]=$[Oe]===void 0&&Le!==void 0?Le[Oe]:$[Oe])}var Oe=arguments.length-2;if(Oe===1)Ae.children=le;else if(1<Oe){Le=Array(Oe);for(var De=0;De<Oe;De++)Le[De]=arguments[De+2];Ae.children=Le}return{$$typeof:d,type:M.type,key:ke,ref:ve,props:Ae,_owner:me}},Fe.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:o,_context:M},M.Consumer=M},Fe.createElement=V,Fe.createFactory=function(M){var $=V.bind(null,M);return $.type=M,$},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(M){return{$$typeof:u,render:M}},Fe.isValidElement=ne,Fe.lazy=function(M){return{$$typeof:g,_payload:{_status:-1,_result:M},_init:ge}},Fe.memo=function(M,$){return{$$typeof:p,type:M,compare:$===void 0?null:$}},Fe.startTransition=function(M){var $=U.transition;U.transition={};try{M()}finally{U.transition=$}},Fe.unstable_act=J,Fe.useCallback=function(M,$){return K.current.useCallback(M,$)},Fe.useContext=function(M){return K.current.useContext(M)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(M){return K.current.useDeferredValue(M)},Fe.useEffect=function(M,$){return K.current.useEffect(M,$)},Fe.useId=function(){return K.current.useId()},Fe.useImperativeHandle=function(M,$,le){return K.current.useImperativeHandle(M,$,le)},Fe.useInsertionEffect=function(M,$){return K.current.useInsertionEffect(M,$)},Fe.useLayoutEffect=function(M,$){return K.current.useLayoutEffect(M,$)},Fe.useMemo=function(M,$){return K.current.useMemo(M,$)},Fe.useReducer=function(M,$,le){return K.current.useReducer(M,$,le)},Fe.useRef=function(M){return K.current.useRef(M)},Fe.useState=function(M){return K.current.useState(M)},Fe.useSyncExternalStore=function(M,$,le){return K.current.useSyncExternalStore(M,$,le)},Fe.useTransition=function(){return K.current.useTransition()},Fe.version="18.3.1",Fe}var Kw;function $v(){return Kw||(Kw=1,am.exports=Sx()),am.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function Ex(){if(Qw)return qc;Qw=1;var d=$v(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(u,f,p){var g,y={},w=null,A=null;p!==void 0&&(w=""+p),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(A=f.ref);for(g in f)i.call(f,g)&&!o.hasOwnProperty(g)&&(y[g]=f[g]);if(u&&u.defaultProps)for(g in f=u.defaultProps,f)y[g]===void 0&&(y[g]=f[g]);return{$$typeof:e,type:u,key:w,ref:A,props:y,_owner:r.current}}return qc.Fragment=t,qc.jsx=c,qc.jsxs=c,qc}var Jw;function bx(){return Jw||(Jw=1,om.exports=Ex()),om.exports}var re=bx(),X=$v();const xx=np(X);var Yd={},lm={exports:{}},Sn={},cm={exports:{}},um={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function Cx(){return Zw||(Zw=1,function(d){function e(U,oe){var J=U.length;U.push(oe);e:for(;0<J;){var M=J-1>>>1,$=U[M];if(0<r($,oe))U[M]=oe,U[J]=$,J=M;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var oe=U[0],J=U.pop();if(J!==oe){U[0]=J;e:for(var M=0,$=U.length,le=$>>>1;M<le;){var Ae=2*(M+1)-1,ke=U[Ae],ve=Ae+1,me=U[ve];if(0>r(ke,J))ve<$&&0>r(me,ke)?(U[M]=me,U[ve]=J,M=ve):(U[M]=ke,U[Ae]=J,M=Ae);else if(ve<$&&0>r(me,J))U[M]=me,U[ve]=J,M=ve;else break e}}return oe}function r(U,oe){var J=U.sortIndex-oe.sortIndex;return J!==0?J:U.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();d.unstable_now=function(){return c.now()-u}}var f=[],p=[],g=1,y=null,w=3,A=!1,b=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(U){for(var oe=t(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=U)i(p),oe.sortIndex=oe.expirationTime,e(f,oe);else break;oe=t(p)}}function I(U){if(C=!1,D(U),!b)if(t(f)!==null)b=!0,ge(H);else{var oe=t(p);oe!==null&&K(I,oe.startTime-U)}}function H(U,oe){b=!1,C&&(C=!1,k(V),V=-1),A=!0;var J=w;try{for(D(oe),y=t(f);y!==null&&(!(y.expirationTime>oe)||U&&!te());){var M=y.callback;if(typeof M=="function"){y.callback=null,w=y.priorityLevel;var $=M(y.expirationTime<=oe);oe=d.unstable_now(),typeof $=="function"?y.callback=$:y===t(f)&&i(f),D(oe)}else i(f);y=t(f)}if(y!==null)var le=!0;else{var Ae=t(p);Ae!==null&&K(I,Ae.startTime-oe),le=!1}return le}finally{y=null,w=J,A=!1}}var j=!1,B=null,V=-1,Q=5,ne=-1;function te(){return!(d.unstable_now()-ne<Q)}function Ee(){if(B!==null){var U=d.unstable_now();ne=U;var oe=!0;try{oe=B(!0,U)}finally{oe?fe():(j=!1,B=null)}}else j=!1}var fe;if(typeof F=="function")fe=function(){F(Ee)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,we=he.port2;he.port1.onmessage=Ee,fe=function(){we.postMessage(null)}}else fe=function(){R(Ee,0)};function ge(U){B=U,j||(j=!0,fe())}function K(U,oe){V=R(function(){U(d.unstable_now())},oe)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(U){U.callback=null},d.unstable_continueExecution=function(){b||A||(b=!0,ge(H))},d.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<U?Math.floor(1e3/U):5},d.unstable_getCurrentPriorityLevel=function(){return w},d.unstable_getFirstCallbackNode=function(){return t(f)},d.unstable_next=function(U){switch(w){case 1:case 2:case 3:var oe=3;break;default:oe=w}var J=w;w=oe;try{return U()}finally{w=J}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(U,oe){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=w;w=U;try{return oe()}finally{w=J}},d.unstable_scheduleCallback=function(U,oe,J){var M=d.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?M+J:M):J=M,U){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=J+$,U={id:g++,callback:oe,priorityLevel:U,startTime:J,expirationTime:$,sortIndex:-1},J>M?(U.sortIndex=J,e(p,U),t(f)===null&&U===t(p)&&(C?(k(V),V=-1):C=!0,K(I,J-M))):(U.sortIndex=$,e(f,U),b||A||(b=!0,ge(H))),U},d.unstable_shouldYield=te,d.unstable_wrapCallback=function(U){var oe=w;return function(){var J=w;w=oe;try{return U.apply(this,arguments)}finally{w=J}}}}(um)),um}var eA;function kx(){return eA||(eA=1,cm.exports=Cx()),cm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tA;function Tx(){if(tA)return Sn;tA=1;var d=$v(),e=kx();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function o(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(r[n]=s,n=0;n<s.length;n++)i.add(s[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function w(n){return f.call(y,n)?!0:f.call(g,n)?!1:p.test(n)?y[n]=!0:(g[n]=!0,!1)}function A(n,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function b(n,s,a,h){if(s===null||typeof s>"u"||A(n,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(n,s,a,h,m,v,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=v,this.removeEmptyString=S}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){R[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];R[s]=new C(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){R[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){R[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){R[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){R[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){R[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){R[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){R[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function F(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(k,F);R[s]=new C(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(k,F);R[s]=new C(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(k,F);R[s]=new C(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){R[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),R.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){R[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function D(n,s,a,h){var m=R.hasOwnProperty(s)?R[s]:null;(m!==null?m.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(b(s,a,m,h)&&(a=null),h||m===null?w(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):m.mustUseProperty?n[m.propertyName]=a===null?m.type===3?!1:"":a:(s=m.attributeName,h=m.attributeNamespace,a===null?n.removeAttribute(s):(m=m.type,a=m===3||m===4&&a===!0?"":""+a,h?n.setAttributeNS(h,s,a):n.setAttribute(s,a))))}var I=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),j=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),te=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),we=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),K=Symbol.for("react.offscreen"),U=Symbol.iterator;function oe(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var J=Object.assign,M;function $(n){if(M===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);M=s&&s[1]||""}return`
`+M+n}var le=!1;function Ae(n,s){if(!n||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var h=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){h=z}n.call(s.prototype)}else{try{throw Error()}catch(z){h=z}n()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var m=z.stack.split(`
`),v=h.stack.split(`
`),S=m.length-1,T=v.length-1;1<=S&&0<=T&&m[S]!==v[T];)T--;for(;1<=S&&0<=T;S--,T--)if(m[S]!==v[T]){if(S!==1||T!==1)do if(S--,T--,0>T||m[S]!==v[T]){var P=`
`+m[S].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=S&&0<=T);break}}}finally{le=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?$(n):""}function ke(n){switch(n.tag){case 5:return $(n.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case j:return"Portal";case Q:return"Profiler";case V:return"StrictMode";case fe:return"Suspense";case he:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case te:return(n.displayName||"Context")+".Consumer";case ne:return(n._context.displayName||"Context")+".Provider";case Ee:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case we:return s=n.displayName||null,s!==null?s:ve(n.type)||"Memo";case ge:s=n._payload,n=n._init;try{return ve(n(s))}catch{}}return null}function me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(s);case 8:return s===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Le(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Oe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function De(n){var s=Oe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var m=a.get,v=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Mi(n){n._valueTracker||(n._valueTracker=De(n))}function Ks(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return n&&(h=Oe(n)?n.checked?"true":"false":n.value),n=h,n!==a?(s.setValue(n),!0):!1}function Ue(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function it(n,s){var a=s.checked;return J({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function bt(n,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=Le(s.value!=null?s.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function gt(n,s){s=s.checked,s!=null&&D(n,"checked",s,!1)}function Ii(n,s){gt(n,s);var a=Le(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?cc(n,s.type,a):s.hasOwnProperty("defaultValue")&&cc(n,s.type,Le(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Qs(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function cc(n,s,a){(s!=="number"||Ue(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Jr=Array.isArray;function li(n,s,a,h){if(n=n.options,s){s={};for(var m=0;m<a.length;m++)s["$"+a[m]]=!0;for(a=0;a<n.length;a++)m=s.hasOwnProperty("$"+n[a].value),n[a].selected!==m&&(n[a].selected=m),m&&h&&(n[a].defaultSelected=!0)}else{for(a=""+Le(a),s=null,m=0;m<n.length;m++){if(n[m].value===a){n[m].selected=!0,h&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function uc(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function zh(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Jr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Le(a)}}function jh(n,s){var a=Le(s.value),h=Le(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function Hh(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Bh(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Di(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Bh(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var rs,Zr=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,m){MSApp.execUnsafeLocalFunction(function(){return n(s,a,h,m)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(rs=rs||document.createElement("div"),rs.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=rs.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function os(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var hc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bE=["Webkit","ms","Moz","O"];Object.keys(hc).forEach(function(n){bE.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),hc[s]=hc[n]})});function cy(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||hc.hasOwnProperty(n)&&hc[n]?(""+s).trim():s+"px"}function uy(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,m=cy(a,s[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,m):n[a]=m}}var xE=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vp(n,s){if(s){if(xE[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function yp(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wp=null;function Ap(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _p=null,Ca=null,ka=null;function hy(n){if(n=Ic(n)){if(typeof _p!="function")throw Error(t(280));var s=n.stateNode;s&&(s=ud(s),_p(n.stateNode,n.type,s))}}function dy(n){Ca?ka?ka.push(n):ka=[n]:Ca=n}function fy(){if(Ca){var n=Ca,s=ka;if(ka=Ca=null,hy(n),s)for(n=0;n<s.length;n++)hy(s[n])}}function py(n,s){return n(s)}function gy(){}var Sp=!1;function my(n,s,a){if(Sp)return n(s,a);Sp=!0;try{return py(n,s,a)}finally{Sp=!1,(Ca!==null||ka!==null)&&(gy(),fy())}}function dc(n,s){var a=n.stateNode;if(a===null)return null;var h=ud(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ep=!1;if(u)try{var fc={};Object.defineProperty(fc,"passive",{get:function(){Ep=!0}}),window.addEventListener("test",fc,fc),window.removeEventListener("test",fc,fc)}catch{Ep=!1}function CE(n,s,a,h,m,v,S,T,P){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(G){this.onError(G)}}var pc=!1,Uh=null,$h=!1,bp=null,kE={onError:function(n){pc=!0,Uh=n}};function TE(n,s,a,h,m,v,S,T,P){pc=!1,Uh=null,CE.apply(kE,arguments)}function RE(n,s,a,h,m,v,S,T,P){if(TE.apply(this,arguments),pc){if(pc){var z=Uh;pc=!1,Uh=null}else throw Error(t(198));$h||($h=!0,bp=z)}}function eo(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function vy(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function yy(n){if(eo(n)!==n)throw Error(t(188))}function PE(n){var s=n.alternate;if(!s){if(s=eo(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,h=s;;){var m=a.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){a=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===a)return yy(m),n;if(v===h)return yy(m),s;v=v.sibling}throw Error(t(188))}if(a.return!==h.return)a=m,h=v;else{for(var S=!1,T=m.child;T;){if(T===a){S=!0,a=m,h=v;break}if(T===h){S=!0,h=m,a=v;break}T=T.sibling}if(!S){for(T=v.child;T;){if(T===a){S=!0,a=v,h=m;break}if(T===h){S=!0,h=v,a=m;break}T=T.sibling}if(!S)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function wy(n){return n=PE(n),n!==null?Ay(n):null}function Ay(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ay(n);if(s!==null)return s;n=n.sibling}return null}var _y=e.unstable_scheduleCallback,Sy=e.unstable_cancelCallback,LE=e.unstable_shouldYield,ME=e.unstable_requestPaint,mt=e.unstable_now,IE=e.unstable_getCurrentPriorityLevel,xp=e.unstable_ImmediatePriority,Ey=e.unstable_UserBlockingPriority,Vh=e.unstable_NormalPriority,DE=e.unstable_LowPriority,by=e.unstable_IdlePriority,Wh=null,Fi=null;function FE(n){if(Fi&&typeof Fi.onCommitFiberRoot=="function")try{Fi.onCommitFiberRoot(Wh,n,void 0,(n.current.flags&128)===128)}catch{}}var ci=Math.clz32?Math.clz32:zE,NE=Math.log,OE=Math.LN2;function zE(n){return n>>>=0,n===0?32:31-(NE(n)/OE|0)|0}var Gh=64,Xh=4194304;function gc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function qh(n,s){var a=n.pendingLanes;if(a===0)return 0;var h=0,m=n.suspendedLanes,v=n.pingedLanes,S=a&268435455;if(S!==0){var T=S&~m;T!==0?h=gc(T):(v&=S,v!==0&&(h=gc(v)))}else S=a&~m,S!==0?h=gc(S):v!==0&&(h=gc(v));if(h===0)return 0;if(s!==0&&s!==h&&(s&m)===0&&(m=h&-h,v=s&-s,m>=v||m===16&&(v&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)a=31-ci(s),m=1<<a,h|=n[a],s&=~m;return h}function jE(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HE(n,s){for(var a=n.suspendedLanes,h=n.pingedLanes,m=n.expirationTimes,v=n.pendingLanes;0<v;){var S=31-ci(v),T=1<<S,P=m[S];P===-1?((T&a)===0||(T&h)!==0)&&(m[S]=jE(T,s)):P<=s&&(n.expiredLanes|=T),v&=~T}}function Cp(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function xy(){var n=Gh;return Gh<<=1,(Gh&4194240)===0&&(Gh=64),n}function kp(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function mc(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-ci(s),n[s]=a}function BE(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var m=31-ci(a),v=1<<m;s[m]=0,h[m]=-1,n[m]=-1,a&=~v}}function Tp(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var h=31-ci(a),m=1<<h;m&s|n[h]&s&&(n[h]|=s),a&=~m}}var We=0;function Cy(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ky,Rp,Ty,Ry,Py,Pp=!1,Yh=[],Js=null,Zs=null,er=null,vc=new Map,yc=new Map,tr=[],UE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ly(n,s){switch(n){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":vc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yc.delete(s.pointerId)}}function wc(n,s,a,h,m,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},s!==null&&(s=Ic(s),s!==null&&Rp(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function $E(n,s,a,h,m){switch(s){case"focusin":return Js=wc(Js,n,s,a,h,m),!0;case"dragenter":return Zs=wc(Zs,n,s,a,h,m),!0;case"mouseover":return er=wc(er,n,s,a,h,m),!0;case"pointerover":var v=m.pointerId;return vc.set(v,wc(vc.get(v)||null,n,s,a,h,m)),!0;case"gotpointercapture":return v=m.pointerId,yc.set(v,wc(yc.get(v)||null,n,s,a,h,m)),!0}return!1}function My(n){var s=to(n.target);if(s!==null){var a=eo(s);if(a!==null){if(s=a.tag,s===13){if(s=vy(a),s!==null){n.blockedOn=s,Py(n.priority,function(){Ty(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Kh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Mp(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);wp=h,a.target.dispatchEvent(h),wp=null}else return s=Ic(a),s!==null&&Rp(s),n.blockedOn=a,!1;s.shift()}return!0}function Iy(n,s,a){Kh(n)&&a.delete(s)}function VE(){Pp=!1,Js!==null&&Kh(Js)&&(Js=null),Zs!==null&&Kh(Zs)&&(Zs=null),er!==null&&Kh(er)&&(er=null),vc.forEach(Iy),yc.forEach(Iy)}function Ac(n,s){n.blockedOn===s&&(n.blockedOn=null,Pp||(Pp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,VE)))}function _c(n){function s(m){return Ac(m,n)}if(0<Yh.length){Ac(Yh[0],n);for(var a=1;a<Yh.length;a++){var h=Yh[a];h.blockedOn===n&&(h.blockedOn=null)}}for(Js!==null&&Ac(Js,n),Zs!==null&&Ac(Zs,n),er!==null&&Ac(er,n),vc.forEach(s),yc.forEach(s),a=0;a<tr.length;a++)h=tr[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<tr.length&&(a=tr[0],a.blockedOn===null);)My(a),a.blockedOn===null&&tr.shift()}var Ta=I.ReactCurrentBatchConfig,Qh=!0;function WE(n,s,a,h){var m=We,v=Ta.transition;Ta.transition=null;try{We=1,Lp(n,s,a,h)}finally{We=m,Ta.transition=v}}function GE(n,s,a,h){var m=We,v=Ta.transition;Ta.transition=null;try{We=4,Lp(n,s,a,h)}finally{We=m,Ta.transition=v}}function Lp(n,s,a,h){if(Qh){var m=Mp(n,s,a,h);if(m===null)Yp(n,s,h,Jh,a),Ly(n,h);else if($E(m,n,s,a,h))h.stopPropagation();else if(Ly(n,h),s&4&&-1<UE.indexOf(n)){for(;m!==null;){var v=Ic(m);if(v!==null&&ky(v),v=Mp(n,s,a,h),v===null&&Yp(n,s,h,Jh,a),v===m)break;m=v}m!==null&&h.stopPropagation()}else Yp(n,s,h,null,a)}}var Jh=null;function Mp(n,s,a,h){if(Jh=null,n=Ap(h),n=to(n),n!==null)if(s=eo(n),s===null)n=null;else if(a=s.tag,a===13){if(n=vy(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Jh=n,null}function Dy(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IE()){case xp:return 1;case Ey:return 4;case Vh:case DE:return 16;case by:return 536870912;default:return 16}default:return 16}}var nr=null,Ip=null,Zh=null;function Fy(){if(Zh)return Zh;var n,s=Ip,a=s.length,h,m="value"in nr?nr.value:nr.textContent,v=m.length;for(n=0;n<a&&s[n]===m[n];n++);var S=a-n;for(h=1;h<=S&&s[a-h]===m[v-h];h++);return Zh=m.slice(n,1<h?1-h:void 0)}function ed(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function td(){return!0}function Ny(){return!1}function Pn(n){function s(a,h,m,v,S){this._reactName=a,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(v):v[T]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?td:Ny,this.isPropagationStopped=Ny,this}return J(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=td)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=td)},persist:function(){},isPersistent:td}),s}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dp=Pn(Ra),Sc=J({},Ra,{view:0,detail:0}),XE=Pn(Sc),Fp,Np,Ec,nd=J({},Sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zp,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ec&&(Ec&&n.type==="mousemove"?(Fp=n.screenX-Ec.screenX,Np=n.screenY-Ec.screenY):Np=Fp=0,Ec=n),Fp)},movementY:function(n){return"movementY"in n?n.movementY:Np}}),Oy=Pn(nd),qE=J({},nd,{dataTransfer:0}),YE=Pn(qE),KE=J({},Sc,{relatedTarget:0}),Op=Pn(KE),QE=J({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),JE=Pn(QE),ZE=J({},Ra,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),eb=Pn(ZE),tb=J({},Ra,{data:0}),zy=Pn(tb),nb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ib={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rb(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=sb[n])?!!s[n]:!1}function zp(){return rb}var ob=J({},Sc,{key:function(n){if(n.key){var s=nb[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ed(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ib[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zp,charCode:function(n){return n.type==="keypress"?ed(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ed(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ab=Pn(ob),lb=J({},nd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jy=Pn(lb),cb=J({},Sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zp}),ub=Pn(cb),hb=J({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),db=Pn(hb),fb=J({},nd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),pb=Pn(fb),gb=[9,13,27,32],jp=u&&"CompositionEvent"in window,bc=null;u&&"documentMode"in document&&(bc=document.documentMode);var mb=u&&"TextEvent"in window&&!bc,Hy=u&&(!jp||bc&&8<bc&&11>=bc),By=" ",Uy=!1;function $y(n,s){switch(n){case"keyup":return gb.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vy(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pa=!1;function vb(n,s){switch(n){case"compositionend":return Vy(s);case"keypress":return s.which!==32?null:(Uy=!0,By);case"textInput":return n=s.data,n===By&&Uy?null:n;default:return null}}function yb(n,s){if(Pa)return n==="compositionend"||!jp&&$y(n,s)?(n=Fy(),Zh=Ip=nr=null,Pa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Hy&&s.locale!=="ko"?null:s.data;default:return null}}var wb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wy(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!wb[n.type]:s==="textarea"}function Gy(n,s,a,h){dy(h),s=ad(s,"onChange"),0<s.length&&(a=new Dp("onChange","change",null,a,h),n.push({event:a,listeners:s}))}var xc=null,Cc=null;function Ab(n){u0(n,0)}function id(n){var s=Fa(n);if(Ks(s))return n}function _b(n,s){if(n==="change")return s}var Xy=!1;if(u){var Hp;if(u){var Bp="oninput"in document;if(!Bp){var qy=document.createElement("div");qy.setAttribute("oninput","return;"),Bp=typeof qy.oninput=="function"}Hp=Bp}else Hp=!1;Xy=Hp&&(!document.documentMode||9<document.documentMode)}function Yy(){xc&&(xc.detachEvent("onpropertychange",Ky),Cc=xc=null)}function Ky(n){if(n.propertyName==="value"&&id(Cc)){var s=[];Gy(s,Cc,n,Ap(n)),my(Ab,s)}}function Sb(n,s,a){n==="focusin"?(Yy(),xc=s,Cc=a,xc.attachEvent("onpropertychange",Ky)):n==="focusout"&&Yy()}function Eb(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return id(Cc)}function bb(n,s){if(n==="click")return id(s)}function xb(n,s){if(n==="input"||n==="change")return id(s)}function Cb(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var ui=typeof Object.is=="function"?Object.is:Cb;function kc(n,s){if(ui(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var m=a[h];if(!f.call(s,m)||!ui(n[m],s[m]))return!1}return!0}function Qy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Jy(n,s){var a=Qy(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=s&&h>=s)return{node:a,offset:s-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Qy(a)}}function Zy(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Zy(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function e0(){for(var n=window,s=Ue();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Ue(n.document)}return s}function Up(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function kb(n){var s=e0(),a=n.focusedElem,h=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Zy(a.ownerDocument.documentElement,a)){if(h!==null&&Up(a)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var m=a.textContent.length,v=Math.min(h.start,m);h=h.end===void 0?v:Math.min(h.end,m),!n.extend&&v>h&&(m=h,h=v,v=m),m=Jy(a,v);var S=Jy(a,h);m&&S&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),n.removeAllRanges(),v>h?(n.addRange(s),n.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Tb=u&&"documentMode"in document&&11>=document.documentMode,La=null,$p=null,Tc=null,Vp=!1;function t0(n,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vp||La==null||La!==Ue(h)||(h=La,"selectionStart"in h&&Up(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Tc&&kc(Tc,h)||(Tc=h,h=ad($p,"onSelect"),0<h.length&&(s=new Dp("onSelect","select",null,s,a),n.push({event:s,listeners:h}),s.target=La)))}function sd(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ma={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},Wp={},n0={};u&&(n0=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function rd(n){if(Wp[n])return Wp[n];if(!Ma[n])return n;var s=Ma[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in n0)return Wp[n]=s[a];return n}var i0=rd("animationend"),s0=rd("animationiteration"),r0=rd("animationstart"),o0=rd("transitionend"),a0=new Map,l0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(n,s){a0.set(n,s),o(s,[n])}for(var Gp=0;Gp<l0.length;Gp++){var Xp=l0[Gp],Rb=Xp.toLowerCase(),Pb=Xp[0].toUpperCase()+Xp.slice(1);ir(Rb,"on"+Pb)}ir(i0,"onAnimationEnd"),ir(s0,"onAnimationIteration"),ir(r0,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(o0,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rc));function c0(n,s,a){var h=n.type||"unknown-event";n.currentTarget=a,RE(h,s,void 0,n),n.currentTarget=null}function u0(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],m=h.event;h=h.listeners;e:{var v=void 0;if(s)for(var S=h.length-1;0<=S;S--){var T=h[S],P=T.instance,z=T.currentTarget;if(T=T.listener,P!==v&&m.isPropagationStopped())break e;c0(m,T,z),v=P}else for(S=0;S<h.length;S++){if(T=h[S],P=T.instance,z=T.currentTarget,T=T.listener,P!==v&&m.isPropagationStopped())break e;c0(m,T,z),v=P}}}if($h)throw n=bp,$h=!1,bp=null,n}function et(n,s){var a=s[tg];a===void 0&&(a=s[tg]=new Set);var h=n+"__bubble";a.has(h)||(h0(s,n,2,!1),a.add(h))}function qp(n,s,a){var h=0;s&&(h|=4),h0(a,n,h,s)}var od="_reactListening"+Math.random().toString(36).slice(2);function Pc(n){if(!n[od]){n[od]=!0,i.forEach(function(a){a!=="selectionchange"&&(Lb.has(a)||qp(a,!1,n),qp(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[od]||(s[od]=!0,qp("selectionchange",!1,s))}}function h0(n,s,a,h){switch(Dy(s)){case 1:var m=WE;break;case 4:m=GE;break;default:m=Lp}a=m.bind(null,s,a,n),m=void 0,!Ep||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),h?m!==void 0?n.addEventListener(s,a,{capture:!0,passive:m}):n.addEventListener(s,a,!0):m!==void 0?n.addEventListener(s,a,{passive:m}):n.addEventListener(s,a,!1)}function Yp(n,s,a,h,m){var v=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var T=h.stateNode.containerInfo;if(T===m||T.nodeType===8&&T.parentNode===m)break;if(S===4)for(S=h.return;S!==null;){var P=S.tag;if((P===3||P===4)&&(P=S.stateNode.containerInfo,P===m||P.nodeType===8&&P.parentNode===m))return;S=S.return}for(;T!==null;){if(S=to(T),S===null)return;if(P=S.tag,P===5||P===6){h=v=S;continue e}T=T.parentNode}}h=h.return}my(function(){var z=v,G=Ap(a),q=[];e:{var W=a0.get(n);if(W!==void 0){var ie=Dp,ce=n;switch(n){case"keypress":if(ed(a)===0)break e;case"keydown":case"keyup":ie=ab;break;case"focusin":ce="focus",ie=Op;break;case"focusout":ce="blur",ie=Op;break;case"beforeblur":case"afterblur":ie=Op;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=YE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=ub;break;case i0:case s0:case r0:ie=JE;break;case o0:ie=db;break;case"scroll":ie=XE;break;case"wheel":ie=pb;break;case"copy":case"cut":case"paste":ie=eb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=jy}var ue=(s&4)!==0,vt=!ue&&n==="scroll",N=ue?W!==null?W+"Capture":null:W;ue=[];for(var L=z,O;L!==null;){O=L;var Y=O.stateNode;if(O.tag===5&&Y!==null&&(O=Y,N!==null&&(Y=dc(L,N),Y!=null&&ue.push(Lc(L,Y,O)))),vt)break;L=L.return}0<ue.length&&(W=new ie(W,ce,null,a,G),q.push({event:W,listeners:ue}))}}if((s&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",W&&a!==wp&&(ce=a.relatedTarget||a.fromElement)&&(to(ce)||ce[as]))break e;if((ie||W)&&(W=G.window===G?G:(W=G.ownerDocument)?W.defaultView||W.parentWindow:window,ie?(ce=a.relatedTarget||a.toElement,ie=z,ce=ce?to(ce):null,ce!==null&&(vt=eo(ce),ce!==vt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(ie=null,ce=z),ie!==ce)){if(ue=Oy,Y="onMouseLeave",N="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(ue=jy,Y="onPointerLeave",N="onPointerEnter",L="pointer"),vt=ie==null?W:Fa(ie),O=ce==null?W:Fa(ce),W=new ue(Y,L+"leave",ie,a,G),W.target=vt,W.relatedTarget=O,Y=null,to(G)===z&&(ue=new ue(N,L+"enter",ce,a,G),ue.target=O,ue.relatedTarget=vt,Y=ue),vt=Y,ie&&ce)t:{for(ue=ie,N=ce,L=0,O=ue;O;O=Ia(O))L++;for(O=0,Y=N;Y;Y=Ia(Y))O++;for(;0<L-O;)ue=Ia(ue),L--;for(;0<O-L;)N=Ia(N),O--;for(;L--;){if(ue===N||N!==null&&ue===N.alternate)break t;ue=Ia(ue),N=Ia(N)}ue=null}else ue=null;ie!==null&&d0(q,W,ie,ue,!1),ce!==null&&vt!==null&&d0(q,vt,ce,ue,!0)}}e:{if(W=z?Fa(z):window,ie=W.nodeName&&W.nodeName.toLowerCase(),ie==="select"||ie==="input"&&W.type==="file")var de=_b;else if(Wy(W))if(Xy)de=xb;else{de=Eb;var _e=Sb}else(ie=W.nodeName)&&ie.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(de=bb);if(de&&(de=de(n,z))){Gy(q,de,a,G);break e}_e&&_e(n,W,z),n==="focusout"&&(_e=W._wrapperState)&&_e.controlled&&W.type==="number"&&cc(W,"number",W.value)}switch(_e=z?Fa(z):window,n){case"focusin":(Wy(_e)||_e.contentEditable==="true")&&(La=_e,$p=z,Tc=null);break;case"focusout":Tc=$p=La=null;break;case"mousedown":Vp=!0;break;case"contextmenu":case"mouseup":case"dragend":Vp=!1,t0(q,a,G);break;case"selectionchange":if(Tb)break;case"keydown":case"keyup":t0(q,a,G)}var Se;if(jp)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Pa?$y(n,a)&&(be="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(Hy&&a.locale!=="ko"&&(Pa||be!=="onCompositionStart"?be==="onCompositionEnd"&&Pa&&(Se=Fy()):(nr=G,Ip="value"in nr?nr.value:nr.textContent,Pa=!0)),_e=ad(z,be),0<_e.length&&(be=new zy(be,n,null,a,G),q.push({event:be,listeners:_e}),Se?be.data=Se:(Se=Vy(a),Se!==null&&(be.data=Se)))),(Se=mb?vb(n,a):yb(n,a))&&(z=ad(z,"onBeforeInput"),0<z.length&&(G=new zy("onBeforeInput","beforeinput",null,a,G),q.push({event:G,listeners:z}),G.data=Se))}u0(q,s)})}function Lc(n,s,a){return{instance:n,listener:s,currentTarget:a}}function ad(n,s){for(var a=s+"Capture",h=[];n!==null;){var m=n,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=dc(n,a),v!=null&&h.unshift(Lc(n,v,m)),v=dc(n,s),v!=null&&h.push(Lc(n,v,m))),n=n.return}return h}function Ia(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function d0(n,s,a,h,m){for(var v=s._reactName,S=[];a!==null&&a!==h;){var T=a,P=T.alternate,z=T.stateNode;if(P!==null&&P===h)break;T.tag===5&&z!==null&&(T=z,m?(P=dc(a,v),P!=null&&S.unshift(Lc(a,P,T))):m||(P=dc(a,v),P!=null&&S.push(Lc(a,P,T)))),a=a.return}S.length!==0&&n.push({event:s,listeners:S})}var Mb=/\r\n?/g,Ib=/\u0000|\uFFFD/g;function f0(n){return(typeof n=="string"?n:""+n).replace(Mb,`
`).replace(Ib,"")}function ld(n,s,a){if(s=f0(s),f0(n)!==s&&a)throw Error(t(425))}function cd(){}var Kp=null,Qp=null;function Jp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Zp=typeof setTimeout=="function"?setTimeout:void 0,Db=typeof clearTimeout=="function"?clearTimeout:void 0,p0=typeof Promise=="function"?Promise:void 0,Fb=typeof queueMicrotask=="function"?queueMicrotask:typeof p0<"u"?function(n){return p0.resolve(null).then(n).catch(Nb)}:Zp;function Nb(n){setTimeout(function(){throw n})}function eg(n,s){var a=s,h=0;do{var m=a.nextSibling;if(n.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(h===0){n.removeChild(m),_c(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=m}while(a);_c(s)}function sr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function g0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Da=Math.random().toString(36).slice(2),Ni="__reactFiber$"+Da,Mc="__reactProps$"+Da,as="__reactContainer$"+Da,tg="__reactEvents$"+Da,Ob="__reactListeners$"+Da,zb="__reactHandles$"+Da;function to(n){var s=n[Ni];if(s)return s;for(var a=n.parentNode;a;){if(s=a[as]||a[Ni]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=g0(n);n!==null;){if(a=n[Ni])return a;n=g0(n)}return s}n=a,a=n.parentNode}return null}function Ic(n){return n=n[Ni]||n[as],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Fa(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ud(n){return n[Mc]||null}var ng=[],Na=-1;function rr(n){return{current:n}}function tt(n){0>Na||(n.current=ng[Na],ng[Na]=null,Na--)}function Je(n,s){Na++,ng[Na]=n.current,n.current=s}var or={},Yt=rr(or),vn=rr(!1),no=or;function Oa(n,s){var a=n.type.contextTypes;if(!a)return or;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in a)m[v]=s[v];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=m),m}function yn(n){return n=n.childContextTypes,n!=null}function hd(){tt(vn),tt(Yt)}function m0(n,s,a){if(Yt.current!==or)throw Error(t(168));Je(Yt,s),Je(vn,a)}function v0(n,s,a){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var m in h)if(!(m in s))throw Error(t(108,me(n)||"Unknown",m));return J({},a,h)}function dd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||or,no=Yt.current,Je(Yt,n),Je(vn,vn.current),!0}function y0(n,s,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=v0(n,s,no),h.__reactInternalMemoizedMergedChildContext=n,tt(vn),tt(Yt),Je(Yt,n)):tt(vn),Je(vn,a)}var ls=null,fd=!1,ig=!1;function w0(n){ls===null?ls=[n]:ls.push(n)}function jb(n){fd=!0,w0(n)}function ar(){if(!ig&&ls!==null){ig=!0;var n=0,s=We;try{var a=ls;for(We=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}ls=null,fd=!1}catch(m){throw ls!==null&&(ls=ls.slice(n+1)),_y(xp,ar),m}finally{We=s,ig=!1}}return null}var za=[],ja=0,pd=null,gd=0,Gn=[],Xn=0,io=null,cs=1,us="";function so(n,s){za[ja++]=gd,za[ja++]=pd,pd=n,gd=s}function A0(n,s,a){Gn[Xn++]=cs,Gn[Xn++]=us,Gn[Xn++]=io,io=n;var h=cs;n=us;var m=32-ci(h)-1;h&=~(1<<m),a+=1;var v=32-ci(s)+m;if(30<v){var S=m-m%5;v=(h&(1<<S)-1).toString(32),h>>=S,m-=S,cs=1<<32-ci(s)+m|a<<m|h,us=v+n}else cs=1<<v|a<<m|h,us=n}function sg(n){n.return!==null&&(so(n,1),A0(n,1,0))}function rg(n){for(;n===pd;)pd=za[--ja],za[ja]=null,gd=za[--ja],za[ja]=null;for(;n===io;)io=Gn[--Xn],Gn[Xn]=null,us=Gn[--Xn],Gn[Xn]=null,cs=Gn[--Xn],Gn[Xn]=null}var Ln=null,Mn=null,st=!1,hi=null;function _0(n,s){var a=Qn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function S0(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Ln=n,Mn=sr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Ln=n,Mn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=io!==null?{id:cs,overflow:us}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Qn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Ln=n,Mn=null,!0):!1;default:return!1}}function og(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ag(n){if(st){var s=Mn;if(s){var a=s;if(!S0(n,s)){if(og(n))throw Error(t(418));s=sr(a.nextSibling);var h=Ln;s&&S0(n,s)?_0(h,a):(n.flags=n.flags&-4097|2,st=!1,Ln=n)}}else{if(og(n))throw Error(t(418));n.flags=n.flags&-4097|2,st=!1,Ln=n}}}function E0(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ln=n}function md(n){if(n!==Ln)return!1;if(!st)return E0(n),st=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Jp(n.type,n.memoizedProps)),s&&(s=Mn)){if(og(n))throw b0(),Error(t(418));for(;s;)_0(n,s),s=sr(s.nextSibling)}if(E0(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){Mn=sr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}Mn=null}}else Mn=Ln?sr(n.stateNode.nextSibling):null;return!0}function b0(){for(var n=Mn;n;)n=sr(n.nextSibling)}function Ha(){Mn=Ln=null,st=!1}function lg(n){hi===null?hi=[n]:hi.push(n)}var Hb=I.ReactCurrentBatchConfig;function Dc(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var m=h,v=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(S){var T=m.refs;S===null?delete T[v]:T[v]=S},s._stringRef=v,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function vd(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function x0(n){var s=n._init;return s(n._payload)}function C0(n){function s(N,L){if(n){var O=N.deletions;O===null?(N.deletions=[L],N.flags|=16):O.push(L)}}function a(N,L){if(!n)return null;for(;L!==null;)s(N,L),L=L.sibling;return null}function h(N,L){for(N=new Map;L!==null;)L.key!==null?N.set(L.key,L):N.set(L.index,L),L=L.sibling;return N}function m(N,L){return N=gr(N,L),N.index=0,N.sibling=null,N}function v(N,L,O){return N.index=O,n?(O=N.alternate,O!==null?(O=O.index,O<L?(N.flags|=2,L):O):(N.flags|=2,L)):(N.flags|=1048576,L)}function S(N){return n&&N.alternate===null&&(N.flags|=2),N}function T(N,L,O,Y){return L===null||L.tag!==6?(L=Zg(O,N.mode,Y),L.return=N,L):(L=m(L,O),L.return=N,L)}function P(N,L,O,Y){var de=O.type;return de===B?G(N,L,O.props.children,Y,O.key):L!==null&&(L.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ge&&x0(de)===L.type)?(Y=m(L,O.props),Y.ref=Dc(N,L,O),Y.return=N,Y):(Y=Bd(O.type,O.key,O.props,null,N.mode,Y),Y.ref=Dc(N,L,O),Y.return=N,Y)}function z(N,L,O,Y){return L===null||L.tag!==4||L.stateNode.containerInfo!==O.containerInfo||L.stateNode.implementation!==O.implementation?(L=em(O,N.mode,Y),L.return=N,L):(L=m(L,O.children||[]),L.return=N,L)}function G(N,L,O,Y,de){return L===null||L.tag!==7?(L=fo(O,N.mode,Y,de),L.return=N,L):(L=m(L,O),L.return=N,L)}function q(N,L,O){if(typeof L=="string"&&L!==""||typeof L=="number")return L=Zg(""+L,N.mode,O),L.return=N,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case H:return O=Bd(L.type,L.key,L.props,null,N.mode,O),O.ref=Dc(N,null,L),O.return=N,O;case j:return L=em(L,N.mode,O),L.return=N,L;case ge:var Y=L._init;return q(N,Y(L._payload),O)}if(Jr(L)||oe(L))return L=fo(L,N.mode,O,null),L.return=N,L;vd(N,L)}return null}function W(N,L,O,Y){var de=L!==null?L.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return de!==null?null:T(N,L,""+O,Y);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case H:return O.key===de?P(N,L,O,Y):null;case j:return O.key===de?z(N,L,O,Y):null;case ge:return de=O._init,W(N,L,de(O._payload),Y)}if(Jr(O)||oe(O))return de!==null?null:G(N,L,O,Y,null);vd(N,O)}return null}function ie(N,L,O,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return N=N.get(O)||null,T(L,N,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:return N=N.get(Y.key===null?O:Y.key)||null,P(L,N,Y,de);case j:return N=N.get(Y.key===null?O:Y.key)||null,z(L,N,Y,de);case ge:var _e=Y._init;return ie(N,L,O,_e(Y._payload),de)}if(Jr(Y)||oe(Y))return N=N.get(O)||null,G(L,N,Y,de,null);vd(L,Y)}return null}function ce(N,L,O,Y){for(var de=null,_e=null,Se=L,be=L=0,Ft=null;Se!==null&&be<O.length;be++){Se.index>be?(Ft=Se,Se=null):Ft=Se.sibling;var Be=W(N,Se,O[be],Y);if(Be===null){Se===null&&(Se=Ft);break}n&&Se&&Be.alternate===null&&s(N,Se),L=v(Be,L,be),_e===null?de=Be:_e.sibling=Be,_e=Be,Se=Ft}if(be===O.length)return a(N,Se),st&&so(N,be),de;if(Se===null){for(;be<O.length;be++)Se=q(N,O[be],Y),Se!==null&&(L=v(Se,L,be),_e===null?de=Se:_e.sibling=Se,_e=Se);return st&&so(N,be),de}for(Se=h(N,Se);be<O.length;be++)Ft=ie(Se,N,be,O[be],Y),Ft!==null&&(n&&Ft.alternate!==null&&Se.delete(Ft.key===null?be:Ft.key),L=v(Ft,L,be),_e===null?de=Ft:_e.sibling=Ft,_e=Ft);return n&&Se.forEach(function(mr){return s(N,mr)}),st&&so(N,be),de}function ue(N,L,O,Y){var de=oe(O);if(typeof de!="function")throw Error(t(150));if(O=de.call(O),O==null)throw Error(t(151));for(var _e=de=null,Se=L,be=L=0,Ft=null,Be=O.next();Se!==null&&!Be.done;be++,Be=O.next()){Se.index>be?(Ft=Se,Se=null):Ft=Se.sibling;var mr=W(N,Se,Be.value,Y);if(mr===null){Se===null&&(Se=Ft);break}n&&Se&&mr.alternate===null&&s(N,Se),L=v(mr,L,be),_e===null?de=mr:_e.sibling=mr,_e=mr,Se=Ft}if(Be.done)return a(N,Se),st&&so(N,be),de;if(Se===null){for(;!Be.done;be++,Be=O.next())Be=q(N,Be.value,Y),Be!==null&&(L=v(Be,L,be),_e===null?de=Be:_e.sibling=Be,_e=Be);return st&&so(N,be),de}for(Se=h(N,Se);!Be.done;be++,Be=O.next())Be=ie(Se,N,be,Be.value,Y),Be!==null&&(n&&Be.alternate!==null&&Se.delete(Be.key===null?be:Be.key),L=v(Be,L,be),_e===null?de=Be:_e.sibling=Be,_e=Be);return n&&Se.forEach(function(wx){return s(N,wx)}),st&&so(N,be),de}function vt(N,L,O,Y){if(typeof O=="object"&&O!==null&&O.type===B&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case H:e:{for(var de=O.key,_e=L;_e!==null;){if(_e.key===de){if(de=O.type,de===B){if(_e.tag===7){a(N,_e.sibling),L=m(_e,O.props.children),L.return=N,N=L;break e}}else if(_e.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ge&&x0(de)===_e.type){a(N,_e.sibling),L=m(_e,O.props),L.ref=Dc(N,_e,O),L.return=N,N=L;break e}a(N,_e);break}else s(N,_e);_e=_e.sibling}O.type===B?(L=fo(O.props.children,N.mode,Y,O.key),L.return=N,N=L):(Y=Bd(O.type,O.key,O.props,null,N.mode,Y),Y.ref=Dc(N,L,O),Y.return=N,N=Y)}return S(N);case j:e:{for(_e=O.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===O.containerInfo&&L.stateNode.implementation===O.implementation){a(N,L.sibling),L=m(L,O.children||[]),L.return=N,N=L;break e}else{a(N,L);break}else s(N,L);L=L.sibling}L=em(O,N.mode,Y),L.return=N,N=L}return S(N);case ge:return _e=O._init,vt(N,L,_e(O._payload),Y)}if(Jr(O))return ce(N,L,O,Y);if(oe(O))return ue(N,L,O,Y);vd(N,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,L!==null&&L.tag===6?(a(N,L.sibling),L=m(L,O),L.return=N,N=L):(a(N,L),L=Zg(O,N.mode,Y),L.return=N,N=L),S(N)):a(N,L)}return vt}var Ba=C0(!0),k0=C0(!1),yd=rr(null),wd=null,Ua=null,cg=null;function ug(){cg=Ua=wd=null}function hg(n){var s=yd.current;tt(yd),n._currentValue=s}function dg(n,s,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===a)break;n=n.return}}function $a(n,s){wd=n,cg=Ua=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(wn=!0),n.firstContext=null)}function qn(n){var s=n._currentValue;if(cg!==n)if(n={context:n,memoizedValue:s,next:null},Ua===null){if(wd===null)throw Error(t(308));Ua=n,wd.dependencies={lanes:0,firstContext:n}}else Ua=Ua.next=n;return s}var ro=null;function fg(n){ro===null?ro=[n]:ro.push(n)}function T0(n,s,a,h){var m=s.interleaved;return m===null?(a.next=a,fg(s)):(a.next=m.next,m.next=a),s.interleaved=a,hs(n,h)}function hs(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var lr=!1;function pg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R0(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ds(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function cr(n,s,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(He&2)!==0){var m=h.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),h.pending=s,hs(n,a)}return m=h.interleaved,m===null?(s.next=s,fg(h)):(s.next=m.next,m.next=s),h.interleaved=s,hs(n,a)}function Ad(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Tp(n,a)}}function P0(n,s){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var m=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var S={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};v===null?m=v=S:v=v.next=S,a=a.next}while(a!==null);v===null?m=v=s:v=v.next=s}else m=v=s;a={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function _d(n,s,a,h){var m=n.updateQueue;lr=!1;var v=m.firstBaseUpdate,S=m.lastBaseUpdate,T=m.shared.pending;if(T!==null){m.shared.pending=null;var P=T,z=P.next;P.next=null,S===null?v=z:S.next=z,S=P;var G=n.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==S&&(T===null?G.firstBaseUpdate=z:T.next=z,G.lastBaseUpdate=P))}if(v!==null){var q=m.baseState;S=0,G=z=P=null,T=v;do{var W=T.lane,ie=T.eventTime;if((h&W)===W){G!==null&&(G=G.next={eventTime:ie,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ce=n,ue=T;switch(W=s,ie=a,ue.tag){case 1:if(ce=ue.payload,typeof ce=="function"){q=ce.call(ie,q,W);break e}q=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=ue.payload,W=typeof ce=="function"?ce.call(ie,q,W):ce,W==null)break e;q=J({},q,W);break e;case 2:lr=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,W=m.effects,W===null?m.effects=[T]:W.push(T))}else ie={eventTime:ie,lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(z=G=ie,P=q):G=G.next=ie,S|=W;if(T=T.next,T===null){if(T=m.shared.pending,T===null)break;W=T,T=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);if(G===null&&(P=q),m.baseState=P,m.firstBaseUpdate=z,m.lastBaseUpdate=G,s=m.shared.interleaved,s!==null){m=s;do S|=m.lane,m=m.next;while(m!==s)}else v===null&&(m.shared.lanes=0);lo|=S,n.lanes=S,n.memoizedState=q}}function L0(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],m=h.callback;if(m!==null){if(h.callback=null,h=a,typeof m!="function")throw Error(t(191,m));m.call(h)}}}var Fc={},Oi=rr(Fc),Nc=rr(Fc),Oc=rr(Fc);function oo(n){if(n===Fc)throw Error(t(174));return n}function gg(n,s){switch(Je(Oc,s),Je(Nc,n),Je(Oi,Fc),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Di(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Di(s,n)}tt(Oi),Je(Oi,s)}function Va(){tt(Oi),tt(Nc),tt(Oc)}function M0(n){oo(Oc.current);var s=oo(Oi.current),a=Di(s,n.type);s!==a&&(Je(Nc,n),Je(Oi,a))}function mg(n){Nc.current===n&&(tt(Oi),tt(Nc))}var ot=rr(0);function Sd(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var vg=[];function yg(){for(var n=0;n<vg.length;n++)vg[n]._workInProgressVersionPrimary=null;vg.length=0}var Ed=I.ReactCurrentDispatcher,wg=I.ReactCurrentBatchConfig,ao=0,at=null,xt=null,It=null,bd=!1,zc=!1,jc=0,Bb=0;function Kt(){throw Error(t(321))}function Ag(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!ui(n[a],s[a]))return!1;return!0}function _g(n,s,a,h,m,v){if(ao=v,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ed.current=n===null||n.memoizedState===null?Wb:Gb,n=a(h,m),zc){v=0;do{if(zc=!1,jc=0,25<=v)throw Error(t(301));v+=1,It=xt=null,s.updateQueue=null,Ed.current=Xb,n=a(h,m)}while(zc)}if(Ed.current=kd,s=xt!==null&&xt.next!==null,ao=0,It=xt=at=null,bd=!1,s)throw Error(t(300));return n}function Sg(){var n=jc!==0;return jc=0,n}function zi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?at.memoizedState=It=n:It=It.next=n,It}function Yn(){if(xt===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=xt.next;var s=It===null?at.memoizedState:It.next;if(s!==null)It=s,xt=n;else{if(n===null)throw Error(t(310));xt=n,n={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},It===null?at.memoizedState=It=n:It=It.next=n}return It}function Hc(n,s){return typeof s=="function"?s(n):s}function Eg(n){var s=Yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=xt,m=h.baseQueue,v=a.pending;if(v!==null){if(m!==null){var S=m.next;m.next=v.next,v.next=S}h.baseQueue=m=v,a.pending=null}if(m!==null){v=m.next,h=h.baseState;var T=S=null,P=null,z=v;do{var G=z.lane;if((ao&G)===G)P!==null&&(P=P.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:n(h,z.action);else{var q={lane:G,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};P===null?(T=P=q,S=h):P=P.next=q,at.lanes|=G,lo|=G}z=z.next}while(z!==null&&z!==v);P===null?S=h:P.next=T,ui(h,s.memoizedState)||(wn=!0),s.memoizedState=h,s.baseState=S,s.baseQueue=P,a.lastRenderedState=h}if(n=a.interleaved,n!==null){m=n;do v=m.lane,at.lanes|=v,lo|=v,m=m.next;while(m!==n)}else m===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function bg(n){var s=Yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,m=a.pending,v=s.memoizedState;if(m!==null){a.pending=null;var S=m=m.next;do v=n(v,S.action),S=S.next;while(S!==m);ui(v,s.memoizedState)||(wn=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),a.lastRenderedState=v}return[v,h]}function I0(){}function D0(n,s){var a=at,h=Yn(),m=s(),v=!ui(h.memoizedState,m);if(v&&(h.memoizedState=m,wn=!0),h=h.queue,xg(O0.bind(null,a,h,n),[n]),h.getSnapshot!==s||v||It!==null&&It.memoizedState.tag&1){if(a.flags|=2048,Bc(9,N0.bind(null,a,h,m,s),void 0,null),Dt===null)throw Error(t(349));(ao&30)!==0||F0(a,s,m)}return m}function F0(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function N0(n,s,a,h){s.value=a,s.getSnapshot=h,z0(s)&&j0(n)}function O0(n,s,a){return a(function(){z0(s)&&j0(n)})}function z0(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!ui(n,a)}catch{return!0}}function j0(n){var s=hs(n,1);s!==null&&gi(s,n,1,-1)}function H0(n){var s=zi();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hc,lastRenderedState:n},s.queue=n,n=n.dispatch=Vb.bind(null,at,n),[s.memoizedState,n]}function Bc(n,s,a,h){return n={tag:n,create:s,destroy:a,deps:h,next:null},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,s.lastEffect=n)),n}function B0(){return Yn().memoizedState}function xd(n,s,a,h){var m=zi();at.flags|=n,m.memoizedState=Bc(1|s,a,void 0,h===void 0?null:h)}function Cd(n,s,a,h){var m=Yn();h=h===void 0?null:h;var v=void 0;if(xt!==null){var S=xt.memoizedState;if(v=S.destroy,h!==null&&Ag(h,S.deps)){m.memoizedState=Bc(s,a,v,h);return}}at.flags|=n,m.memoizedState=Bc(1|s,a,v,h)}function U0(n,s){return xd(8390656,8,n,s)}function xg(n,s){return Cd(2048,8,n,s)}function $0(n,s){return Cd(4,2,n,s)}function V0(n,s){return Cd(4,4,n,s)}function W0(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function G0(n,s,a){return a=a!=null?a.concat([n]):null,Cd(4,4,W0.bind(null,s,n),a)}function Cg(){}function X0(n,s){var a=Yn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Ag(s,h[1])?h[0]:(a.memoizedState=[n,s],n)}function q0(n,s){var a=Yn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Ag(s,h[1])?h[0]:(n=n(),a.memoizedState=[n,s],n)}function Y0(n,s,a){return(ao&21)===0?(n.baseState&&(n.baseState=!1,wn=!0),n.memoizedState=a):(ui(a,s)||(a=xy(),at.lanes|=a,lo|=a,n.baseState=!0),s)}function Ub(n,s){var a=We;We=a!==0&&4>a?a:4,n(!0);var h=wg.transition;wg.transition={};try{n(!1),s()}finally{We=a,wg.transition=h}}function K0(){return Yn().memoizedState}function $b(n,s,a){var h=fr(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Q0(n))J0(s,a);else if(a=T0(n,s,a,h),a!==null){var m=cn();gi(a,n,h,m),Z0(a,s,h)}}function Vb(n,s,a){var h=fr(n),m={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Q0(n))J0(s,m);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,T=v(S,a);if(m.hasEagerState=!0,m.eagerState=T,ui(T,S)){var P=s.interleaved;P===null?(m.next=m,fg(s)):(m.next=P.next,P.next=m),s.interleaved=m;return}}catch{}finally{}a=T0(n,s,m,h),a!==null&&(m=cn(),gi(a,n,h,m),Z0(a,s,h))}}function Q0(n){var s=n.alternate;return n===at||s!==null&&s===at}function J0(n,s){zc=bd=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Z0(n,s,a){if((a&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Tp(n,a)}}var kd={readContext:qn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},Wb={readContext:qn,useCallback:function(n,s){return zi().memoizedState=[n,s===void 0?null:s],n},useContext:qn,useEffect:U0,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,xd(4194308,4,W0.bind(null,s,n),a)},useLayoutEffect:function(n,s){return xd(4194308,4,n,s)},useInsertionEffect:function(n,s){return xd(4,2,n,s)},useMemo:function(n,s){var a=zi();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var h=zi();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=$b.bind(null,at,n),[h.memoizedState,n]},useRef:function(n){var s=zi();return n={current:n},s.memoizedState=n},useState:H0,useDebugValue:Cg,useDeferredValue:function(n){return zi().memoizedState=n},useTransition:function(){var n=H0(!1),s=n[0];return n=Ub.bind(null,n[1]),zi().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var h=at,m=zi();if(st){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Dt===null)throw Error(t(349));(ao&30)!==0||F0(h,s,a)}m.memoizedState=a;var v={value:a,getSnapshot:s};return m.queue=v,U0(O0.bind(null,h,v,n),[n]),h.flags|=2048,Bc(9,N0.bind(null,h,v,a,s),void 0,null),a},useId:function(){var n=zi(),s=Dt.identifierPrefix;if(st){var a=us,h=cs;a=(h&~(1<<32-ci(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=jc++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Bb++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Gb={readContext:qn,useCallback:X0,useContext:qn,useEffect:xg,useImperativeHandle:G0,useInsertionEffect:$0,useLayoutEffect:V0,useMemo:q0,useReducer:Eg,useRef:B0,useState:function(){return Eg(Hc)},useDebugValue:Cg,useDeferredValue:function(n){var s=Yn();return Y0(s,xt.memoizedState,n)},useTransition:function(){var n=Eg(Hc)[0],s=Yn().memoizedState;return[n,s]},useMutableSource:I0,useSyncExternalStore:D0,useId:K0,unstable_isNewReconciler:!1},Xb={readContext:qn,useCallback:X0,useContext:qn,useEffect:xg,useImperativeHandle:G0,useInsertionEffect:$0,useLayoutEffect:V0,useMemo:q0,useReducer:bg,useRef:B0,useState:function(){return bg(Hc)},useDebugValue:Cg,useDeferredValue:function(n){var s=Yn();return xt===null?s.memoizedState=n:Y0(s,xt.memoizedState,n)},useTransition:function(){var n=bg(Hc)[0],s=Yn().memoizedState;return[n,s]},useMutableSource:I0,useSyncExternalStore:D0,useId:K0,unstable_isNewReconciler:!1};function di(n,s){if(n&&n.defaultProps){s=J({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function kg(n,s,a,h){s=n.memoizedState,a=a(h,s),a=a==null?s:J({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Td={isMounted:function(n){return(n=n._reactInternals)?eo(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var h=cn(),m=fr(n),v=ds(h,m);v.payload=s,a!=null&&(v.callback=a),s=cr(n,v,m),s!==null&&(gi(s,n,m,h),Ad(s,n,m))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var h=cn(),m=fr(n),v=ds(h,m);v.tag=1,v.payload=s,a!=null&&(v.callback=a),s=cr(n,v,m),s!==null&&(gi(s,n,m,h),Ad(s,n,m))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=cn(),h=fr(n),m=ds(a,h);m.tag=2,s!=null&&(m.callback=s),s=cr(n,m,h),s!==null&&(gi(s,n,h,a),Ad(s,n,h))}};function ew(n,s,a,h,m,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,v,S):s.prototype&&s.prototype.isPureReactComponent?!kc(a,h)||!kc(m,v):!0}function tw(n,s,a){var h=!1,m=or,v=s.contextType;return typeof v=="object"&&v!==null?v=qn(v):(m=yn(s)?no:Yt.current,h=s.contextTypes,v=(h=h!=null)?Oa(n,m):or),s=new s(a,v),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Td,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=v),s}function nw(n,s,a,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==n&&Td.enqueueReplaceState(s,s.state,null)}function Tg(n,s,a,h){var m=n.stateNode;m.props=a,m.state=n.memoizedState,m.refs={},pg(n);var v=s.contextType;typeof v=="object"&&v!==null?m.context=qn(v):(v=yn(s)?no:Yt.current,m.context=Oa(n,v)),m.state=n.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(kg(n,s,v,a),m.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&Td.enqueueReplaceState(m,m.state,null),_d(n,a,m,h),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function Wa(n,s){try{var a="",h=s;do a+=ke(h),h=h.return;while(h);var m=a}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:s,stack:m,digest:null}}function Rg(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Pg(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var qb=typeof WeakMap=="function"?WeakMap:Map;function iw(n,s,a){a=ds(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){Fd||(Fd=!0,Wg=h),Pg(n,s)},a}function sw(n,s,a){a=ds(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var m=s.value;a.payload=function(){return h(m)},a.callback=function(){Pg(n,s)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(a.callback=function(){Pg(n,s),typeof h!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),a}function rw(n,s,a){var h=n.pingCache;if(h===null){h=n.pingCache=new qb;var m=new Set;h.set(s,m)}else m=h.get(s),m===void 0&&(m=new Set,h.set(s,m));m.has(a)||(m.add(a),n=lx.bind(null,n,s,a),s.then(n,n))}function ow(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function aw(n,s,a,h,m){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ds(-1,1),s.tag=2,cr(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=m,n)}var Yb=I.ReactCurrentOwner,wn=!1;function ln(n,s,a,h){s.child=n===null?k0(s,null,a,h):Ba(s,n.child,a,h)}function lw(n,s,a,h,m){a=a.render;var v=s.ref;return $a(s,m),h=_g(n,s,a,h,v,m),a=Sg(),n!==null&&!wn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~m,fs(n,s,m)):(st&&a&&sg(s),s.flags|=1,ln(n,s,h,m),s.child)}function cw(n,s,a,h,m){if(n===null){var v=a.type;return typeof v=="function"&&!Jg(v)&&v.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=v,uw(n,s,v,h,m)):(n=Bd(a.type,null,h,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,(n.lanes&m)===0){var S=v.memoizedProps;if(a=a.compare,a=a!==null?a:kc,a(S,h)&&n.ref===s.ref)return fs(n,s,m)}return s.flags|=1,n=gr(v,h),n.ref=s.ref,n.return=s,s.child=n}function uw(n,s,a,h,m){if(n!==null){var v=n.memoizedProps;if(kc(v,h)&&n.ref===s.ref)if(wn=!1,s.pendingProps=h=v,(n.lanes&m)!==0)(n.flags&131072)!==0&&(wn=!0);else return s.lanes=n.lanes,fs(n,s,m)}return Lg(n,s,a,h,m)}function hw(n,s,a){var h=s.pendingProps,m=h.children,v=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(Xa,In),In|=a;else{if((a&1073741824)===0)return n=v!==null?v.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Je(Xa,In),In|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:a,Je(Xa,In),In|=h}else v!==null?(h=v.baseLanes|a,s.memoizedState=null):h=a,Je(Xa,In),In|=h;return ln(n,s,m,a),s.child}function dw(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Lg(n,s,a,h,m){var v=yn(a)?no:Yt.current;return v=Oa(s,v),$a(s,m),a=_g(n,s,a,h,v,m),h=Sg(),n!==null&&!wn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~m,fs(n,s,m)):(st&&h&&sg(s),s.flags|=1,ln(n,s,a,m),s.child)}function fw(n,s,a,h,m){if(yn(a)){var v=!0;dd(s)}else v=!1;if($a(s,m),s.stateNode===null)Pd(n,s),tw(s,a,h),Tg(s,a,h,m),h=!0;else if(n===null){var S=s.stateNode,T=s.memoizedProps;S.props=T;var P=S.context,z=a.contextType;typeof z=="object"&&z!==null?z=qn(z):(z=yn(a)?no:Yt.current,z=Oa(s,z));var G=a.getDerivedStateFromProps,q=typeof G=="function"||typeof S.getSnapshotBeforeUpdate=="function";q||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==h||P!==z)&&nw(s,S,h,z),lr=!1;var W=s.memoizedState;S.state=W,_d(s,h,S,m),P=s.memoizedState,T!==h||W!==P||vn.current||lr?(typeof G=="function"&&(kg(s,a,G,h),P=s.memoizedState),(T=lr||ew(s,a,T,h,W,P,z))?(q||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=P),S.props=h,S.state=P,S.context=z,h=T):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{S=s.stateNode,R0(n,s),T=s.memoizedProps,z=s.type===s.elementType?T:di(s.type,T),S.props=z,q=s.pendingProps,W=S.context,P=a.contextType,typeof P=="object"&&P!==null?P=qn(P):(P=yn(a)?no:Yt.current,P=Oa(s,P));var ie=a.getDerivedStateFromProps;(G=typeof ie=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==q||W!==P)&&nw(s,S,h,P),lr=!1,W=s.memoizedState,S.state=W,_d(s,h,S,m);var ce=s.memoizedState;T!==q||W!==ce||vn.current||lr?(typeof ie=="function"&&(kg(s,a,ie,h),ce=s.memoizedState),(z=lr||ew(s,a,z,h,W,ce,P)||!1)?(G||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,ce,P),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,ce,P)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ce),S.props=h,S.state=ce,S.context=P,h=z):(typeof S.componentDidUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),h=!1)}return Mg(n,s,a,h,v,m)}function Mg(n,s,a,h,m,v){dw(n,s);var S=(s.flags&128)!==0;if(!h&&!S)return m&&y0(s,a,!1),fs(n,s,v);h=s.stateNode,Yb.current=s;var T=S&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&S?(s.child=Ba(s,n.child,null,v),s.child=Ba(s,null,T,v)):ln(n,s,T,v),s.memoizedState=h.state,m&&y0(s,a,!0),s.child}function pw(n){var s=n.stateNode;s.pendingContext?m0(n,s.pendingContext,s.pendingContext!==s.context):s.context&&m0(n,s.context,!1),gg(n,s.containerInfo)}function gw(n,s,a,h,m){return Ha(),lg(m),s.flags|=256,ln(n,s,a,h),s.child}var Ig={dehydrated:null,treeContext:null,retryLane:0};function Dg(n){return{baseLanes:n,cachePool:null,transitions:null}}function mw(n,s,a){var h=s.pendingProps,m=ot.current,v=!1,S=(s.flags&128)!==0,T;if((T=S)||(T=n!==null&&n.memoizedState===null?!1:(m&2)!==0),T?(v=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),Je(ot,m&1),n===null)return ag(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(S=h.children,n=h.fallback,v?(h=s.mode,v=s.child,S={mode:"hidden",children:S},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Ud(S,h,0,null),n=fo(n,h,a,null),v.return=s,n.return=s,v.sibling=n,s.child=v,s.child.memoizedState=Dg(a),s.memoizedState=Ig,n):Fg(s,S));if(m=n.memoizedState,m!==null&&(T=m.dehydrated,T!==null))return Kb(n,s,S,h,T,m,a);if(v){v=h.fallback,S=s.mode,m=n.child,T=m.sibling;var P={mode:"hidden",children:h.children};return(S&1)===0&&s.child!==m?(h=s.child,h.childLanes=0,h.pendingProps=P,s.deletions=null):(h=gr(m,P),h.subtreeFlags=m.subtreeFlags&14680064),T!==null?v=gr(T,v):(v=fo(v,S,a,null),v.flags|=2),v.return=s,h.return=s,h.sibling=v,s.child=h,h=v,v=s.child,S=n.child.memoizedState,S=S===null?Dg(a):{baseLanes:S.baseLanes|a,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=n.childLanes&~a,s.memoizedState=Ig,h}return v=n.child,n=v.sibling,h=gr(v,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=h,s.memoizedState=null,h}function Fg(n,s){return s=Ud({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Rd(n,s,a,h){return h!==null&&lg(h),Ba(s,n.child,null,a),n=Fg(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Kb(n,s,a,h,m,v,S){if(a)return s.flags&256?(s.flags&=-257,h=Rg(Error(t(422))),Rd(n,s,S,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(v=h.fallback,m=s.mode,h=Ud({mode:"visible",children:h.children},m,0,null),v=fo(v,m,S,null),v.flags|=2,h.return=s,v.return=s,h.sibling=v,s.child=h,(s.mode&1)!==0&&Ba(s,n.child,null,S),s.child.memoizedState=Dg(S),s.memoizedState=Ig,v);if((s.mode&1)===0)return Rd(n,s,S,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var T=h.dgst;return h=T,v=Error(t(419)),h=Rg(v,h,void 0),Rd(n,s,S,h)}if(T=(S&n.childLanes)!==0,wn||T){if(h=Dt,h!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|S))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,hs(n,m),gi(h,n,m,-1))}return Qg(),h=Rg(Error(t(421))),Rd(n,s,S,h)}return m.data==="$?"?(s.flags|=128,s.child=n.child,s=cx.bind(null,n),m._reactRetry=s,null):(n=v.treeContext,Mn=sr(m.nextSibling),Ln=s,st=!0,hi=null,n!==null&&(Gn[Xn++]=cs,Gn[Xn++]=us,Gn[Xn++]=io,cs=n.id,us=n.overflow,io=s),s=Fg(s,h.children),s.flags|=4096,s)}function vw(n,s,a){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),dg(n.return,s,a)}function Ng(n,s,a,h,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=a,v.tailMode=m)}function yw(n,s,a){var h=s.pendingProps,m=h.revealOrder,v=h.tail;if(ln(n,s,h.children,a),h=ot.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vw(n,a,s);else if(n.tag===19)vw(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Je(ot,h),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(a=s.child,m=null;a!==null;)n=a.alternate,n!==null&&Sd(n)===null&&(m=a),a=a.sibling;a=m,a===null?(m=s.child,s.child=null):(m=a.sibling,a.sibling=null),Ng(s,!1,m,a,v);break;case"backwards":for(a=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&Sd(n)===null){s.child=m;break}n=m.sibling,m.sibling=a,a=m,m=n}Ng(s,!0,a,null,v);break;case"together":Ng(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pd(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function fs(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),lo|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=gr(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=gr(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Qb(n,s,a){switch(s.tag){case 3:pw(s),Ha();break;case 5:M0(s);break;case 1:yn(s.type)&&dd(s);break;case 4:gg(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,m=s.memoizedProps.value;Je(yd,h._currentValue),h._currentValue=m;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Je(ot,ot.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?mw(n,s,a):(Je(ot,ot.current&1),n=fs(n,s,a),n!==null?n.sibling:null);Je(ot,ot.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(n.flags&128)!==0){if(h)return yw(n,s,a);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Je(ot,ot.current),h)break;return null;case 22:case 23:return s.lanes=0,hw(n,s,a)}return fs(n,s,a)}var ww,Og,Aw,_w;ww=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Og=function(){},Aw=function(n,s,a,h){var m=n.memoizedProps;if(m!==h){n=s.stateNode,oo(Oi.current);var v=null;switch(a){case"input":m=it(n,m),h=it(n,h),v=[];break;case"select":m=J({},m,{value:void 0}),h=J({},h,{value:void 0}),v=[];break;case"textarea":m=uc(n,m),h=uc(n,h),v=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=cd)}vp(a,h);var S;a=null;for(z in m)if(!h.hasOwnProperty(z)&&m.hasOwnProperty(z)&&m[z]!=null)if(z==="style"){var T=m[z];for(S in T)T.hasOwnProperty(S)&&(a||(a={}),a[S]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(r.hasOwnProperty(z)?v||(v=[]):(v=v||[]).push(z,null));for(z in h){var P=h[z];if(T=m!=null?m[z]:void 0,h.hasOwnProperty(z)&&P!==T&&(P!=null||T!=null))if(z==="style")if(T){for(S in T)!T.hasOwnProperty(S)||P&&P.hasOwnProperty(S)||(a||(a={}),a[S]="");for(S in P)P.hasOwnProperty(S)&&T[S]!==P[S]&&(a||(a={}),a[S]=P[S])}else a||(v||(v=[]),v.push(z,a)),a=P;else z==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,T=T?T.__html:void 0,P!=null&&T!==P&&(v=v||[]).push(z,P)):z==="children"?typeof P!="string"&&typeof P!="number"||(v=v||[]).push(z,""+P):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(r.hasOwnProperty(z)?(P!=null&&z==="onScroll"&&et("scroll",n),v||T===P||(v=[])):(v=v||[]).push(z,P))}a&&(v=v||[]).push("style",a);var z=v;(s.updateQueue=z)&&(s.flags|=4)}},_w=function(n,s,a,h){a!==h&&(s.flags|=4)};function Uc(n,s){if(!st)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Qt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(s)for(var m=n.child;m!==null;)a|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)a|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=h,n.childLanes=a,s}function Jb(n,s,a){var h=s.pendingProps;switch(rg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return yn(s.type)&&hd(),Qt(s),null;case 3:return h=s.stateNode,Va(),tt(vn),tt(Yt),yg(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(md(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,hi!==null&&(qg(hi),hi=null))),Og(n,s),Qt(s),null;case 5:mg(s);var m=oo(Oc.current);if(a=s.type,n!==null&&s.stateNode!=null)Aw(n,s,a,h,m),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Qt(s),null}if(n=oo(Oi.current),md(s)){h=s.stateNode,a=s.type;var v=s.memoizedProps;switch(h[Ni]=s,h[Mc]=v,n=(s.mode&1)!==0,a){case"dialog":et("cancel",h),et("close",h);break;case"iframe":case"object":case"embed":et("load",h);break;case"video":case"audio":for(m=0;m<Rc.length;m++)et(Rc[m],h);break;case"source":et("error",h);break;case"img":case"image":case"link":et("error",h),et("load",h);break;case"details":et("toggle",h);break;case"input":bt(h,v),et("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},et("invalid",h);break;case"textarea":zh(h,v),et("invalid",h)}vp(a,v),m=null;for(var S in v)if(v.hasOwnProperty(S)){var T=v[S];S==="children"?typeof T=="string"?h.textContent!==T&&(v.suppressHydrationWarning!==!0&&ld(h.textContent,T,n),m=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(v.suppressHydrationWarning!==!0&&ld(h.textContent,T,n),m=["children",""+T]):r.hasOwnProperty(S)&&T!=null&&S==="onScroll"&&et("scroll",h)}switch(a){case"input":Mi(h),Qs(h,v,!0);break;case"textarea":Mi(h),Hh(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=cd)}h=m,s.updateQueue=h,h!==null&&(s.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Bh(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=S.createElement(a,{is:h.is}):(n=S.createElement(a),a==="select"&&(S=n,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):n=S.createElementNS(n,a),n[Ni]=s,n[Mc]=h,ww(n,s,!1,!1),s.stateNode=n;e:{switch(S=yp(a,h),a){case"dialog":et("cancel",n),et("close",n),m=h;break;case"iframe":case"object":case"embed":et("load",n),m=h;break;case"video":case"audio":for(m=0;m<Rc.length;m++)et(Rc[m],n);m=h;break;case"source":et("error",n),m=h;break;case"img":case"image":case"link":et("error",n),et("load",n),m=h;break;case"details":et("toggle",n),m=h;break;case"input":bt(n,h),m=it(n,h),et("invalid",n);break;case"option":m=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},m=J({},h,{value:void 0}),et("invalid",n);break;case"textarea":zh(n,h),m=uc(n,h),et("invalid",n);break;default:m=h}vp(a,m),T=m;for(v in T)if(T.hasOwnProperty(v)){var P=T[v];v==="style"?uy(n,P):v==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Zr(n,P)):v==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&os(n,P):typeof P=="number"&&os(n,""+P):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(r.hasOwnProperty(v)?P!=null&&v==="onScroll"&&et("scroll",n):P!=null&&D(n,v,P,S))}switch(a){case"input":Mi(n),Qs(n,h,!1);break;case"textarea":Mi(n),Hh(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Le(h.value));break;case"select":n.multiple=!!h.multiple,v=h.value,v!=null?li(n,!!h.multiple,v,!1):h.defaultValue!=null&&li(n,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=cd)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Qt(s),null;case 6:if(n&&s.stateNode!=null)_w(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=oo(Oc.current),oo(Oi.current),md(s)){if(h=s.stateNode,a=s.memoizedProps,h[Ni]=s,(v=h.nodeValue!==a)&&(n=Ln,n!==null))switch(n.tag){case 3:ld(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ld(h.nodeValue,a,(n.mode&1)!==0)}v&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Ni]=s,s.stateNode=h}return Qt(s),null;case 13:if(tt(ot),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(st&&Mn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)b0(),Ha(),s.flags|=98560,v=!1;else if(v=md(s),h!==null&&h.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Ni]=s}else Ha(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qt(s),v=!1}else hi!==null&&(qg(hi),hi=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(ot.current&1)!==0?Ct===0&&(Ct=3):Qg())),s.updateQueue!==null&&(s.flags|=4),Qt(s),null);case 4:return Va(),Og(n,s),n===null&&Pc(s.stateNode.containerInfo),Qt(s),null;case 10:return hg(s.type._context),Qt(s),null;case 17:return yn(s.type)&&hd(),Qt(s),null;case 19:if(tt(ot),v=s.memoizedState,v===null)return Qt(s),null;if(h=(s.flags&128)!==0,S=v.rendering,S===null)if(h)Uc(v,!1);else{if(Ct!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(S=Sd(n),S!==null){for(s.flags|=128,Uc(v,!1),h=S.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)v=a,n=h,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,n=S.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Je(ot,ot.current&1|2),s.child}n=n.sibling}v.tail!==null&&mt()>qa&&(s.flags|=128,h=!0,Uc(v,!1),s.lanes=4194304)}else{if(!h)if(n=Sd(S),n!==null){if(s.flags|=128,h=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Uc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!st)return Qt(s),null}else 2*mt()-v.renderingStartTime>qa&&a!==1073741824&&(s.flags|=128,h=!0,Uc(v,!1),s.lanes=4194304);v.isBackwards?(S.sibling=s.child,s.child=S):(a=v.last,a!==null?a.sibling=S:s.child=S,v.last=S)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=mt(),s.sibling=null,a=ot.current,Je(ot,h?a&1|2:a&1),s):(Qt(s),null);case 22:case 23:return Kg(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(In&1073741824)!==0&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Zb(n,s){switch(rg(s),s.tag){case 1:return yn(s.type)&&hd(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Va(),tt(vn),tt(Yt),yg(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return mg(s),null;case 13:if(tt(ot),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ha()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(ot),null;case 4:return Va(),null;case 10:return hg(s.type._context),null;case 22:case 23:return Kg(),null;case 24:return null;default:return null}}var Ld=!1,Jt=!1,ex=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Ga(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){dt(n,s,h)}else a.current=null}function zg(n,s,a){try{a()}catch(h){dt(n,s,h)}}var Sw=!1;function tx(n,s){if(Kp=Qh,n=e0(),Up(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var S=0,T=-1,P=-1,z=0,G=0,q=n,W=null;t:for(;;){for(var ie;q!==a||m!==0&&q.nodeType!==3||(T=S+m),q!==v||h!==0&&q.nodeType!==3||(P=S+h),q.nodeType===3&&(S+=q.nodeValue.length),(ie=q.firstChild)!==null;)W=q,q=ie;for(;;){if(q===n)break t;if(W===a&&++z===m&&(T=S),W===v&&++G===h&&(P=S),(ie=q.nextSibling)!==null)break;q=W,W=q.parentNode}q=ie}a=T===-1||P===-1?null:{start:T,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Qp={focusedElem:n,selectionRange:a},Qh=!1,ae=s;ae!==null;)if(s=ae,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ae=n;else for(;ae!==null;){s=ae;try{var ce=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var ue=ce.memoizedProps,vt=ce.memoizedState,N=s.stateNode,L=N.getSnapshotBeforeUpdate(s.elementType===s.type?ue:di(s.type,ue),vt);N.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var O=s.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Y){dt(s,s.return,Y)}if(n=s.sibling,n!==null){n.return=s.return,ae=n;break}ae=s.return}return ce=Sw,Sw=!1,ce}function $c(n,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&n)===n){var v=m.destroy;m.destroy=void 0,v!==void 0&&zg(s,a,v)}m=m.next}while(m!==h)}}function Md(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function jg(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function Ew(n){var s=n.alternate;s!==null&&(n.alternate=null,Ew(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Ni],delete s[Mc],delete s[tg],delete s[Ob],delete s[zb])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function bw(n){return n.tag===5||n.tag===3||n.tag===4}function xw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||bw(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Hg(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=cd));else if(h!==4&&(n=n.child,n!==null))for(Hg(n,s,a),n=n.sibling;n!==null;)Hg(n,s,a),n=n.sibling}function Bg(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Bg(n,s,a),n=n.sibling;n!==null;)Bg(n,s,a),n=n.sibling}var Ut=null,fi=!1;function ur(n,s,a){for(a=a.child;a!==null;)Cw(n,s,a),a=a.sibling}function Cw(n,s,a){if(Fi&&typeof Fi.onCommitFiberUnmount=="function")try{Fi.onCommitFiberUnmount(Wh,a)}catch{}switch(a.tag){case 5:Jt||Ga(a,s);case 6:var h=Ut,m=fi;Ut=null,ur(n,s,a),Ut=h,fi=m,Ut!==null&&(fi?(n=Ut,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ut.removeChild(a.stateNode));break;case 18:Ut!==null&&(fi?(n=Ut,a=a.stateNode,n.nodeType===8?eg(n.parentNode,a):n.nodeType===1&&eg(n,a),_c(n)):eg(Ut,a.stateNode));break;case 4:h=Ut,m=fi,Ut=a.stateNode.containerInfo,fi=!0,ur(n,s,a),Ut=h,fi=m;break;case 0:case 11:case 14:case 15:if(!Jt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var v=m,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&zg(a,s,S),m=m.next}while(m!==h)}ur(n,s,a);break;case 1:if(!Jt&&(Ga(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(T){dt(a,s,T)}ur(n,s,a);break;case 21:ur(n,s,a);break;case 22:a.mode&1?(Jt=(h=Jt)||a.memoizedState!==null,ur(n,s,a),Jt=h):ur(n,s,a);break;default:ur(n,s,a)}}function kw(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new ex),s.forEach(function(h){var m=ux.bind(null,n,h);a.has(h)||(a.add(h),h.then(m,m))})}}function pi(n,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var m=a[h];try{var v=n,S=s,T=S;e:for(;T!==null;){switch(T.tag){case 5:Ut=T.stateNode,fi=!1;break e;case 3:Ut=T.stateNode.containerInfo,fi=!0;break e;case 4:Ut=T.stateNode.containerInfo,fi=!0;break e}T=T.return}if(Ut===null)throw Error(t(160));Cw(v,S,m),Ut=null,fi=!1;var P=m.alternate;P!==null&&(P.return=null),m.return=null}catch(z){dt(m,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Tw(s,n),s=s.sibling}function Tw(n,s){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(pi(s,n),ji(n),h&4){try{$c(3,n,n.return),Md(3,n)}catch(ue){dt(n,n.return,ue)}try{$c(5,n,n.return)}catch(ue){dt(n,n.return,ue)}}break;case 1:pi(s,n),ji(n),h&512&&a!==null&&Ga(a,a.return);break;case 5:if(pi(s,n),ji(n),h&512&&a!==null&&Ga(a,a.return),n.flags&32){var m=n.stateNode;try{os(m,"")}catch(ue){dt(n,n.return,ue)}}if(h&4&&(m=n.stateNode,m!=null)){var v=n.memoizedProps,S=a!==null?a.memoizedProps:v,T=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{T==="input"&&v.type==="radio"&&v.name!=null&&gt(m,v),yp(T,S);var z=yp(T,v);for(S=0;S<P.length;S+=2){var G=P[S],q=P[S+1];G==="style"?uy(m,q):G==="dangerouslySetInnerHTML"?Zr(m,q):G==="children"?os(m,q):D(m,G,q,z)}switch(T){case"input":Ii(m,v);break;case"textarea":jh(m,v);break;case"select":var W=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var ie=v.value;ie!=null?li(m,!!v.multiple,ie,!1):W!==!!v.multiple&&(v.defaultValue!=null?li(m,!!v.multiple,v.defaultValue,!0):li(m,!!v.multiple,v.multiple?[]:"",!1))}m[Mc]=v}catch(ue){dt(n,n.return,ue)}}break;case 6:if(pi(s,n),ji(n),h&4){if(n.stateNode===null)throw Error(t(162));m=n.stateNode,v=n.memoizedProps;try{m.nodeValue=v}catch(ue){dt(n,n.return,ue)}}break;case 3:if(pi(s,n),ji(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{_c(s.containerInfo)}catch(ue){dt(n,n.return,ue)}break;case 4:pi(s,n),ji(n);break;case 13:pi(s,n),ji(n),m=n.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(Vg=mt())),h&4&&kw(n);break;case 22:if(G=a!==null&&a.memoizedState!==null,n.mode&1?(Jt=(z=Jt)||G,pi(s,n),Jt=z):pi(s,n),ji(n),h&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!G&&(n.mode&1)!==0)for(ae=n,G=n.child;G!==null;){for(q=ae=G;ae!==null;){switch(W=ae,ie=W.child,W.tag){case 0:case 11:case 14:case 15:$c(4,W,W.return);break;case 1:Ga(W,W.return);var ce=W.stateNode;if(typeof ce.componentWillUnmount=="function"){h=W,a=W.return;try{s=h,ce.props=s.memoizedProps,ce.state=s.memoizedState,ce.componentWillUnmount()}catch(ue){dt(h,a,ue)}}break;case 5:Ga(W,W.return);break;case 22:if(W.memoizedState!==null){Lw(q);continue}}ie!==null?(ie.return=W,ae=ie):Lw(q)}G=G.sibling}e:for(G=null,q=n;;){if(q.tag===5){if(G===null){G=q;try{m=q.stateNode,z?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(T=q.stateNode,P=q.memoizedProps.style,S=P!=null&&P.hasOwnProperty("display")?P.display:null,T.style.display=cy("display",S))}catch(ue){dt(n,n.return,ue)}}}else if(q.tag===6){if(G===null)try{q.stateNode.nodeValue=z?"":q.memoizedProps}catch(ue){dt(n,n.return,ue)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===n)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===n)break e;for(;q.sibling===null;){if(q.return===null||q.return===n)break e;G===q&&(G=null),q=q.return}G===q&&(G=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:pi(s,n),ji(n),h&4&&kw(n);break;case 21:break;default:pi(s,n),ji(n)}}function ji(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(bw(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(os(m,""),h.flags&=-33);var v=xw(n);Bg(n,v,m);break;case 3:case 4:var S=h.stateNode.containerInfo,T=xw(n);Hg(n,T,S);break;default:throw Error(t(161))}}catch(P){dt(n,n.return,P)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function nx(n,s,a){ae=n,Rw(n)}function Rw(n,s,a){for(var h=(n.mode&1)!==0;ae!==null;){var m=ae,v=m.child;if(m.tag===22&&h){var S=m.memoizedState!==null||Ld;if(!S){var T=m.alternate,P=T!==null&&T.memoizedState!==null||Jt;T=Ld;var z=Jt;if(Ld=S,(Jt=P)&&!z)for(ae=m;ae!==null;)S=ae,P=S.child,S.tag===22&&S.memoizedState!==null?Mw(m):P!==null?(P.return=S,ae=P):Mw(m);for(;v!==null;)ae=v,Rw(v),v=v.sibling;ae=m,Ld=T,Jt=z}Pw(n)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,ae=v):Pw(n)}}function Pw(n){for(;ae!==null;){var s=ae;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Jt||Md(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Jt)if(a===null)h.componentDidMount();else{var m=s.elementType===s.type?a.memoizedProps:di(s.type,a.memoizedProps);h.componentDidUpdate(m,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&L0(s,v,h);break;case 3:var S=s.updateQueue;if(S!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}L0(s,S,a)}break;case 5:var T=s.stateNode;if(a===null&&s.flags&4){a=T;var P=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var G=z.memoizedState;if(G!==null){var q=G.dehydrated;q!==null&&_c(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||s.flags&512&&jg(s)}catch(W){dt(s,s.return,W)}}if(s===n){ae=null;break}if(a=s.sibling,a!==null){a.return=s.return,ae=a;break}ae=s.return}}function Lw(n){for(;ae!==null;){var s=ae;if(s===n){ae=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ae=a;break}ae=s.return}}function Mw(n){for(;ae!==null;){var s=ae;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Md(4,s)}catch(P){dt(s,a,P)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var m=s.return;try{h.componentDidMount()}catch(P){dt(s,m,P)}}var v=s.return;try{jg(s)}catch(P){dt(s,v,P)}break;case 5:var S=s.return;try{jg(s)}catch(P){dt(s,S,P)}}}catch(P){dt(s,s.return,P)}if(s===n){ae=null;break}var T=s.sibling;if(T!==null){T.return=s.return,ae=T;break}ae=s.return}}var ix=Math.ceil,Id=I.ReactCurrentDispatcher,Ug=I.ReactCurrentOwner,Kn=I.ReactCurrentBatchConfig,He=0,Dt=null,At=null,$t=0,In=0,Xa=rr(0),Ct=0,Vc=null,lo=0,Dd=0,$g=0,Wc=null,An=null,Vg=0,qa=1/0,ps=null,Fd=!1,Wg=null,hr=null,Nd=!1,dr=null,Od=0,Gc=0,Gg=null,zd=-1,jd=0;function cn(){return(He&6)!==0?mt():zd!==-1?zd:zd=mt()}function fr(n){return(n.mode&1)===0?1:(He&2)!==0&&$t!==0?$t&-$t:Hb.transition!==null?(jd===0&&(jd=xy()),jd):(n=We,n!==0||(n=window.event,n=n===void 0?16:Dy(n.type)),n)}function gi(n,s,a,h){if(50<Gc)throw Gc=0,Gg=null,Error(t(185));mc(n,a,h),((He&2)===0||n!==Dt)&&(n===Dt&&((He&2)===0&&(Dd|=a),Ct===4&&pr(n,$t)),_n(n,h),a===1&&He===0&&(s.mode&1)===0&&(qa=mt()+500,fd&&ar()))}function _n(n,s){var a=n.callbackNode;HE(n,s);var h=qh(n,n===Dt?$t:0);if(h===0)a!==null&&Sy(a),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(a!=null&&Sy(a),s===1)n.tag===0?jb(Dw.bind(null,n)):w0(Dw.bind(null,n)),Fb(function(){(He&6)===0&&ar()}),a=null;else{switch(Cy(h)){case 1:a=xp;break;case 4:a=Ey;break;case 16:a=Vh;break;case 536870912:a=by;break;default:a=Vh}a=Uw(a,Iw.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Iw(n,s){if(zd=-1,jd=0,(He&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Ya()&&n.callbackNode!==a)return null;var h=qh(n,n===Dt?$t:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=Hd(n,h);else{s=h;var m=He;He|=2;var v=Nw();(Dt!==n||$t!==s)&&(ps=null,qa=mt()+500,uo(n,s));do try{ox();break}catch(T){Fw(n,T)}while(!0);ug(),Id.current=v,He=m,At!==null?s=0:(Dt=null,$t=0,s=Ct)}if(s!==0){if(s===2&&(m=Cp(n),m!==0&&(h=m,s=Xg(n,m))),s===1)throw a=Vc,uo(n,0),pr(n,h),_n(n,mt()),a;if(s===6)pr(n,h);else{if(m=n.current.alternate,(h&30)===0&&!sx(m)&&(s=Hd(n,h),s===2&&(v=Cp(n),v!==0&&(h=v,s=Xg(n,v))),s===1))throw a=Vc,uo(n,0),pr(n,h),_n(n,mt()),a;switch(n.finishedWork=m,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ho(n,An,ps);break;case 3:if(pr(n,h),(h&130023424)===h&&(s=Vg+500-mt(),10<s)){if(qh(n,0)!==0)break;if(m=n.suspendedLanes,(m&h)!==h){cn(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=Zp(ho.bind(null,n,An,ps),s);break}ho(n,An,ps);break;case 4:if(pr(n,h),(h&4194240)===h)break;for(s=n.eventTimes,m=-1;0<h;){var S=31-ci(h);v=1<<S,S=s[S],S>m&&(m=S),h&=~v}if(h=m,h=mt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*ix(h/1960))-h,10<h){n.timeoutHandle=Zp(ho.bind(null,n,An,ps),h);break}ho(n,An,ps);break;case 5:ho(n,An,ps);break;default:throw Error(t(329))}}}return _n(n,mt()),n.callbackNode===a?Iw.bind(null,n):null}function Xg(n,s){var a=Wc;return n.current.memoizedState.isDehydrated&&(uo(n,s).flags|=256),n=Hd(n,s),n!==2&&(s=An,An=a,s!==null&&qg(s)),n}function qg(n){An===null?An=n:An.push.apply(An,n)}function sx(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var m=a[h],v=m.getSnapshot;m=m.value;try{if(!ui(v(),m))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function pr(n,s){for(s&=~$g,s&=~Dd,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-ci(s),h=1<<a;n[a]=-1,s&=~h}}function Dw(n){if((He&6)!==0)throw Error(t(327));Ya();var s=qh(n,0);if((s&1)===0)return _n(n,mt()),null;var a=Hd(n,s);if(n.tag!==0&&a===2){var h=Cp(n);h!==0&&(s=h,a=Xg(n,h))}if(a===1)throw a=Vc,uo(n,0),pr(n,s),_n(n,mt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ho(n,An,ps),_n(n,mt()),null}function Yg(n,s){var a=He;He|=1;try{return n(s)}finally{He=a,He===0&&(qa=mt()+500,fd&&ar())}}function co(n){dr!==null&&dr.tag===0&&(He&6)===0&&Ya();var s=He;He|=1;var a=Kn.transition,h=We;try{if(Kn.transition=null,We=1,n)return n()}finally{We=h,Kn.transition=a,He=s,(He&6)===0&&ar()}}function Kg(){In=Xa.current,tt(Xa)}function uo(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Db(a)),At!==null)for(a=At.return;a!==null;){var h=a;switch(rg(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&hd();break;case 3:Va(),tt(vn),tt(Yt),yg();break;case 5:mg(h);break;case 4:Va();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:hg(h.type._context);break;case 22:case 23:Kg()}a=a.return}if(Dt=n,At=n=gr(n.current,null),$t=In=s,Ct=0,Vc=null,$g=Dd=lo=0,An=Wc=null,ro!==null){for(s=0;s<ro.length;s++)if(a=ro[s],h=a.interleaved,h!==null){a.interleaved=null;var m=h.next,v=a.pending;if(v!==null){var S=v.next;v.next=m,h.next=S}a.pending=h}ro=null}return n}function Fw(n,s){do{var a=At;try{if(ug(),Ed.current=kd,bd){for(var h=at.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}bd=!1}if(ao=0,It=xt=at=null,zc=!1,jc=0,Ug.current=null,a===null||a.return===null){Ct=1,Vc=s,At=null;break}e:{var v=n,S=a.return,T=a,P=s;if(s=$t,T.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var z=P,G=T,q=G.tag;if((G.mode&1)===0&&(q===0||q===11||q===15)){var W=G.alternate;W?(G.updateQueue=W.updateQueue,G.memoizedState=W.memoizedState,G.lanes=W.lanes):(G.updateQueue=null,G.memoizedState=null)}var ie=ow(S);if(ie!==null){ie.flags&=-257,aw(ie,S,T,v,s),ie.mode&1&&rw(v,z,s),s=ie,P=z;var ce=s.updateQueue;if(ce===null){var ue=new Set;ue.add(P),s.updateQueue=ue}else ce.add(P);break e}else{if((s&1)===0){rw(v,z,s),Qg();break e}P=Error(t(426))}}else if(st&&T.mode&1){var vt=ow(S);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),aw(vt,S,T,v,s),lg(Wa(P,T));break e}}v=P=Wa(P,T),Ct!==4&&(Ct=2),Wc===null?Wc=[v]:Wc.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var N=iw(v,P,s);P0(v,N);break e;case 1:T=P;var L=v.type,O=v.stateNode;if((v.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(hr===null||!hr.has(O)))){v.flags|=65536,s&=-s,v.lanes|=s;var Y=sw(v,T,s);P0(v,Y);break e}}v=v.return}while(v!==null)}zw(a)}catch(de){s=de,At===a&&a!==null&&(At=a=a.return);continue}break}while(!0)}function Nw(){var n=Id.current;return Id.current=kd,n===null?kd:n}function Qg(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Dt===null||(lo&268435455)===0&&(Dd&268435455)===0||pr(Dt,$t)}function Hd(n,s){var a=He;He|=2;var h=Nw();(Dt!==n||$t!==s)&&(ps=null,uo(n,s));do try{rx();break}catch(m){Fw(n,m)}while(!0);if(ug(),He=a,Id.current=h,At!==null)throw Error(t(261));return Dt=null,$t=0,Ct}function rx(){for(;At!==null;)Ow(At)}function ox(){for(;At!==null&&!LE();)Ow(At)}function Ow(n){var s=Bw(n.alternate,n,In);n.memoizedProps=n.pendingProps,s===null?zw(n):At=s,Ug.current=null}function zw(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=Jb(a,s,In),a!==null){At=a;return}}else{if(a=Zb(a,s),a!==null){a.flags&=32767,At=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,At=null;return}}if(s=s.sibling,s!==null){At=s;return}At=s=n}while(s!==null);Ct===0&&(Ct=5)}function ho(n,s,a){var h=We,m=Kn.transition;try{Kn.transition=null,We=1,ax(n,s,a,h)}finally{Kn.transition=m,We=h}return null}function ax(n,s,a,h){do Ya();while(dr!==null);if((He&6)!==0)throw Error(t(327));a=n.finishedWork;var m=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=a.lanes|a.childLanes;if(BE(n,v),n===Dt&&(At=Dt=null,$t=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Nd||(Nd=!0,Uw(Vh,function(){return Ya(),null})),v=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||v){v=Kn.transition,Kn.transition=null;var S=We;We=1;var T=He;He|=4,Ug.current=null,tx(n,a),Tw(a,n),kb(Qp),Qh=!!Kp,Qp=Kp=null,n.current=a,nx(a),ME(),He=T,We=S,Kn.transition=v}else n.current=a;if(Nd&&(Nd=!1,dr=n,Od=m),v=n.pendingLanes,v===0&&(hr=null),FE(a.stateNode),_n(n,mt()),s!==null)for(h=n.onRecoverableError,a=0;a<s.length;a++)m=s[a],h(m.value,{componentStack:m.stack,digest:m.digest});if(Fd)throw Fd=!1,n=Wg,Wg=null,n;return(Od&1)!==0&&n.tag!==0&&Ya(),v=n.pendingLanes,(v&1)!==0?n===Gg?Gc++:(Gc=0,Gg=n):Gc=0,ar(),null}function Ya(){if(dr!==null){var n=Cy(Od),s=Kn.transition,a=We;try{if(Kn.transition=null,We=16>n?16:n,dr===null)var h=!1;else{if(n=dr,dr=null,Od=0,(He&6)!==0)throw Error(t(331));var m=He;for(He|=4,ae=n.current;ae!==null;){var v=ae,S=v.child;if((ae.flags&16)!==0){var T=v.deletions;if(T!==null){for(var P=0;P<T.length;P++){var z=T[P];for(ae=z;ae!==null;){var G=ae;switch(G.tag){case 0:case 11:case 15:$c(8,G,v)}var q=G.child;if(q!==null)q.return=G,ae=q;else for(;ae!==null;){G=ae;var W=G.sibling,ie=G.return;if(Ew(G),G===z){ae=null;break}if(W!==null){W.return=ie,ae=W;break}ae=ie}}}var ce=v.alternate;if(ce!==null){var ue=ce.child;if(ue!==null){ce.child=null;do{var vt=ue.sibling;ue.sibling=null,ue=vt}while(ue!==null)}}ae=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,ae=S;else e:for(;ae!==null;){if(v=ae,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:$c(9,v,v.return)}var N=v.sibling;if(N!==null){N.return=v.return,ae=N;break e}ae=v.return}}var L=n.current;for(ae=L;ae!==null;){S=ae;var O=S.child;if((S.subtreeFlags&2064)!==0&&O!==null)O.return=S,ae=O;else e:for(S=L;ae!==null;){if(T=ae,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Md(9,T)}}catch(de){dt(T,T.return,de)}if(T===S){ae=null;break e}var Y=T.sibling;if(Y!==null){Y.return=T.return,ae=Y;break e}ae=T.return}}if(He=m,ar(),Fi&&typeof Fi.onPostCommitFiberRoot=="function")try{Fi.onPostCommitFiberRoot(Wh,n)}catch{}h=!0}return h}finally{We=a,Kn.transition=s}}return!1}function jw(n,s,a){s=Wa(a,s),s=iw(n,s,1),n=cr(n,s,1),s=cn(),n!==null&&(mc(n,1,s),_n(n,s))}function dt(n,s,a){if(n.tag===3)jw(n,n,a);else for(;s!==null;){if(s.tag===3){jw(s,n,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(hr===null||!hr.has(h))){n=Wa(a,n),n=sw(s,n,1),s=cr(s,n,1),n=cn(),s!==null&&(mc(s,1,n),_n(s,n));break}}s=s.return}}function lx(n,s,a){var h=n.pingCache;h!==null&&h.delete(s),s=cn(),n.pingedLanes|=n.suspendedLanes&a,Dt===n&&($t&a)===a&&(Ct===4||Ct===3&&($t&130023424)===$t&&500>mt()-Vg?uo(n,0):$g|=a),_n(n,s)}function Hw(n,s){s===0&&((n.mode&1)===0?s=1:(s=Xh,Xh<<=1,(Xh&130023424)===0&&(Xh=4194304)));var a=cn();n=hs(n,s),n!==null&&(mc(n,s,a),_n(n,a))}function cx(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Hw(n,a)}function ux(n,s){var a=0;switch(n.tag){case 13:var h=n.stateNode,m=n.memoizedState;m!==null&&(a=m.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Hw(n,a)}var Bw;Bw=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||vn.current)wn=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return wn=!1,Qb(n,s,a);wn=(n.flags&131072)!==0}else wn=!1,st&&(s.flags&1048576)!==0&&A0(s,gd,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Pd(n,s),n=s.pendingProps;var m=Oa(s,Yt.current);$a(s,a),m=_g(null,s,h,n,m,a);var v=Sg();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,yn(h)?(v=!0,dd(s)):v=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,pg(s),m.updater=Td,s.stateNode=m,m._reactInternals=s,Tg(s,h,n,a),s=Mg(null,s,h,!0,v,a)):(s.tag=0,st&&v&&sg(s),ln(null,s,m,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Pd(n,s),n=s.pendingProps,m=h._init,h=m(h._payload),s.type=h,m=s.tag=dx(h),n=di(h,n),m){case 0:s=Lg(null,s,h,n,a);break e;case 1:s=fw(null,s,h,n,a);break e;case 11:s=lw(null,s,h,n,a);break e;case 14:s=cw(null,s,h,di(h.type,n),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:di(h,m),Lg(n,s,h,m,a);case 1:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:di(h,m),fw(n,s,h,m,a);case 3:e:{if(pw(s),n===null)throw Error(t(387));h=s.pendingProps,v=s.memoizedState,m=v.element,R0(n,s),_d(s,h,null,a);var S=s.memoizedState;if(h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){m=Wa(Error(t(423)),s),s=gw(n,s,h,a,m);break e}else if(h!==m){m=Wa(Error(t(424)),s),s=gw(n,s,h,a,m);break e}else for(Mn=sr(s.stateNode.containerInfo.firstChild),Ln=s,st=!0,hi=null,a=k0(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ha(),h===m){s=fs(n,s,a);break e}ln(n,s,h,a)}s=s.child}return s;case 5:return M0(s),n===null&&ag(s),h=s.type,m=s.pendingProps,v=n!==null?n.memoizedProps:null,S=m.children,Jp(h,m)?S=null:v!==null&&Jp(h,v)&&(s.flags|=32),dw(n,s),ln(n,s,S,a),s.child;case 6:return n===null&&ag(s),null;case 13:return mw(n,s,a);case 4:return gg(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Ba(s,null,h,a):ln(n,s,h,a),s.child;case 11:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:di(h,m),lw(n,s,h,m,a);case 7:return ln(n,s,s.pendingProps,a),s.child;case 8:return ln(n,s,s.pendingProps.children,a),s.child;case 12:return ln(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,m=s.pendingProps,v=s.memoizedProps,S=m.value,Je(yd,h._currentValue),h._currentValue=S,v!==null)if(ui(v.value,S)){if(v.children===m.children&&!vn.current){s=fs(n,s,a);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var T=v.dependencies;if(T!==null){S=v.child;for(var P=T.firstContext;P!==null;){if(P.context===h){if(v.tag===1){P=ds(-1,a&-a),P.tag=2;var z=v.updateQueue;if(z!==null){z=z.shared;var G=z.pending;G===null?P.next=P:(P.next=G.next,G.next=P),z.pending=P}}v.lanes|=a,P=v.alternate,P!==null&&(P.lanes|=a),dg(v.return,a,s),T.lanes|=a;break}P=P.next}}else if(v.tag===10)S=v.type===s.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=a,T=S.alternate,T!==null&&(T.lanes|=a),dg(S,a,s),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===s){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}ln(n,s,m.children,a),s=s.child}return s;case 9:return m=s.type,h=s.pendingProps.children,$a(s,a),m=qn(m),h=h(m),s.flags|=1,ln(n,s,h,a),s.child;case 14:return h=s.type,m=di(h,s.pendingProps),m=di(h.type,m),cw(n,s,h,m,a);case 15:return uw(n,s,s.type,s.pendingProps,a);case 17:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:di(h,m),Pd(n,s),s.tag=1,yn(h)?(n=!0,dd(s)):n=!1,$a(s,a),tw(s,h,m),Tg(s,h,m,a),Mg(null,s,h,!0,n,a);case 19:return yw(n,s,a);case 22:return hw(n,s,a)}throw Error(t(156,s.tag))};function Uw(n,s){return _y(n,s)}function hx(n,s,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(n,s,a,h){return new hx(n,s,a,h)}function Jg(n){return n=n.prototype,!(!n||!n.isReactComponent)}function dx(n){if(typeof n=="function")return Jg(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ee)return 11;if(n===we)return 14}return 2}function gr(n,s){var a=n.alternate;return a===null?(a=Qn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Bd(n,s,a,h,m,v){var S=2;if(h=n,typeof n=="function")Jg(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case B:return fo(a.children,m,v,s);case V:S=8,m|=8;break;case Q:return n=Qn(12,a,s,m|2),n.elementType=Q,n.lanes=v,n;case fe:return n=Qn(13,a,s,m),n.elementType=fe,n.lanes=v,n;case he:return n=Qn(19,a,s,m),n.elementType=he,n.lanes=v,n;case K:return Ud(a,m,v,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ne:S=10;break e;case te:S=9;break e;case Ee:S=11;break e;case we:S=14;break e;case ge:S=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Qn(S,a,s,m),s.elementType=n,s.type=h,s.lanes=v,s}function fo(n,s,a,h){return n=Qn(7,n,h,s),n.lanes=a,n}function Ud(n,s,a,h){return n=Qn(22,n,h,s),n.elementType=K,n.lanes=a,n.stateNode={isHidden:!1},n}function Zg(n,s,a){return n=Qn(6,n,null,s),n.lanes=a,n}function em(n,s,a){return s=Qn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function fx(n,s,a,h,m){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kp(0),this.expirationTimes=kp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kp(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function tm(n,s,a,h,m,v,S,T,P){return n=new fx(n,s,a,T,P),s===1?(s=1,v===!0&&(s|=8)):s=0,v=Qn(3,null,null,s),n.current=v,v.stateNode=n,v.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},pg(v),n}function px(n,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:h==null?null:""+h,children:n,containerInfo:s,implementation:a}}function $w(n){if(!n)return or;n=n._reactInternals;e:{if(eo(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(yn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(yn(a))return v0(n,a,s)}return s}function Vw(n,s,a,h,m,v,S,T,P){return n=tm(a,h,!0,n,m,v,S,T,P),n.context=$w(null),a=n.current,h=cn(),m=fr(a),v=ds(h,m),v.callback=s??null,cr(a,v,m),n.current.lanes=m,mc(n,m,h),_n(n,h),n}function $d(n,s,a,h){var m=s.current,v=cn(),S=fr(m);return a=$w(a),s.context===null?s.context=a:s.pendingContext=a,s=ds(v,S),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=cr(m,s,S),n!==null&&(gi(n,m,S,v),Ad(n,m,S)),S}function Vd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ww(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function nm(n,s){Ww(n,s),(n=n.alternate)&&Ww(n,s)}function gx(){return null}var Gw=typeof reportError=="function"?reportError:function(n){console.error(n)};function im(n){this._internalRoot=n}Wd.prototype.render=im.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));$d(n,s,null,null)},Wd.prototype.unmount=im.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;co(function(){$d(null,n,null,null)}),s[as]=null}};function Wd(n){this._internalRoot=n}Wd.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ry();n={blockedOn:null,target:n,priority:s};for(var a=0;a<tr.length&&s!==0&&s<tr[a].priority;a++);tr.splice(a,0,n),a===0&&My(n)}};function sm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Gd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Xw(){}function mx(n,s,a,h,m){if(m){if(typeof h=="function"){var v=h;h=function(){var z=Vd(S);v.call(z)}}var S=Vw(s,h,n,0,null,!1,!1,"",Xw);return n._reactRootContainer=S,n[as]=S.current,Pc(n.nodeType===8?n.parentNode:n),co(),S}for(;m=n.lastChild;)n.removeChild(m);if(typeof h=="function"){var T=h;h=function(){var z=Vd(P);T.call(z)}}var P=tm(n,0,!1,null,null,!1,!1,"",Xw);return n._reactRootContainer=P,n[as]=P.current,Pc(n.nodeType===8?n.parentNode:n),co(function(){$d(s,P,a,h)}),P}function Xd(n,s,a,h,m){var v=a._reactRootContainer;if(v){var S=v;if(typeof m=="function"){var T=m;m=function(){var P=Vd(S);T.call(P)}}$d(s,S,n,m)}else S=mx(a,s,n,m,h);return Vd(S)}ky=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=gc(s.pendingLanes);a!==0&&(Tp(s,a|1),_n(s,mt()),(He&6)===0&&(qa=mt()+500,ar()))}break;case 13:co(function(){var h=hs(n,1);if(h!==null){var m=cn();gi(h,n,1,m)}}),nm(n,1)}},Rp=function(n){if(n.tag===13){var s=hs(n,134217728);if(s!==null){var a=cn();gi(s,n,134217728,a)}nm(n,134217728)}},Ty=function(n){if(n.tag===13){var s=fr(n),a=hs(n,s);if(a!==null){var h=cn();gi(a,n,s,h)}nm(n,s)}},Ry=function(){return We},Py=function(n,s){var a=We;try{return We=n,s()}finally{We=a}},_p=function(n,s,a){switch(s){case"input":if(Ii(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==n&&h.form===n.form){var m=ud(h);if(!m)throw Error(t(90));Ks(h),Ii(h,m)}}}break;case"textarea":jh(n,a);break;case"select":s=a.value,s!=null&&li(n,!!a.multiple,s,!1)}},py=Yg,gy=co;var vx={usingClientEntryPoint:!1,Events:[Ic,Fa,ud,dy,fy,Yg]},Xc={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yx={bundleType:Xc.bundleType,version:Xc.version,rendererPackageName:Xc.rendererPackageName,rendererConfig:Xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=wy(n),n===null?null:n.stateNode},findFiberByHostInstance:Xc.findFiberByHostInstance||gx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qd.isDisabled&&qd.supportsFiber)try{Wh=qd.inject(yx),Fi=qd}catch{}}return Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vx,Sn.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sm(s))throw Error(t(200));return px(n,s,null,a)},Sn.createRoot=function(n,s){if(!sm(n))throw Error(t(299));var a=!1,h="",m=Gw;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=tm(n,1,!1,null,null,a,!1,h,m),n[as]=s.current,Pc(n.nodeType===8?n.parentNode:n),new im(s)},Sn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=wy(s),n=n===null?null:n.stateNode,n},Sn.flushSync=function(n){return co(n)},Sn.hydrate=function(n,s,a){if(!Gd(s))throw Error(t(200));return Xd(null,n,s,!0,a)},Sn.hydrateRoot=function(n,s,a){if(!sm(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,m=!1,v="",S=Gw;if(a!=null&&(a.unstable_strictMode===!0&&(m=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(S=a.onRecoverableError)),s=Vw(s,null,n,1,a??null,m,!1,v,S),n[as]=s.current,Pc(n),h)for(n=0;n<h.length;n++)a=h[n],m=a._getVersion,m=m(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,m]:s.mutableSourceEagerHydrationData.push(a,m);return new Wd(s)},Sn.render=function(n,s,a){if(!Gd(s))throw Error(t(200));return Xd(null,n,s,!1,a)},Sn.unmountComponentAtNode=function(n){if(!Gd(n))throw Error(t(40));return n._reactRootContainer?(co(function(){Xd(null,null,n,!1,function(){n._reactRootContainer=null,n[as]=null})}),!0):!1},Sn.unstable_batchedUpdates=Yg,Sn.unstable_renderSubtreeIntoContainer=function(n,s,a,h){if(!Gd(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Xd(n,s,a,!1,h)},Sn.version="18.3.1-next-f1338f8080-20240426",Sn}var nA;function Rx(){if(nA)return lm.exports;nA=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(e){console.error(e)}}return d(),lm.exports=Tx(),lm.exports}var iA;function Px(){if(iA)return Yd;iA=1;var d=Rx();return Yd.createRoot=d.createRoot,Yd.hydrateRoot=d.hydrateRoot,Yd}var Lx=Px();const Mx=np(Lx),Ix="modulepreload",Dx=function(d){return"/rayo-project-blog/"+d},sA={},Kd=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let c=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=c(t.map(p=>{if(p=Dx(p),p in sA)return;sA[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":Ix,g||(w.as="script"),w.crossOrigin="",w.href=p,f&&w.setAttribute("nonce",f),document.head.appendChild(w),g)return new Promise((A,b)=>{w.addEventListener("load",A),w.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return r.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};var pu={};pu.d=(d,e)=>{for(var t in e)pu.o(e,t)&&!pu.o(d,t)&&Object.defineProperty(d,t,{enumerable:!0,get:e[t]})};pu.o=(d,e)=>Object.prototype.hasOwnProperty.call(d,e);var Te=globalThis.pdfjsLib={};pu.d(Te,{AbortException:()=>ba,AnnotationEditorLayer:()=>Lv,AnnotationEditorParamsType:()=>Ce,AnnotationEditorType:()=>Pe,AnnotationEditorUIManager:()=>ya,AnnotationLayer:()=>MC,AnnotationMode:()=>wr,ColorPicker:()=>Of,DOMSVGFactory:()=>ty,DrawLayer:()=>Fv,FeatureTest:()=>pn,GlobalWorkerOptions:()=>Vs,ImageKind:()=>sf,InvalidPDFException:()=>UA,MissingPDFException:()=>Ea,OPS:()=>vi,OutputScale:()=>bm,PDFDataRangeTransport:()=>z_,PDFDateString:()=>qv,PDFWorker:()=>ol,PasswordResponses:()=>zx,PermissionFlag:()=>Ox,PixelsPerInch:()=>Xr,RenderingCancelledException:()=>Gv,TextLayer:()=>Jm,UnexpectedResponseException:()=>op,Util:()=>pe,VerbosityLevel:()=>ip,XfaLayer:()=>H_,build:()=>dC,createValidAbsoluteUrl:()=>Ux,fetchData:()=>lp,getDocument:()=>iC,getFilenameFromUrl:()=>Qx,getPdfFilenameFromUrl:()=>Jx,getXfaPageViewport:()=>Zx,isDataScheme:()=>cp,isPdfFile:()=>Xv,noContextMenu:()=>ai,normalizeUnicode:()=>qx,setLayerDimensions:()=>va,shadow:()=>je,version:()=>hC});const an=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),BA=[1,0,0,1,0,0],Am=[.001,0,0,.001,0,0],Fx=1e7,hm=1.35,$n={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},wr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Nx="pdfjs_internal_editor_",Pe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ce={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Ox={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Zt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},sf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},kt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Yc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ip={ERRORS:0,WARNINGS:1,INFOS:5},vi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},zx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let sp=ip.WARNINGS;function jx(d){Number.isInteger(d)&&(sp=d)}function Hx(){return sp}function rp(d){sp>=ip.INFOS&&console.log(`Info: ${d}`)}function Ie(d){sp>=ip.WARNINGS&&console.log(`Warning: ${d}`)}function nt(d){throw new Error(d)}function Lt(d,e){d||nt(e)}function Bx(d){switch(d==null?void 0:d.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ux(d,e=null,t=null){if(!d)return null;try{if(t&&typeof d=="string"){if(t.addDefaultProtocol&&d.startsWith("www.")){const r=d.match(/\./g);(r==null?void 0:r.length)>=2&&(d=`http://${d}`)}if(t.tryConvertEncoding)try{d=Xx(d)}catch{}}const i=e?new URL(d,e):new URL(d);if(Bx(i))return i}catch{}return null}function je(d,e,t,i=!1){return Object.defineProperty(d,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Qr=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class _m extends Qr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Sm extends Qr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class UA extends Qr{constructor(e){super(e,"InvalidPDFException")}}class Ea extends Qr{constructor(e){super(e,"MissingPDFException")}}class op extends Qr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class $x extends Qr{constructor(e){super(e,"FormatError")}}class ba extends Qr{constructor(e){super(e,"AbortException")}}function $A(d){(typeof d!="object"||(d==null?void 0:d.length)===void 0)&&nt("Invalid argument for bytesToString");const e=d.length,t=8192;if(e<t)return String.fromCharCode.apply(null,d);const i=[];for(let r=0;r<e;r+=t){const o=Math.min(r+t,e),c=d.subarray(r,o);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function ap(d){typeof d!="string"&&nt("Invalid argument for stringToBytes");const e=d.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=d.charCodeAt(i)&255;return t}function Vx(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function Vv(d){const e=Object.create(null);for(const[t,i]of d)e[t]=i;return e}function Wx(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function Gx(){try{return new Function(""),!0}catch{return!1}}class pn{static get isLittleEndian(){return je(this,"isLittleEndian",Wx())}static get isEvalSupported(){return je(this,"isEvalSupported",Gx())}static get isOffscreenCanvasSupported(){return je(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?je(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):je(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return je(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const dm=Array.from(Array(256).keys(),d=>d.toString(16).padStart(2,"0"));var Gs,rf,Em;class pe{static makeHexColor(e,t,i){return`#${dm[e]}${dm[t]}${dm[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,o]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),c=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],o[0],c[0]),Math.min(i[1],r[1],o[1],c[1]),Math.max(i[0],r[0],o[0],c[0]),Math.max(i[1],r[1],o[1],c[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],c=e[2]*t[1]+e[3]*t[3],u=(i+c)/2,f=Math.sqrt((i+c)**2-4*(i*c-o*r))/2,p=u+f||1,g=u-f||1;return[Math.sqrt(p),Math.sqrt(g)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),c=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>c?null:[i,o,r,c]}static bezierBoundingBox(e,t,i,r,o,c,u,f,p){return p?(p[0]=Math.min(p[0],e,u),p[1]=Math.min(p[1],t,f),p[2]=Math.max(p[2],e,u),p[3]=Math.max(p[3],t,f)):p=[Math.min(e,u),Math.min(t,f),Math.max(e,u),Math.max(t,f)],E(this,Gs,Em).call(this,e,i,o,u,t,r,c,f,3*(-e+3*(i-o)+u),6*(e-2*i+o),3*(i-e),p),E(this,Gs,Em).call(this,e,i,o,u,t,r,c,f,3*(-t+3*(r-c)+f),6*(t-2*r+c),3*(r-t),p),p}}Gs=new WeakSet,rf=function(e,t,i,r,o,c,u,f,p,g){if(p<=0||p>=1)return;const y=1-p,w=p*p,A=w*p,b=y*(y*(y*e+3*p*t)+3*w*i)+A*r,C=y*(y*(y*o+3*p*c)+3*w*u)+A*f;g[0]=Math.min(g[0],b),g[1]=Math.min(g[1],C),g[2]=Math.max(g[2],b),g[3]=Math.max(g[3],C)},Em=function(e,t,i,r,o,c,u,f,p,g,y,w){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&E(this,Gs,rf).call(this,e,t,i,r,o,c,u,f,-y/g,w);return}const A=g**2-4*y*p;if(A<0)return;const b=Math.sqrt(A),C=2*p;E(this,Gs,rf).call(this,e,t,i,r,o,c,u,f,(-g+b)/C,w),E(this,Gs,rf).call(this,e,t,i,r,o,c,u,f,(-g-b)/C,w)},x(pe,Gs);function Xx(d){return decodeURIComponent(escape(d))}let fm=null,rA=null;function qx(d){return fm||(fm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,rA=new Map([["ﬅ","ſt"]])),d.replaceAll(fm,(e,t,i)=>t?t.normalize("NFKC"):rA.get(i))}function Yx(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const d=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(d);else for(let e=0;e<32;e++)d[e]=Math.floor(Math.random()*255);return $A(d)}const Wv="pdfjs_internal_id_",gs={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function Kx(d){return Uint8Array.prototype.toBase64?d.toBase64():btoa($A(d))}const vs="http://www.w3.org/2000/svg",wo=class wo{};xe(wo,"CSS",96),xe(wo,"PDF",72),xe(wo,"PDF_TO_CSS_UNITS",wo.CSS/wo.PDF);let Xr=wo;async function lp(d,e="text"){if(Jc(d,document.baseURI)){const t=await fetch(d);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",d,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class Ih{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=o;const u=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let p,g,y,w;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,g=0,y=0,w=1;break;case 90:p=0,g=1,y=1,w=0;break;case 270:p=0,g=-1,y=-1,w=0;break;case 0:p=1,g=0,y=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,w=-w);let A,b,C,R;p===0?(A=Math.abs(f-e[1])*t+r,b=Math.abs(u-e[0])*t+o,C=(e[3]-e[1])*t,R=(e[2]-e[0])*t):(A=Math.abs(u-e[0])*t+r,b=Math.abs(f-e[1])*t+o,C=(e[2]-e[0])*t,R=(e[3]-e[1])*t),this.transform=[p*t,g*t,y*t,w*t,A-p*t*u-y*t*f,b-g*t*u-w*t*f],this.width=C,this.height=R}get rawDims(){const{viewBox:e}=this;return je(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Ih({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:o})}convertToViewportPoint(e,t){return pe.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=pe.applyTransform([e[0],e[1]],this.transform),i=pe.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return pe.applyInverseTransform([e,t],this.transform)}}class Gv extends Qr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function cp(d){const e=d.length;let t=0;for(;t<e&&d[t].trim()==="";)t++;return d.substring(t,t+5).toLowerCase()==="data:"}function Xv(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function Qx(d){return[d]=d.split(/[#?]/,1),d.substring(d.lastIndexOf("/")+1)}function Jx(d,e="document.pdf"){if(typeof d!="string")return e;if(cp(d))return Ie('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(d);let o=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=i.exec(decodeURIComponent(o))[0]}catch{}return o||e}class oA{constructor(){xe(this,"started",Object.create(null));xe(this,"times",[])}time(e){e in this.started&&Ie(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ie(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:o}of this.times)e.push(`${i.padEnd(t)} ${o-r}ms
`);return e.join("")}}function Jc(d,e){try{const{protocol:t}=e?new URL(d,e):new URL(d);return t==="http:"||t==="https:"}catch{return!1}}function ai(d){d.preventDefault()}function aA(d){console.log("Deprecated API usage: "+d)}var yu;class qv{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,yu)||_(this,yu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,yu).exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(t[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let f=parseInt(t[6],10);f=f>=0&&f<=59?f:0;const p=t[7]||"Z";let g=parseInt(t[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(t[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(c+=g,u+=y):p==="+"&&(c-=g,u-=y),new Date(Date.UTC(i,r,o,c,u,f))}}yu=new WeakMap,x(qv,yu);function Zx(d,{scale:e=1,rotation:t=0}){const{width:i,height:r}=d.attributes.style,o=[0,0,parseInt(i),parseInt(r)];return new Ih({viewBox:o,scale:e,rotation:t})}function Yv(d){if(d.startsWith("#")){const e=parseInt(d.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(e=>parseInt(e)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ie(`Not a valid color format: "${d}"`),[0,0,0])}function e1(d){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of d.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;d.set(t,Yv(i))}e.remove()}function ht(d){const{a:e,b:t,c:i,d:r,e:o,f:c}=d.getTransform();return[e,t,i,r,o,c]}function ms(d){const{a:e,b:t,c:i,d:r,e:o,f:c}=d.getTransform().invertSelf();return[e,t,i,r,o,c]}function va(d,e,t=!1,i=!0){if(e instanceof Ih){const{pageWidth:r,pageHeight:o}=e.rawDims,{style:c}=d,u=pn.isCSSRoundSupported,f=`var(--scale-factor) * ${r}px`,p=`var(--scale-factor) * ${o}px`,g=u?`round(down, ${f}, var(--scale-round-x, 1px))`:`calc(${f})`,y=u?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!t||e.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}i&&d.setAttribute("data-main-rotation",e.rotation)}class bm{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Ar,_o,yi,So,wu,Au,jf,VA,gn,WA,GA,of,XA,Cm;const ys=class ys{constructor(e){x(this,gn);x(this,Ar,null);x(this,_o,null);x(this,yi);x(this,So,null);x(this,wu,null);_(this,yi,e),l(ys,Au)||_(ys,Au,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=_(this,Ar,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,yi)._uiManager._signal;e.addEventListener("contextmenu",ai,{signal:t}),e.addEventListener("pointerdown",E(ys,jf,VA),{signal:t});const i=_(this,So,document.createElement("div"));i.className="buttons",e.append(i);const r=l(this,yi).toolbarPosition;if(r){const{style:o}=e,c=l(this,yi)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return E(this,gn,XA).call(this),e}get div(){return l(this,Ar)}hide(){var e;l(this,Ar).classList.add("hidden"),(e=l(this,_o))==null||e.hideDropdown()}show(){var e;l(this,Ar).classList.remove("hidden"),(e=l(this,wu))==null||e.shown()}async addAltText(e){const t=await e.render();E(this,gn,of).call(this,t),l(this,So).prepend(t,l(this,gn,Cm)),_(this,wu,e)}addColorPicker(e){_(this,_o,e);const t=e.renderButton();E(this,gn,of).call(this,t),l(this,So).prepend(t,l(this,gn,Cm))}remove(){var e;l(this,Ar).remove(),(e=l(this,_o))==null||e.destroy(),_(this,_o,null)}};Ar=new WeakMap,_o=new WeakMap,yi=new WeakMap,So=new WeakMap,wu=new WeakMap,Au=new WeakMap,jf=new WeakSet,VA=function(e){e.stopPropagation()},gn=new WeakSet,WA=function(e){l(this,yi)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},GA=function(e){l(this,yi)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},of=function(e){const t=l(this,yi)._uiManager._signal;e.addEventListener("focusin",E(this,gn,WA).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",E(this,gn,GA).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ai,{signal:t})},XA=function(){const{editorType:e,_uiManager:t}=l(this,yi),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",l(ys,Au)[e]),E(this,gn,of).call(this,i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),l(this,So).append(i)},Cm=function(){const e=document.createElement("div");return e.className="divider",e},x(ys,jf),x(ys,Au,null);let xm=ys;var _u,Eo,bo,Yr,qA,YA,KA;class t1{constructor(e){x(this,Yr);x(this,_u,null);x(this,Eo,null);x(this,bo);_(this,bo,e)}show(e,t,i){const[r,o]=E(this,Yr,YA).call(this,t,i),{style:c}=l(this,Eo)||_(this,Eo,E(this,Yr,qA).call(this));e.append(l(this,Eo)),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Eo).remove()}}_u=new WeakMap,Eo=new WeakMap,bo=new WeakMap,Yr=new WeakSet,qA=function(){const e=_(this,Eo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ai,{signal:l(this,bo)._signal});const t=_(this,_u,document.createElement("div"));return t.className="buttons",e.append(t),E(this,Yr,KA).call(this),e},YA=function(e,t){let i=0,r=0;for(const o of e){const c=o.y+o.height;if(c<i)continue;const u=o.x+(t?o.width:0);if(c>i){r=u,i=c;continue}t?u>r&&(r=u):u<r&&(r=u)}return[t?1-r:r,i]},KA=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=l(this,bo)._signal;e.addEventListener("contextmenu",ai,{signal:i}),e.addEventListener("click",()=>{l(this,bo).highlightSelection("floating_button")},{signal:i}),l(this,_u).append(e)};function Df(d,e,t){for(const i of t)e.addEventListener(i,d[i].bind(d))}function n1(d){return Math.round(Math.min(255,Math.max(1,255*d))).toString(16).padStart(2,"0")}var Hf;class i1{constructor(){x(this,Hf,0)}get id(){return`${Nx}${un(this,Hf)._++}`}}Hf=new WeakMap;var cl,Su,tn,ul,af;const oy=class oy{constructor(){x(this,ul);x(this,cl,Yx());x(this,Su,0);x(this,tn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const o=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return je(this,"_isSVGFittingCanvas",o)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:o}=e;return E(this,ul,af).call(this,`${t}_${i}_${r}_${o}`,e)}async getFromUrl(e){return E(this,ul,af).call(this,e,e)}async getFromBlob(e,t){const i=await t;return E(this,ul,af).call(this,e,i)}async getFromId(e){l(this,tn)||_(this,tn,new Map);const t=l(this,tn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,tn)||_(this,tn,new Map);let i=l(this,tn).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${l(this,cl)}_${un(this,Su)._++}`,refCounter:1,isSvg:!1},l(this,tn).set(e,i),l(this,tn).set(i.id,i),i}getSvgUrl(e){const t=l(this,tn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;l(this,tn)||_(this,tn,new Map);const t=l(this,tn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const o=new OffscreenCanvas(i.width,i.height);o.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=o.convertToBlob()}(r=i.close)==null||r.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,cl)}_`)}};cl=new WeakMap,Su=new WeakMap,tn=new WeakMap,ul=new WeakSet,af=async function(e,t){l(this,tn)||_(this,tn,new Map);let i=l(this,tn).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${l(this,cl)}_${un(this,Su)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await lp(t,"blob")):t instanceof File?r=i.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const o=oy._isSVGFittingCanvas,c=new FileReader,u=new Image,f=new Promise((p,g)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,p()},c.onload=async()=>{const y=i.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=g});c.readAsDataURL(r),await f}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){console.error(r),i=null}return l(this,tn).set(e,i),i&&l(this,tn).set(i.id,i),i};let km=oy;var Ot,_r,Eu,zt;class s1{constructor(e=128){x(this,Ot,[]);x(this,_r,!1);x(this,Eu);x(this,zt,-1);_(this,Eu,e)}add({cmd:e,undo:t,post:i,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&e(),l(this,_r))return;const f={cmd:e,undo:t,post:i,type:o};if(l(this,zt)===-1){l(this,Ot).length>0&&(l(this,Ot).length=0),_(this,zt,0),l(this,Ot).push(f);return}if(c&&l(this,Ot)[l(this,zt)].type===o){u&&(f.undo=l(this,Ot)[l(this,zt)].undo),l(this,Ot)[l(this,zt)]=f;return}const p=l(this,zt)+1;p===l(this,Eu)?l(this,Ot).splice(0,1):(_(this,zt,p),p<l(this,Ot).length&&l(this,Ot).splice(p)),l(this,Ot).push(f)}undo(){if(l(this,zt)===-1)return;_(this,_r,!0);const{undo:e,post:t}=l(this,Ot)[l(this,zt)];e(),t==null||t(),_(this,_r,!1),_(this,zt,l(this,zt)-1)}redo(){if(l(this,zt)<l(this,Ot).length-1){_(this,zt,l(this,zt)+1),_(this,_r,!0);const{cmd:e,post:t}=l(this,Ot)[l(this,zt)];e(),t==null||t(),_(this,_r,!1)}}hasSomethingToUndo(){return l(this,zt)!==-1}hasSomethingToRedo(){return l(this,zt)<l(this,Ot).length-1}destroy(){_(this,Ot,null)}}Ot=new WeakMap,_r=new WeakMap,Eu=new WeakMap,zt=new WeakMap;var Bf,QA;class Dh{constructor(e){x(this,Bf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=pn.platform;for(const[i,r,o={}]of e)for(const c of i){const u=c.startsWith("mac+");t&&u?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!t&&!u&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(E(this,Bf,QA).call(this,t));if(!i)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:u=null}}=i;u&&!u(e,t)||(r.bind(e,...c,t)(),o||(t.stopPropagation(),t.preventDefault()))}}Bf=new WeakSet,QA=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Uf=class Uf{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return e1(e),je(this,"_colors",e)}convert(e){const t=Yv(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((o,c)=>o===t[c]))return Uf._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?pe.makeHexColor(...t):e}};xe(Uf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Tm=Uf;var hl,Fn,Tt,Wt,dl,As,fl,wi,Sr,pl,xo,Bi,Ai,Co,bu,xu,gl,Cu,Ui,Er,ml,br,$i,$f,xr,ku,Cr,ko,Tu,Ru,jt,Ge,_s,To,Pu,Lu,kr,Vi,Ss,Mu,Zn,ee,lf,Rm,JA,ZA,cf,e_,t_,n_,Pm,i_,Lm,Mm,s_,hn,vr,r_,o_,Im,a_,Zc,Dm;const sl=class sl{constructor(e,t,i,r,o,c,u,f,p,g,y){x(this,ee);x(this,hl,new AbortController);x(this,Fn,null);x(this,Tt,new Map);x(this,Wt,new Map);x(this,dl,null);x(this,As,null);x(this,fl,null);x(this,wi,new s1);x(this,Sr,null);x(this,pl,0);x(this,xo,new Set);x(this,Bi,null);x(this,Ai,null);x(this,Co,new Set);x(this,bu,!1);x(this,xu,!1);x(this,gl,!1);x(this,Cu,null);x(this,Ui,null);x(this,Er,null);x(this,ml,null);x(this,br,!1);x(this,$i,null);x(this,$f,new i1);x(this,xr,!1);x(this,ku,!1);x(this,Cr,null);x(this,ko,null);x(this,Tu,null);x(this,Ru,null);x(this,jt,Pe.NONE);x(this,Ge,new Set);x(this,_s,null);x(this,To,null);x(this,Pu,null);x(this,Lu,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,kr,[0,0]);x(this,Vi,null);x(this,Ss,null);x(this,Mu,null);x(this,Zn,null);const w=this._signal=l(this,hl).signal;_(this,Ss,e),_(this,Mu,t),_(this,dl,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:w}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),r._on("setpreference",this.onSetPreference.bind(this),{signal:w}),r._on("switchannotationeditorparams",A=>this.updateParams(A.type,A.value),{signal:w}),E(this,ee,e_).call(this),E(this,ee,s_).call(this),E(this,ee,Pm).call(this),_(this,As,o.annotationStorage),_(this,Cu,o.filterFactory),_(this,To,c),_(this,ml,u||null),_(this,bu,f),_(this,xu,p),_(this,gl,g),_(this,Ru,y||null),this.viewParameters={realScale:Xr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=sl.prototype,t=c=>l(c,Ss).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:f}=u;return f!=="text"&&f!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return je(this,"_keyboardManager",new Dh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&l(c,Ss).contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&l(c,Ss).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){var e,t,i,r;(e=l(this,Zn))==null||e.resolve(),_(this,Zn,null),(t=l(this,hl))==null||t.abort(),_(this,hl,null),this._signal=null;for(const o of l(this,Wt).values())o.destroy();l(this,Wt).clear(),l(this,Tt).clear(),l(this,Co).clear(),_(this,Fn,null),l(this,Ge).clear(),l(this,wi).destroy(),(i=l(this,dl))==null||i.destroy(),(r=l(this,$i))==null||r.hide(),_(this,$i,null),l(this,Ui)&&(clearTimeout(l(this,Ui)),_(this,Ui,null)),l(this,Vi)&&(clearTimeout(l(this,Vi)),_(this,Vi,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Ru)}get useNewAltTextFlow(){return l(this,xu)}get useNewAltTextWhenAddingImage(){return l(this,gl)}get hcmFilter(){return je(this,"hcmFilter",l(this,To)?l(this,Cu).addHCMFilter(l(this,To).foreground,l(this,To).background):"none")}get direction(){return je(this,"direction",getComputedStyle(l(this,Ss)).direction)}get highlightColors(){return je(this,"highlightColors",l(this,ml)?new Map(l(this,ml).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return je(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){_(this,Tu,e)}editAltText(e,t=!1){var i;(i=l(this,dl))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":_(this,gl,t);break}}onPageChanging({pageNumber:e}){_(this,pl,e-1)}focusMainContainer(){l(this,Ss).focus()}findParent(e,t){for(const i of l(this,Wt).values()){const{x:r,y:o,width:c,height:u}=i.div.getBoundingClientRect();if(e>=r&&e<=r+c&&t>=o&&t<=o+u)return i}return null}disableUserSelect(e=!1){l(this,Mu).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Co).add(e)}removeShouldRescale(e){l(this,Co).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Xr.PDF_TO_CSS_UNITS;for(const t of l(this,Co))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:c}=t,u=t.toString(),p=E(this,ee,lf).call(this,t).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;t.empty();const y=E(this,ee,Rm).call(this,p),w=l(this,jt)===Pe.NONE,A=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:c,text:u}),w&&this.showAllEditors("highlight",!0,!0)};if(w){this.switchToMode(Pe.HIGHLIGHT,A);return}A()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,As)&&!l(this,As).has(e.id)&&l(this,As).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,br)&&(_(this,br,!1),E(this,ee,cf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,Ge))if(t.div.contains(e)){_(this,ko,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,ko))return;const[e,t]=l(this,ko);_(this,ko,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){E(this,ee,Pm).call(this),E(this,ee,Lm).call(this)}removeEditListeners(){E(this,ee,i_).call(this),E(this,ee,Mm).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of l(this,Ai))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of l(this,Ai))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=l(this,Fn))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of l(this,Ge)){const o=r.serialize(!0);o&&t.push(o)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const c of l(this,Ai))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){Ie(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const f of i){const p=await r.deserialize(f);if(!p)return;o.push(p)}const c=()=>{for(const f of o)E(this,ee,Im).call(this,f);E(this,ee,Dm).call(this,o)},u=()=>{for(const f of o)f.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){Ie(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,jt)!==Pe.NONE&&!this.isEditorHandlingKeyboard&&sl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,br)&&(_(this,br,!1),E(this,ee,cf).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(E(this,ee,t_).call(this),E(this,ee,Lm).call(this),E(this,ee,hn).call(this,{isEditing:l(this,jt)!==Pe.NONE,isEmpty:E(this,ee,Zc).call(this),hasSomethingToUndo:l(this,wi).hasSomethingToUndo(),hasSomethingToRedo:l(this,wi).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,ee,n_).call(this),E(this,ee,Mm).call(this),E(this,ee,hn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Ai)){_(this,Ai,e);for(const t of l(this,Ai))E(this,ee,vr).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,$f).id}get currentLayer(){return l(this,Wt).get(l(this,pl))}getLayer(e){return l(this,Wt).get(e)}get currentPageIndex(){return l(this,pl)}addLayer(e){l(this,Wt).set(e.pageIndex,e),l(this,xr)?e.enable():e.disable()}removeLayer(e){l(this,Wt).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(l(this,jt)!==e&&!(l(this,Zn)&&(await l(this,Zn).promise,!l(this,Zn)))){if(_(this,Zn,Promise.withResolvers()),_(this,jt,e),e===Pe.NONE){this.setEditingState(!1),E(this,ee,o_).call(this),l(this,Zn).resolve();return}this.setEditingState(!0),await E(this,ee,r_).call(this),this.unselectAll();for(const r of l(this,Wt).values())r.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),l(this,Zn).resolve();return}for(const r of l(this,Tt).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();l(this,Zn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,jt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(l(this,Ai)){switch(e){case Ce.CREATE:this.currentLayer.addNewEditor();return;case Ce.HIGHLIGHT_DEFAULT_COLOR:(i=l(this,Tu))==null||i.updateColor(t);break;case Ce.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Pu)||_(this,Pu,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of l(this,Ge))r.updateParams(e,t);for(const r of l(this,Ai))r.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var o;for(const c of l(this,Tt).values())c.editorType===e&&c.show(t);(((o=l(this,Pu))==null?void 0:o.get(Ce.HIGHLIGHT_SHOW_ALL))??!0)!==t&&E(this,ee,vr).call(this,[[Ce.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,ku)!==e){_(this,ku,e);for(const t of l(this,Wt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of l(this,Tt).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return l(this,Tt).get(e)}addEditor(e){l(this,Tt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,Ui)&&clearTimeout(l(this,Ui)),_(this,Ui,setTimeout(()=>{this.focusMainContainer(),_(this,Ui,null)},0))),l(this,Tt).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,xo).has(e.annotationElementId))&&((t=l(this,As))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,xo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,xo).has(e)}removeDeletedAnnotationElement(e){l(this,xo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Fn)!==e&&(_(this,Fn,e),e&&E(this,ee,vr).call(this,e.propertiesToUpdate))}updateUI(e){l(this,ee,a_)===e&&E(this,ee,vr).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,Ge).has(e)){l(this,Ge).delete(e),e.unselect(),E(this,ee,hn).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Ge).add(e),e.select(),E(this,ee,vr).call(this,e.propertiesToUpdate),E(this,ee,hn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,Ge))t!==e&&t.unselect();l(this,Ge).clear(),l(this,Ge).add(e),e.select(),E(this,ee,vr).call(this,e.propertiesToUpdate),E(this,ee,hn).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,Ge).has(e)}get firstSelectedEditor(){return l(this,Ge).values().next().value}unselect(e){e.unselect(),l(this,Ge).delete(e),E(this,ee,hn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Ge).size!==0}get isEnterHandled(){return l(this,Ge).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,wi).undo(),E(this,ee,hn).call(this,{hasSomethingToUndo:l(this,wi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,ee,Zc).call(this)})}redo(){l(this,wi).redo(),E(this,ee,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,wi).hasSomethingToRedo(),isEmpty:E(this,ee,Zc).call(this)})}addCommands(e){l(this,wi).add(e),E(this,ee,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,ee,Zc).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,Ge)],t=()=>{for(const r of e)r.remove()},i=()=>{for(const r of e)E(this,ee,Im).call(this,r)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=l(this,Fn))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,Fn)||this.hasSelection}selectAll(){for(const e of l(this,Ge))e.commit();E(this,ee,Dm).call(this,l(this,Tt).values())}unselectAll(){if(!(l(this,Fn)&&(l(this,Fn).commitOrRemove(),l(this,jt)!==Pe.NONE))&&this.hasSelection){for(const e of l(this,Ge))e.unselect();l(this,Ge).clear(),E(this,ee,hn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;l(this,kr)[0]+=e,l(this,kr)[1]+=t;const[r,o]=l(this,kr),c=[...l(this,Ge)],u=1e3;l(this,Vi)&&clearTimeout(l(this,Vi)),_(this,Vi,setTimeout(()=>{_(this,Vi,null),l(this,kr)[0]=l(this,kr)[1]=0,this.addCommands({cmd:()=>{for(const f of c)l(this,Tt).has(f.id)&&f.translateInPage(r,o)},undo:()=>{for(const f of c)l(this,Tt).has(f.id)&&f.translateInPage(-r,-o)},mustExec:!1})},u));for(const f of c)f.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),_(this,Bi,new Map);for(const e of l(this,Ge))l(this,Bi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Bi))return!1;this.disableUserSelect(!1);const e=l(this,Bi);_(this,Bi,null);let t=!1;for(const[{x:r,y:o,pageIndex:c},u]of e)u.newX=r,u.newY=o,u.newPageIndex=c,t||(t=r!==u.savedX||o!==u.savedY||c!==u.savedPageIndex);if(!t)return!1;const i=(r,o,c,u)=>{if(l(this,Tt).has(r.id)){const f=l(this,Wt).get(u);f?r._setParentAndPosition(f,o,c):(r.pageIndex=u,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:u}]of e)i(r,o,c,u)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:u}]of e)i(r,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Bi))for(const i of l(this,Bi).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,Ge).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Fn)===e}getActive(){return l(this,Fn)}getMode(){return l(this,jt)}get imageManager(){return je(this,"imageManager",new km)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,g=t.rangeCount;p<g;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:r,width:o,height:c}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(p,g,y,w)=>({x:(g-r)/c,y:1-(p+y-i)/o,width:w/c,height:y/o});break;case"180":u=(p,g,y,w)=>({x:1-(p+y-i)/o,y:1-(g+w-r)/c,width:y/o,height:w/c});break;case"270":u=(p,g,y,w)=>({x:1-(g+w-r)/c,y:(p-i)/o,width:w/c,height:y/o});break;default:u=(p,g,y,w)=>({x:(p-i)/o,y:(g-r)/c,width:y/o,height:w/c});break}const f=[];for(let p=0,g=t.rangeCount;p<g;p++){const y=t.getRangeAt(p);if(!y.collapsed)for(const{x:w,y:A,width:b,height:C}of y.getClientRects())b===0||C===0||f.push(u(w,A,b,C))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,fl)||_(this,fl,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,fl))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=l(this,fl))==null?void 0:r.get(e.data.id);if(!t)return;const i=l(this,As).getRawValue(t);i&&(l(this,jt)===Pe.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};hl=new WeakMap,Fn=new WeakMap,Tt=new WeakMap,Wt=new WeakMap,dl=new WeakMap,As=new WeakMap,fl=new WeakMap,wi=new WeakMap,Sr=new WeakMap,pl=new WeakMap,xo=new WeakMap,Bi=new WeakMap,Ai=new WeakMap,Co=new WeakMap,bu=new WeakMap,xu=new WeakMap,gl=new WeakMap,Cu=new WeakMap,Ui=new WeakMap,Er=new WeakMap,ml=new WeakMap,br=new WeakMap,$i=new WeakMap,$f=new WeakMap,xr=new WeakMap,ku=new WeakMap,Cr=new WeakMap,ko=new WeakMap,Tu=new WeakMap,Ru=new WeakMap,jt=new WeakMap,Ge=new WeakMap,_s=new WeakMap,To=new WeakMap,Pu=new WeakMap,Lu=new WeakMap,kr=new WeakMap,Vi=new WeakMap,Ss=new WeakMap,Mu=new WeakMap,Zn=new WeakMap,ee=new WeakSet,lf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Rm=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of l(this,Wt).values())if(i.hasTextLayer(e))return i;return null},JA=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=E(this,ee,lf).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(l(this,$i)||_(this,$i,new t1(this)),l(this,$i).show(i,r,this.direction==="ltr"))},ZA=function(){var o,c,u;const e=document.getSelection();if(!e||e.isCollapsed){l(this,_s)&&((o=l(this,$i))==null||o.hide(),_(this,_s,null),E(this,ee,hn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,_s))return;const r=E(this,ee,lf).call(this,e).closest(".textLayer");if(!r){l(this,_s)&&((c=l(this,$i))==null||c.hide(),_(this,_s,null),E(this,ee,hn).call(this,{hasSelectedText:!1}));return}if((u=l(this,$i))==null||u.hide(),_(this,_s,t),E(this,ee,hn).call(this,{hasSelectedText:!0}),!(l(this,jt)!==Pe.HIGHLIGHT&&l(this,jt)!==Pe.NONE)&&(l(this,jt)===Pe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),_(this,br,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=l(this,jt)===Pe.HIGHLIGHT?E(this,ee,Rm).call(this,r):null;f==null||f.toggleDrawing();const p=new AbortController,g=this.combinedSignal(p),y=w=>{w.type==="pointerup"&&w.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),w.type==="pointerup"&&E(this,ee,cf).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("blur",y,{signal:g})}},cf=function(e=""){l(this,jt)===Pe.HIGHLIGHT?this.highlightSelection(e):l(this,bu)&&E(this,ee,JA).call(this)},e_=function(){document.addEventListener("selectionchange",E(this,ee,ZA).bind(this),{signal:this._signal})},t_=function(){if(l(this,Er))return;_(this,Er,new AbortController);const e=this.combinedSignal(l(this,Er));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},n_=function(){var e;(e=l(this,Er))==null||e.abort(),_(this,Er,null)},Pm=function(){if(l(this,Cr))return;_(this,Cr,new AbortController);const e=this.combinedSignal(l(this,Cr));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},i_=function(){var e;(e=l(this,Cr))==null||e.abort(),_(this,Cr,null)},Lm=function(){if(l(this,Sr))return;_(this,Sr,new AbortController);const e=this.combinedSignal(l(this,Sr));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Mm=function(){var e;(e=l(this,Sr))==null||e.abort(),_(this,Sr,null)},s_=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},hn=function(e){Object.entries(e).some(([i,r])=>l(this,Lu)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Lu),e)}),l(this,jt)===Pe.HIGHLIGHT&&e.hasSelectedEditor===!1&&E(this,ee,vr).call(this,[[Ce.HIGHLIGHT_FREE,!0]]))},vr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},r_=async function(){if(!l(this,xr)){_(this,xr,!0);const e=[];for(const t of l(this,Wt).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Tt).values())t.enable()}},o_=function(){if(this.unselectAll(),l(this,xr)){_(this,xr,!1);for(const e of l(this,Wt).values())e.disable();for(const e of l(this,Tt).values())e.disable()}},Im=function(e){const t=l(this,Wt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},a_=function(){let e=null;for(e of l(this,Ge));return e},Zc=function(){if(l(this,Tt).size===0)return!0;if(l(this,Tt).size===1)for(const e of l(this,Tt).values())return e.isEmpty();return!1},Dm=function(e){for(const t of l(this,Ge))t.unselect();l(this,Ge).clear();for(const t of e)t.isEmpty()||(l(this,Ge).add(t),t.select());E(this,ee,hn).call(this,{hasSelectedEditor:this.hasSelection})},xe(sl,"TRANSLATE_SMALL",1),xe(sl,"TRANSLATE_BIG",10);let ya=sl;var Ht,Wi,_i,vl,Gi,Nn,yl,Xi,xn,Es,Ro,qi,Tr,Li,eu,uf;const dn=class dn{constructor(e){x(this,Li);x(this,Ht,null);x(this,Wi,!1);x(this,_i,null);x(this,vl,null);x(this,Gi,null);x(this,Nn,null);x(this,yl,!1);x(this,Xi,null);x(this,xn,null);x(this,Es,null);x(this,Ro,null);x(this,qi,!1);_(this,xn,e),_(this,qi,e._uiManager.useNewAltTextFlow),l(dn,Tr)||_(dn,Tr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){dn._l10n??(dn._l10n=e)}async render(){const e=_(this,_i,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=_(this,vl,document.createElement("span"));e.append(t),l(this,qi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(dn,Tr).missing),t.setAttribute("data-l10n-id",l(dn,Tr)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=l(this,xn)._uiManager._signal;e.addEventListener("contextmenu",ai,{signal:i}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const r=o=>{o.preventDefault(),l(this,xn)._uiManager.editAltText(l(this,xn)),l(this,qi)&&l(this,xn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Li,eu)}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(_(this,yl,!0),r(o))},{signal:i}),await E(this,Li,uf).call(this),e}finish(){l(this,_i)&&(l(this,_i).focus({focusVisible:l(this,yl)}),_(this,yl,!1))}isEmpty(){return l(this,qi)?l(this,Ht)===null:!l(this,Ht)&&!l(this,Wi)}hasData(){return l(this,qi)?l(this,Ht)!==null||!!l(this,Es):this.isEmpty()}get guessedText(){return l(this,Es)}async setGuessedText(e){l(this,Ht)===null&&(_(this,Es,e),_(this,Ro,await dn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),E(this,Li,uf).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,qi)||l(this,Ht)){(t=l(this,Xi))==null||t.remove(),_(this,Xi,null);return}if(!l(this,Xi)){const i=_(this,Xi,document.createElement("div"));i.className="noAltTextBadge",l(this,xn).div.append(i)}l(this,Xi).classList.toggle("hidden",!e)}serialize(e){let t=l(this,Ht);return!e&&l(this,Es)===t&&(t=l(this,Ro)),{altText:t,decorative:l(this,Wi),guessedText:l(this,Es),textWithDisclaimer:l(this,Ro)}}get data(){return{altText:l(this,Ht),decorative:l(this,Wi)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:r,cancel:o=!1}){i&&(_(this,Es,i),_(this,Ro,r)),!(l(this,Ht)===e&&l(this,Wi)===t)&&(o||(_(this,Ht,e),_(this,Wi,t)),E(this,Li,uf).call(this))}toggle(e=!1){l(this,_i)&&(!e&&l(this,Nn)&&(clearTimeout(l(this,Nn)),_(this,Nn,null)),l(this,_i).disabled=!e)}shown(){l(this,xn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Li,eu)}})}destroy(){var e,t;(e=l(this,_i))==null||e.remove(),_(this,_i,null),_(this,vl,null),_(this,Gi,null),(t=l(this,Xi))==null||t.remove(),_(this,Xi,null)}};Ht=new WeakMap,Wi=new WeakMap,_i=new WeakMap,vl=new WeakMap,Gi=new WeakMap,Nn=new WeakMap,yl=new WeakMap,Xi=new WeakMap,xn=new WeakMap,Es=new WeakMap,Ro=new WeakMap,qi=new WeakMap,Tr=new WeakMap,Li=new WeakSet,eu=function(){return l(this,Ht)&&"added"||l(this,Ht)===null&&this.guessedText&&"review"||"missing"},uf=async function(){var r,o,c;const e=l(this,_i);if(!e)return;if(l(this,qi)){if(e.classList.toggle("done",!!l(this,Ht)),e.setAttribute("data-l10n-id",l(dn,Tr)[l(this,Li,eu)]),(r=l(this,vl))==null||r.setAttribute("data-l10n-id",l(dn,Tr)[`${l(this,Li,eu)}-label`]),!l(this,Ht)){(o=l(this,Gi))==null||o.remove();return}}else{if(!l(this,Ht)&&!l(this,Wi)){e.classList.remove("done"),(c=l(this,Gi))==null||c.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Gi);if(!t){_(this,Gi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,xn).id}`;const u=100,f=l(this,xn)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(l(this,Nn)),_(this,Nn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{_(this,Nn,setTimeout(()=>{_(this,Nn,null),l(this,Gi).classList.add("show"),l(this,xn)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:f}),e.addEventListener("mouseleave",()=>{var p;l(this,Nn)&&(clearTimeout(l(this,Nn)),_(this,Nn,null)),(p=l(this,Gi))==null||p.classList.remove("show")},{signal:f})}l(this,Wi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,Ht)),t.parentNode||e.append(t);const i=l(this,xn).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},x(dn,Tr,null),xe(dn,"_l10n",null);let Ff=dn;var Po,Si,ct,wl,Lo,Gt,Mo,Rr,Iu,Io,Pr,Du,Do,bs,Yi,Al,_l,ei,Fu,Vf,Me,Fm,Nu,Nm,Om,l_,c_,zm,jm,Hm,u_,Bm,h_,d_,f_,Um,tu;const Ve=class Ve{constructor(e){x(this,Me);x(this,Po,null);x(this,Si,null);x(this,ct,null);x(this,wl,!1);x(this,Lo,!1);x(this,Gt,null);x(this,Mo,null);x(this,Rr,null);x(this,Iu,"");x(this,Io,!1);x(this,Pr,null);x(this,Du,!1);x(this,Do,!1);x(this,bs,!1);x(this,Yi,null);x(this,Al,0);x(this,_l,0);x(this,ei,null);xe(this,"_editToolbar",null);xe(this,"_initialOptions",Object.create(null));xe(this,"_initialData",null);xe(this,"_isVisible",!0);xe(this,"_uiManager",null);xe(this,"_focusEventsAllowed",!0);x(this,Fu,!1);x(this,Vf,Ve._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[o,c];const[u,f]=this.parentDimensions;this.x=e.x/u,this.y=e.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ve.prototype._resizeWithKeyboard,t=ya.TRANSLATE_SMALL,i=ya.TRANSLATE_BIG;return je(this,"_resizerKeyboardManager",new Dh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Ve.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return je(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new r1({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ve._l10n??(Ve._l10n=e),Ve._l10nResizer||(Ve._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ve._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Ve._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){nt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Fu)}set _isDraggable(e){var t;_(this,Fu,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Vf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):E(this,Me,tu).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Io)?_(this,Io,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[o,c]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/o,this.y=(t+r)/c,this.fixAndSetPosition()}translate(e,t){E(this,Me,Fm).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Pr)||_(this,Pr,[this.x,this.y]),E(this,Me,Fm).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Pr)||_(this,Pr,[this.x,this.y]);const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[u,f]=this.getBaseTranslation();o+=u,c+=f,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Pr)&&(l(this,Pr)[0]!==this.x||l(this,Pr)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Ve,r=i/e,o=i/t;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:o,width:c,height:u}=this;if(c*=t,u*=i,r*=t,o*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-c,r)),o=Math.max(0,Math.min(i-u,o));break;case 90:r=Math.max(0,Math.min(t-u,r)),o=Math.min(i,Math.max(c,o));break;case 180:r=Math.min(t,Math.max(c,r)),o=Math.min(i,Math.max(u,o));break;case 270:r=Math.min(t,Math.max(u,r)),o=Math.max(0,Math.min(i-c,o));break}this.x=r/=t,this.y=o/=i;const[f,p]=this.getBaseTranslation();r+=f,o+=p;const{style:g}=this.div;g.left=`${(100*r).toFixed(2)}%`,g.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return E(i=Ve,Nu,Nm).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return E(i=Ve,Nu,Nm).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,l(this,Lo)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),o=!l(this,Lo)&&t.endsWith("%");if(r&&o)return;const[c,u]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/c).toFixed(2)}%`),!l(this,Lo)&&!o&&(e.height=`${(100*parseFloat(t)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,ct))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,Do)?this._editToolbar:(this._editToolbar=new xm(this),this.div.append(this._editToolbar.render()),l(this,ct)&&await this._editToolbar.addAltText(l(this,ct)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,ct))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,ct)||(Ff.initialize(Ve._l10n),_(this,ct,new Ff(this)),l(this,Po)&&(l(this,ct).data=l(this,Po),_(this,Po,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,ct))==null?void 0:e.data}set altTextData(e){l(this,ct)&&(l(this,ct).data=e)}get guessedAltText(){var e;return(e=l(this,ct))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,ct))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,ct))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,ct)&&!l(this,ct).isEmpty()}hasAltTextData(){var e;return((e=l(this,ct))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,wl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),E(this,Me,Bm).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),Df(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(_(this,Io,!0),this._isDraggable){E(this,Me,u_).call(this,e);return}E(this,Me,Hm).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){l(this,Yi)&&clearTimeout(l(this,Yi)),_(this,Yi,setTimeout(()=>{var e;_(this,Yi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[u,f]=this.pageTranslation,p=e/r,g=t/r,y=this.x*o,w=this.y*c,A=this.width*o,b=this.height*c;switch(i){case 0:return[y+p+u,c-w-g-b+f,y+p+A+u,c-w-g+f];case 90:return[y+g+u,c-w+p+f,y+g+b+u,c-w+p+A+f];case 180:return[y-p-A+u,c-w+g+f,y-p+u,c-w+g+b+f];case 270:return[y-g-b+u,c-w-p-A+f,y-g+u,c-w-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,o,c]=e,u=o-i,f=c-r;switch(this.rotation){case 0:return[i,t-c,u,f];case 90:return[i,t-r,f,u];case 180:return[o,t-r,u,f];case 270:return[o,t-c,f,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_(this,Do,!0)}disableEditMode(){_(this,Do,!1)}isInEditMode(){return l(this,Do)}shouldGetKeyboardEvents(){return l(this,bs)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){E(this,Me,Bm).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){nt("An editor must be serializable")}static async deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,_(r,Po,e.accessibilityData);const[o,c]=r.pageDimensions,[u,f,p,g]=r.getRectInCurrentCoords(e.rect,c);return r.x=u/o,r.y=f/c,r.width=p/o,r.height=g/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=l(this,Rr))==null||e.abort(),_(this,Rr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Yi)&&(clearTimeout(l(this,Yi)),_(this,Yi,null)),E(this,Me,tu).call(this),this.removeEditToolbar(),l(this,ei)){for(const t of l(this,ei).values())clearTimeout(t);_(this,ei,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,Me,l_).call(this),l(this,Gt).classList.remove("hidden"),Df(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),_(this,Mo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,Gt).children;if(!l(this,Si)){_(this,Si,Array.from(t));const c=E(this,Me,h_).bind(this),u=E(this,Me,d_).bind(this),f=this._uiManager._signal;for(const p of l(this,Si)){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:f}),p.addEventListener("blur",u,{signal:f}),p.addEventListener("focus",E(this,Me,f_).bind(this,g),{signal:f}),p.setAttribute("data-l10n-id",Ve._l10nResizer[g])}}const i=l(this,Si)[0];let r=0;for(const c of t){if(c===i)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(l(this,Si).length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)l(this,Gt).append(l(this,Gt).firstChild);else if(o>r)for(let u=0;u<o-r;u++)l(this,Gt).firstChild.before(l(this,Gt).lastChild);let c=0;for(const u of t){const p=l(this,Si)[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Ve._l10nResizer[p])}}E(this,Me,Um).call(this,0),_(this,bs,!0),l(this,Gt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,bs)&&E(this,Me,jm).call(this,l(this,Iu),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){E(this,Me,tu).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(t=this._editToolbar)==null||t.show(),(i=l(this,ct))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,r,o;(e=l(this,Gt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=l(this,ct))==null||o.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Du)}set isEditing(e){_(this,Du,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){_(this,Lo,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,ei)||_(this,ei,new Map);const{action:i}=e;let r=l(this,ei).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),l(this,ei).delete(i),l(this,ei).size===0&&_(this,ei,null)},Ve._telemetryTimeout),l(this,ei).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),_(this,wl,!1)}disable(){this.div&&(this.div.tabIndex=-1),_(this,wl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Po=new WeakMap,Si=new WeakMap,ct=new WeakMap,wl=new WeakMap,Lo=new WeakMap,Gt=new WeakMap,Mo=new WeakMap,Rr=new WeakMap,Iu=new WeakMap,Io=new WeakMap,Pr=new WeakMap,Du=new WeakMap,Do=new WeakMap,bs=new WeakMap,Yi=new WeakMap,Al=new WeakMap,_l=new WeakMap,ei=new WeakMap,Fu=new WeakMap,Vf=new WeakMap,Me=new WeakSet,Fm=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()},Nu=new WeakSet,Nm=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Om=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},l_=function(){if(l(this,Gt))return;_(this,Gt,document.createElement("div")),l(this,Gt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");l(this,Gt).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",E(this,Me,c_).bind(this,i),{signal:t}),r.addEventListener("contextmenu",ai,{signal:t}),r.tabIndex=-1}this.div.prepend(l(this,Gt))},c_=function(e,t){var b;t.preventDefault();const{isMac:i}=pn.platform;if(t.button!==0||t.ctrlKey&&i)return;(b=l(this,ct))==null||b.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,Me,jm).bind(this,e),{passive:!0,capture:!0,signal:c}),window.addEventListener("contextmenu",ai,{signal:c});const u=this.x,f=this.y,p=this.width,g=this.height,y=this.parent.div.style.cursor,w=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const A=()=>{var C;o.abort(),this.parent.togglePointerEvents(!0),(C=l(this,ct))==null||C.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=y,this.div.style.cursor=w,E(this,Me,zm).call(this,u,f,p,g)};window.addEventListener("pointerup",A,{signal:c}),window.addEventListener("blur",A,{signal:c})},zm=function(e,t,i,r){const o=this.x,c=this.y,u=this.width,f=this.height;o===e&&c===t&&u===i&&f===r||this.addCommands({cmd:()=>{this.width=u,this.height=f,this.x=o,this.y=c;const[p,g]=this.parentDimensions;this.setDims(p*u,g*f),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[p,g]=this.parentDimensions;this.setDims(p*i,g*r),this.fixAndSetPosition()},mustExec:!0})},jm=function(e,t){const[i,r]=this.parentDimensions,o=this.x,c=this.y,u=this.width,f=this.height,p=Ve.MIN_SIZE/i,g=Ve.MIN_SIZE/r,y=K=>Math.round(K*1e4)/1e4,w=E(this,Me,Om).call(this,this.rotation),A=(K,U)=>[w[0]*K+w[2]*U,w[1]*K+w[3]*U],b=E(this,Me,Om).call(this,360-this.rotation),C=(K,U)=>[b[0]*K+b[2]*U,b[1]*K+b[3]*U];let R,k,F=!1,D=!1;switch(e){case"topLeft":F=!0,R=(K,U)=>[0,0],k=(K,U)=>[K,U];break;case"topMiddle":R=(K,U)=>[K/2,0],k=(K,U)=>[K/2,U];break;case"topRight":F=!0,R=(K,U)=>[K,0],k=(K,U)=>[0,U];break;case"middleRight":D=!0,R=(K,U)=>[K,U/2],k=(K,U)=>[0,U/2];break;case"bottomRight":F=!0,R=(K,U)=>[K,U],k=(K,U)=>[0,0];break;case"bottomMiddle":R=(K,U)=>[K/2,U],k=(K,U)=>[K/2,0];break;case"bottomLeft":F=!0,R=(K,U)=>[0,U],k=(K,U)=>[K,0];break;case"middleLeft":D=!0,R=(K,U)=>[0,U/2],k=(K,U)=>[K,U/2];break}const I=R(u,f),H=k(u,f);let j=A(...H);const B=y(o+j[0]),V=y(c+j[1]);let Q=1,ne=1,[te,Ee]=this.screenToPageTranslation(t.movementX,t.movementY);if([te,Ee]=C(te/i,Ee/r),F){const K=Math.hypot(u,f);Q=ne=Math.max(Math.min(Math.hypot(H[0]-I[0]-te,H[1]-I[1]-Ee)/K,1/u,1/f),p/u,g/f)}else D?Q=Math.max(p,Math.min(1,Math.abs(H[0]-I[0]-te)))/u:ne=Math.max(g,Math.min(1,Math.abs(H[1]-I[1]-Ee)))/f;const fe=y(u*Q),he=y(f*ne);j=A(...k(fe,he));const we=B-j[0],ge=V-j[1];this.width=fe,this.height=he,this.x=we,this.y=ge,this.setDims(i*fe,r*he),this.fixAndSetPosition()},Hm=function(e){const{isMac:t}=pn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},u_=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,r=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),_(this,Al,e.clientX),_(this,_l,e.clientY);const c=u=>{const{clientX:f,clientY:p}=u,[g,y]=this.screenToPageTranslation(f-l(this,Al),p-l(this,_l));_(this,Al,f),_(this,_l,p),this._uiManager.dragSelectedEditors(g,y)};window.addEventListener("pointermove",c,{passive:!0,capture:!0,signal:r})}const o=()=>{i.abort(),t&&this.div.classList.remove("moving"),_(this,Io,!1),this._uiManager.endDragSession()||E(this,Me,Hm).call(this,e)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})},Bm=function(){if(l(this,Rr)||!this.div)return;_(this,Rr,new AbortController);const e=this._uiManager.combinedSignal(l(this,Rr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},h_=function(e){Ve._resizerKeyboardManager.exec(this,e)},d_=function(e){var t;l(this,bs)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,Gt)&&E(this,Me,tu).call(this)},f_=function(e){_(this,Iu,l(this,bs)?e:"")},Um=function(e){if(l(this,Si))for(const t of l(this,Si))t.tabIndex=e},tu=function(){if(_(this,bs,!1),E(this,Me,Um).call(this,-1),l(this,Mo)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=l(this,Mo);E(this,Me,zm).call(this,e,t,i,r),_(this,Mo,null)}},x(Ve,Nu),xe(Ve,"_l10n",null),xe(Ve,"_l10nResizer",null),xe(Ve,"_borderLineWidth",-1),xe(Ve,"_colorManager",new Tm),xe(Ve,"_zIndex",1),xe(Ve,"_telemetryTimeout",1e3);let qe=Ve;class r1 extends qe{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const lA=3285377520,Jn=4294901760,Hi=65535;class p_{constructor(e){this.h1=e?e&4294967295:lA,this.h2=e?e&4294967295:lA}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let C=0,R=e.length;C<R;C++){const k=e.charCodeAt(C);k<=255?t[i++]=k:(t[i++]=k>>>8,t[i++]=k&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,o=i-r*4,c=new Uint32Array(t.buffer,0,r);let u=0,f=0,p=this.h1,g=this.h2;const y=3432918353,w=461845907,A=y&Hi,b=w&Hi;for(let C=0;C<r;C++)C&1?(u=c[C],u=u*y&Jn|u*A&Hi,u=u<<15|u>>>17,u=u*w&Jn|u*b&Hi,p^=u,p=p<<13|p>>>19,p=p*5+3864292196):(f=c[C],f=f*y&Jn|f*A&Hi,f=f<<15|f>>>17,f=f*w&Jn|f*b&Hi,g^=f,g=g<<13|g>>>19,g=g*5+3864292196);switch(u=0,o){case 3:u^=t[r*4+2]<<16;case 2:u^=t[r*4+1]<<8;case 1:u^=t[r*4],u=u*y&Jn|u*A&Hi,u=u<<15|u>>>17,u=u*w&Jn|u*b&Hi,r&1?p^=u:g^=u}this.h1=p,this.h2=g}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Jn|e*36045&Hi,t=t*4283543511&Jn|((t<<16|e>>>16)*2950163797&Jn)>>>16,e^=t>>>1,e=e*444984403&Jn|e*60499&Hi,t=t*3301882366&Jn|((t<<16|e>>>16)*3120437893&Jn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const $m=Object.freeze({map:null,hash:"",transfer:void 0});var Fo,No,Bt,Wf,g_;class Kv{constructor(){x(this,Wf);x(this,Fo,!1);x(this,No,null);x(this,Bt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=l(this,Bt).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return l(this,Bt).get(e)}remove(e){if(l(this,Bt).delete(e),l(this,Bt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,Bt).values())if(t instanceof qe)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=l(this,Bt).get(e);let r=!1;if(i!==void 0)for(const[o,c]of Object.entries(t))i[o]!==c&&(r=!0,i[o]=c);else r=!0,l(this,Bt).set(e,t);r&&E(this,Wf,g_).call(this),t instanceof qe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,Bt).has(e)}getAll(){return l(this,Bt).size>0?Vv(l(this,Bt)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return l(this,Bt).size}resetModified(){l(this,Fo)&&(_(this,Fo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new m_(this)}get serializable(){if(l(this,Bt).size===0)return $m;const e=new Map,t=new p_,i=[],r=Object.create(null);let o=!1;for(const[c,u]of l(this,Bt)){const f=u instanceof qe?u.serialize(!1,r):u;f&&(e.set(c,f),t.update(`${c}:${JSON.stringify(f)}`),o||(o=!!f.bitmap))}if(o)for(const c of e.values())c.bitmap&&i.push(c.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:$m}get editorStats(){let e=null;const t=new Map;for(const i of l(this,Bt).values()){if(!(i instanceof qe))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:o}=r;t.has(o)||t.set(o,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[o]||(e[o]=new Map);for(const[u,f]of Object.entries(r)){if(u==="type")continue;let p=c.get(u);p||(p=new Map,c.set(u,p));const g=p.get(f)??0;p.set(f,g+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){_(this,No,null)}get modifiedIds(){if(l(this,No))return l(this,No);const e=[];for(const t of l(this,Bt).values())!(t instanceof qe)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return _(this,No,{ids:new Set(e),hash:e.join(",")})}}Fo=new WeakMap,No=new WeakMap,Bt=new WeakMap,Wf=new WeakSet,g_=function(){l(this,Fo)||(_(this,Fo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ou;class m_ extends Kv{constructor(t){super();x(this,Ou);const{map:i,hash:r,transfer:o}=t.serializable,c=structuredClone(i,o?{transfer:o}:null);_(this,Ou,{map:c,hash:r,transfer:o})}get print(){nt("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Ou)}get modifiedIds(){return je(this,"modifiedIds",{ids:new Set,hash:""})}}Ou=new WeakMap;var Sl;class o1{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){x(this,Sl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Sl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,Sl).has(e.loadedName))){if(Lt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=e,c=new FontFace(i,r,o);this.addNativeFontFace(c);try{await c.load(),l(this,Sl).add(i),t==null||t(e)}catch{Ie(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}nt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Ie(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return je(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(an||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),je(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Lt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return je(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(I,H){return I.charCodeAt(H)<<24|I.charCodeAt(H+1)<<16|I.charCodeAt(H+2)<<8|I.charCodeAt(H+3)&255}function r(I,H,j,B){const V=I.substring(0,H),Q=I.substring(H+j);return V+B+Q}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const f=u.getContext("2d");let p=0;function g(I,H){if(++p>30){Ie("Load test font never loaded."),H();return}if(f.font="30px "+I,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){H();return}setTimeout(g.bind(null,I,H))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,y.length,y);const b=16,C=1482184792;let R=i(w,b);for(o=0,c=y.length-3;o<c;o+=4)R=R-C+i(y,o)|0;o<y.length&&(R=R-C+i(y+"XXX",o)|0),w=r(w,b,4,Vx(R));const k=`url(data:font/opentype;base64,${btoa(w)});`,F=`@font-face {font-family:"${y}";src:${k}}`;this.insertRule(F);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const I of[e.loadedName,y]){const H=this._document.createElement("span");H.textContent="Hi",H.style.fontFamily=I,D.append(H)}this._document.body.append(D),g(y,()=>{D.remove(),t.complete()})}}Sl=new WeakMap;class a1{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Kx(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(o){Ie(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(o,c){};const r=[];for(let o=0,c=i.length;o<c;)switch(i[o++]){case gs.BEZIER_CURVE_TO:{const[u,f,p,g,y,w]=i.slice(o,o+6);r.push(A=>A.bezierCurveTo(u,f,p,g,y,w)),o+=6}break;case gs.MOVE_TO:{const[u,f]=i.slice(o,o+2);r.push(p=>p.moveTo(u,f)),o+=2}break;case gs.LINE_TO:{const[u,f]=i.slice(o,o+2);r.push(p=>p.lineTo(u,f)),o+=2}break;case gs.QUADRATIC_CURVE_TO:{const[u,f,p,g]=i.slice(o,o+4);r.push(y=>y.quadraticCurveTo(u,f,p,g)),o+=4}break;case gs.RESTORE:r.push(u=>u.restore());break;case gs.SAVE:r.push(u=>u.save());break;case gs.SCALE:Lt(r.length===2,"Scale command is only valid at the third position.");break;case gs.TRANSFORM:{const[u,f,p,g,y,w]=i.slice(o,o+6);r.push(A=>A.transform(u,f,p,g,y,w)),o+=6}break;case gs.TRANSLATE:{const[u,f]=i.slice(o,o+2);r.push(p=>p.translate(u,f)),o+=2}break}return this.compiledGlyphs[t]=function(c,u){r[0](c),r[1](c),c.scale(u,-u);for(let f=2,p=r.length;f<p;f++)r[f](c)}}}var zu;class v_{constructor({enableHWA:e=!1}){x(this,zu,!1);_(this,zu,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!l(this,zu)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){nt("Abstract method `_createCanvas` called.")}}zu=new WeakMap;class l1 extends v_{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class y_{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class w_ extends y_{async _fetch(e){const t=await lp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):ap(t)}}class A_{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,o){return"none"}destroy(e=!1){}}var Oo,zo,Ki,xs,nn,Gf,jo,se,en,Ka,Qa,hf,Ja,__,Vm,Za,nu,iu,Wm,su;class c1 extends A_{constructor({docId:t,ownerDocument:i=globalThis.document}){super();x(this,se);x(this,Oo);x(this,zo);x(this,Ki);x(this,xs);x(this,nn);x(this,Gf);x(this,jo,0);_(this,xs,t),_(this,nn,i)}addFilter(t){if(!t)return"none";let i=l(this,se,en).get(t);if(i)return i;const[r,o,c]=E(this,se,hf).call(this,t),u=t.length===1?r:`${r}${o}${c}`;if(i=l(this,se,en).get(u),i)return l(this,se,en).set(t,i),i;const f=`g_${l(this,xs)}_transfer_map_${un(this,jo)._++}`,p=E(this,se,Ja).call(this,f);l(this,se,en).set(t,p),l(this,se,en).set(u,p);const g=E(this,se,Za).call(this,f);return E(this,se,iu).call(this,r,o,c,g),p}addHCMFilter(t,i){var b;const r=`${t}-${i}`,o="base";let c=l(this,se,Ka).get(o);if((c==null?void 0:c.key)===r||(c?((b=c.filter)==null||b.remove(),c.key=r,c.url="none",c.filter=null):(c={key:r,url:"none",filter:null},l(this,se,Ka).set(o,c)),!t||!i))return c.url;const u=E(this,se,su).call(this,t);t=pe.makeHexColor(...u);const f=E(this,se,su).call(this,i);if(i=pe.makeHexColor(...f),l(this,se,Qa).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return c.url;const p=new Array(256);for(let C=0;C<=255;C++){const R=C/255;p[C]=R<=.03928?R/12.92:((R+.055)/1.055)**2.4}const g=p.join(","),y=`g_${l(this,xs)}_hcm_filter`,w=c.filter=E(this,se,Za).call(this,y);E(this,se,iu).call(this,g,g,g,w),E(this,se,Vm).call(this,w);const A=(C,R)=>{const k=u[C]/255,F=f[C]/255,D=new Array(R+1);for(let I=0;I<=R;I++)D[I]=k+I/R*(F-k);return D.join(",")};return E(this,se,iu).call(this,A(0,5),A(1,5),A(2,5),w),c.url=E(this,se,Ja).call(this,y),c.url}addAlphaFilter(t){let i=l(this,se,en).get(t);if(i)return i;const[r]=E(this,se,hf).call(this,[t]),o=`alpha_${r}`;if(i=l(this,se,en).get(o),i)return l(this,se,en).set(t,i),i;const c=`g_${l(this,xs)}_alpha_map_${un(this,jo)._++}`,u=E(this,se,Ja).call(this,c);l(this,se,en).set(t,u),l(this,se,en).set(o,u);const f=E(this,se,Za).call(this,c);return E(this,se,Wm).call(this,r,f),u}addLuminosityFilter(t){let i=l(this,se,en).get(t||"luminosity");if(i)return i;let r,o;if(t?([r]=E(this,se,hf).call(this,[t]),o=`luminosity_${r}`):o="luminosity",i=l(this,se,en).get(o),i)return l(this,se,en).set(t,i),i;const c=`g_${l(this,xs)}_luminosity_map_${un(this,jo)._++}`,u=E(this,se,Ja).call(this,c);l(this,se,en).set(t,u),l(this,se,en).set(o,u);const f=E(this,se,Za).call(this,c);return E(this,se,__).call(this,f),t&&E(this,se,Wm).call(this,r,f),u}addHighlightHCMFilter(t,i,r,o,c){var F;const u=`${i}-${r}-${o}-${c}`;let f=l(this,se,Ka).get(t);if((f==null?void 0:f.key)===u||(f?((F=f.filter)==null||F.remove(),f.key=u,f.url="none",f.filter=null):(f={key:u,url:"none",filter:null},l(this,se,Ka).set(t,f)),!i||!r))return f.url;const[p,g]=[i,r].map(E(this,se,su).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),w=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[A,b]=[o,c].map(E(this,se,su).bind(this));w<y&&([y,w,A,b]=[w,y,b,A]),l(this,se,Qa).style.color="";const C=(D,I,H)=>{const j=new Array(256),B=(w-y)/H,V=D/255,Q=(I-D)/(255*H);let ne=0;for(let te=0;te<=H;te++){const Ee=Math.round(y+te*B),fe=V+te*Q;for(let he=ne;he<=Ee;he++)j[he]=fe;ne=Ee+1}for(let te=ne;te<256;te++)j[te]=j[ne-1];return j.join(",")},R=`g_${l(this,xs)}_hcm_${t}_filter`,k=f.filter=E(this,se,Za).call(this,R);return E(this,se,Vm).call(this,k),E(this,se,iu).call(this,C(A[0],b[0],5),C(A[1],b[1],5),C(A[2],b[2],5),k),f.url=E(this,se,Ja).call(this,R),f.url}destroy(t=!1){t&&l(this,se,Ka).size!==0||(l(this,Ki)&&(l(this,Ki).parentNode.parentNode.remove(),_(this,Ki,null)),l(this,zo)&&(l(this,zo).clear(),_(this,zo,null)),_(this,jo,0))}}Oo=new WeakMap,zo=new WeakMap,Ki=new WeakMap,xs=new WeakMap,nn=new WeakMap,Gf=new WeakMap,jo=new WeakMap,se=new WeakSet,en=function(){return l(this,zo)||_(this,zo,new Map)},Ka=function(){return l(this,Gf)||_(this,Gf,new Map)},Qa=function(){if(!l(this,Ki)){const t=l(this,nn).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=l(this,nn).createElementNS(vs,"svg");r.setAttribute("width",0),r.setAttribute("height",0),_(this,Ki,l(this,nn).createElementNS(vs,"defs")),t.append(r),r.append(l(this,Ki)),l(this,nn).body.append(t)}return l(this,Ki)},hf=function(t){if(t.length===1){const p=t[0],g=new Array(256);for(let w=0;w<256;w++)g[w]=p[w]/255;const y=g.join(",");return[y,y,y]}const[i,r,o]=t,c=new Array(256),u=new Array(256),f=new Array(256);for(let p=0;p<256;p++)c[p]=i[p]/255,u[p]=r[p]/255,f[p]=o[p]/255;return[c.join(","),u.join(","),f.join(",")]},Ja=function(t){if(l(this,Oo)===void 0){_(this,Oo,"");const i=l(this,nn).URL;i!==l(this,nn).baseURI&&(cp(i)?Ie('#createUrl: ignore "data:"-URL for performance reasons.'):_(this,Oo,i.split("#",1)[0]))}return`url(${l(this,Oo)}#${t})`},__=function(t){const i=l(this,nn).createElementNS(vs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},Vm=function(t){const i=l(this,nn).createElementNS(vs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},Za=function(t){const i=l(this,nn).createElementNS(vs,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),l(this,se,Qa).append(i),i},nu=function(t,i,r){const o=l(this,nn).createElementNS(vs,i);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),t.append(o)},iu=function(t,i,r,o){const c=l(this,nn).createElementNS(vs,"feComponentTransfer");o.append(c),E(this,se,nu).call(this,c,"feFuncR",t),E(this,se,nu).call(this,c,"feFuncG",i),E(this,se,nu).call(this,c,"feFuncB",r)},Wm=function(t,i){const r=l(this,nn).createElementNS(vs,"feComponentTransfer");i.append(r),E(this,se,nu).call(this,r,"feFuncA",t)},su=function(t){return l(this,se,Qa).style.color=t,Yv(getComputedStyle(l(this,se,Qa)).getPropertyValue("color"))};class S_{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class E_ extends S_{async _fetch(e){const t=await lp(e,"arraybuffer");return new Uint8Array(t)}}if(an){var Gm=Promise.withResolvers(),gu=null;(async()=>{const e=await Kd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Kd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Kd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await Kd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,c;return new Map(Object.entries({fs:e,http:t,https:i,url:r,canvas:o,path2d:c}))})().then(e=>{gu=e,Gm.resolve()},e=>{Ie(`loadPackages: ${e}`),gu=new Map,Gm.resolve()})}class qr{static get promise(){return Gm.promise}static get(e){return gu==null?void 0:gu.get(e)}}async function b_(d){const t=await qr.get("fs").promises.readFile(d);return new Uint8Array(t)}class u1 extends A_{}class h1 extends v_{_createCanvas(e,t){return qr.get("canvas").createCanvas(e,t)}}class d1 extends y_{async _fetch(e){return b_(e)}}class f1 extends S_{async _fetch(e){return b_(e)}}const fn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Xm(d,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),d.clip(r)}class Qv{getPattern(){nt("Abstract method `getPattern` called.")}}class p1 extends Qv{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let o;if(r===fn.STROKE||r===fn.FILL){const c=t.current.getClippedPathBoundingBox(r,ht(e))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,f=Math.ceil(c[3]-c[1])||1,p=t.cachedCanvases.getCanvas("pattern",u,f),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),i=pe.transform(i,[1,0,0,1,c[0],c[1]]),g.transform(...t.baseTransform),this.matrix&&g.transform(...this.matrix),Xm(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=e.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(i);o.setTransform(y)}else Xm(e,this._bbox),o=this._createGradient(e);return o}}function pm(d,e,t,i,r,o,c,u){const f=e.coords,p=e.colors,g=d.data,y=d.width*4;let w;f[t+1]>f[i+1]&&(w=t,t=i,i=w,w=o,o=c,c=w),f[i+1]>f[r+1]&&(w=i,i=r,r=w,w=c,c=u,u=w),f[t+1]>f[i+1]&&(w=t,t=i,i=w,w=o,o=c,c=w);const A=(f[t]+e.offsetX)*e.scaleX,b=(f[t+1]+e.offsetY)*e.scaleY,C=(f[i]+e.offsetX)*e.scaleX,R=(f[i+1]+e.offsetY)*e.scaleY,k=(f[r]+e.offsetX)*e.scaleX,F=(f[r+1]+e.offsetY)*e.scaleY;if(b>=F)return;const D=p[o],I=p[o+1],H=p[o+2],j=p[c],B=p[c+1],V=p[c+2],Q=p[u],ne=p[u+1],te=p[u+2],Ee=Math.round(b),fe=Math.round(F);let he,we,ge,K,U,oe,J,M;for(let $=Ee;$<=fe;$++){if($<R){const me=$<b?0:(b-$)/(b-R);he=A-(A-C)*me,we=D-(D-j)*me,ge=I-(I-B)*me,K=H-(H-V)*me}else{let me;$>F?me=1:R===F?me=0:me=(R-$)/(R-F),he=C-(C-k)*me,we=j-(j-Q)*me,ge=B-(B-ne)*me,K=V-(V-te)*me}let le;$<b?le=0:$>F?le=1:le=(b-$)/(b-F),U=A-(A-k)*le,oe=D-(D-Q)*le,J=I-(I-ne)*le,M=H-(H-te)*le;const Ae=Math.round(Math.min(he,U)),ke=Math.round(Math.max(he,U));let ve=y*$+Ae*4;for(let me=Ae;me<=ke;me++)le=(he-me)/(he-U),le<0?le=0:le>1&&(le=1),g[ve++]=we-(we-oe)*le|0,g[ve++]=ge-(ge-J)*le|0,g[ve++]=K-(K-M)*le|0,g[ve++]=255}}function g1(d,e,t){const i=e.coords,r=e.colors;let o,c;switch(e.type){case"lattice":const u=e.verticesPerRow,f=Math.floor(i.length/u)-1,p=u-1;for(o=0;o<f;o++){let g=o*u;for(let y=0;y<p;y++,g++)pm(d,t,i[g],i[g+1],i[g+u],r[g],r[g+1],r[g+u]),pm(d,t,i[g+u+1],i[g+1],i[g+u],r[g+u+1],r[g+1],r[g+u])}break;case"triangles":for(o=0,c=i.length;o<c;o+=3)pm(d,t,i[o],i[o+1],i[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class m1 extends Qv{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const u=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-u,g=Math.ceil(this._bounds[3])-f,y=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),A=p/y,b=g/w,C={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-f,scaleX:1/A,scaleY:1/b},R=y+2*2,k=w+2*2,F=i.getCanvas("mesh",R,k),D=F.context,I=D.createImageData(y,w);if(t){const j=I.data;for(let B=0,V=j.length;B<V;B+=4)j[B]=t[0],j[B+1]=t[1],j[B+2]=t[2],j[B+3]=255}for(const j of this._figures)g1(I,j,C);return D.putImageData(I,2,2),{canvas:F.canvas,offsetX:u-2*A,offsetY:f-2*b,scaleX:A,scaleY:b}}getPattern(e,t,i,r){Xm(e,this._bbox);let o;if(r===fn.SHADING)o=pe.singularValueDecompose2dScale(ht(e));else if(o=pe.singularValueDecompose2dScale(t.baseTransform),this.matrix){const u=pe.singularValueDecompose2dScale(this.matrix);o=[o[0]*u[0],o[1]*u[1]]}const c=this._createMeshCanvas(o,r===fn.SHADING?null:this._background,t.cachedCanvases);return r!==fn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class v1 extends Qv{getPattern(){return"hotpink"}}function y1(d){switch(d[0]){case"RadialAxial":return new p1(d);case"Mesh":return new m1(d);case"Dummy":return new v1}throw new Error(`Unknown IR type: ${d[0]}`)}const cA={COLORED:1,UNCOLORED:2},Xf=class Xf{constructor(e,t,i,r,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:r,tilingType:o,color:c,canvasGraphicsFactory:u}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),rp("TilingType: "+o);const g=t[0],y=t[1],w=t[2],A=t[3],b=w-g,C=A-y,R=pe.singularValueDecompose2dScale(this.matrix),k=pe.singularValueDecompose2dScale(this.baseTransform),F=R[0]*k[0],D=R[1]*k[1];let I=b,H=C,j=!1,B=!1;const V=Math.ceil(f*F),Q=Math.ceil(p*D),ne=Math.ceil(b*F),te=Math.ceil(C*D);V>=ne?I=f:j=!0,Q>=te?H=p:B=!0;const Ee=this.getSizeAndScale(I,this.ctx.canvas.width,F),fe=this.getSizeAndScale(H,this.ctx.canvas.height,D),he=e.cachedCanvases.getCanvas("pattern",Ee.size,fe.size),we=he.context,ge=u.createCanvasGraphics(we);if(ge.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ge,r,c),we.translate(-Ee.scale*g,-fe.scale*y),ge.transform(Ee.scale,0,0,fe.scale,0,0),we.save(),this.clipBbox(ge,g,y,w,A),ge.baseTransform=ht(ge.ctx),ge.executeOperatorList(i),ge.endDrawing(),we.restore(),j||B){const K=he.canvas;j&&(I=f),B&&(H=p);const U=this.getSizeAndScale(I,this.ctx.canvas.width,F),oe=this.getSizeAndScale(H,this.ctx.canvas.height,D),J=U.size,M=oe.size,$=e.cachedCanvases.getCanvas("pattern-workaround",J,M),le=$.context,Ae=j?Math.floor(b/f):0,ke=B?Math.floor(C/p):0;for(let ve=0;ve<=Ae;ve++)for(let me=0;me<=ke;me++)le.drawImage(K,J*ve,M*me,J,M,0,0,J,M);return{canvas:$.canvas,scaleX:U.scale,scaleY:oe.scale,offsetX:g,offsetY:y}}return{canvas:he.canvas,scaleX:Ee.scale,scaleY:fe.scale,offsetX:g,offsetY:y}}getSizeAndScale(e,t,i){const r=Math.max(Xf.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*i);return o>=r?o=r:i=o/e,{scale:i,size:o}}clipBbox(e,t,i,r,o){const c=r-t,u=o-i;e.ctx.rect(t,i,c,u),e.current.updateRectMinMax(ht(e.ctx),[t,i,r,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,o=e.current;switch(t){case cA.COLORED:const c=this.ctx;r.fillStyle=c.fillStyle,r.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case cA.UNCOLORED:const u=pe.makeHexColor(i[0],i[1],i[2]);r.fillStyle=u,r.strokeStyle=u,o.fillColor=u,o.strokeColor=u;break;default:throw new $x(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let o=i;r!==fn.SHADING&&(o=pe.transform(o,t.baseTransform),this.matrix&&(o=pe.transform(o,this.matrix)));const c=this.createPatternCanvas(t);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const f=e.createPattern(c.canvas,"repeat");return f.setTransform(u),f}};xe(Xf,"MAX_PATTERN_SIZE",3e3);let qm=Xf;function w1({src:d,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=pn.isLittleEndian?4278190080:255,[f,p]=c?[o,u]:[u,o],g=i>>3,y=i&7,w=d.length;t=new Uint32Array(t.buffer);let A=0;for(let b=0;b<r;b++){for(const R=e+g;e<R;e++){const k=e<w?d[e]:255;t[A++]=k&128?p:f,t[A++]=k&64?p:f,t[A++]=k&32?p:f,t[A++]=k&16?p:f,t[A++]=k&8?p:f,t[A++]=k&4?p:f,t[A++]=k&2?p:f,t[A++]=k&1?p:f}if(y===0)continue;const C=e<w?d[e++]:255;for(let R=0;R<y;R++)t[A++]=C&1<<7-R?p:f}return{srcPos:e,destPos:A}}const uA=16,hA=100,A1=15,dA=10,fA=1e3,Tn=16;function _1(d,e){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){e.save(),this.__originalSave()},d.restore=function(){e.restore(),this.__originalRestore()},d.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},d.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},d.transform=function(i,r,o,c,u,f){e.transform(i,r,o,c,u,f),this.__originalTransform(i,r,o,c,u,f)},d.setTransform=function(i,r,o,c,u,f){e.setTransform(i,r,o,c,u,f),this.__originalSetTransform(i,r,o,c,u,f)},d.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},d.rotate=function(i){e.rotate(i),this.__originalRotate(i)},d.clip=function(i){e.clip(i),this.__originalClip(i)},d.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},d.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},d.bezierCurveTo=function(t,i,r,o,c,u){e.bezierCurveTo(t,i,r,o,c,u),this.__originalBezierCurveTo(t,i,r,o,c,u)},d.rect=function(t,i,r,o){e.rect(t,i,r,o),this.__originalRect(t,i,r,o)},d.closePath=function(){e.closePath(),this.__originalClosePath()},d.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class S1{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Qd(d,e,t,i,r,o,c,u,f,p){const[g,y,w,A,b,C]=ht(d);if(y===0&&w===0){const F=c*g+b,D=Math.round(F),I=u*A+C,H=Math.round(I),j=(c+f)*g+b,B=Math.abs(Math.round(j)-D)||1,V=(u+p)*A+C,Q=Math.abs(Math.round(V)-H)||1;return d.setTransform(Math.sign(g),0,0,Math.sign(A),D,H),d.drawImage(e,t,i,r,o,0,0,B,Q),d.setTransform(g,y,w,A,b,C),[B,Q]}if(g===0&&A===0){const F=u*w+b,D=Math.round(F),I=c*y+C,H=Math.round(I),j=(u+p)*w+b,B=Math.abs(Math.round(j)-D)||1,V=(c+f)*y+C,Q=Math.abs(Math.round(V)-H)||1;return d.setTransform(0,Math.sign(y),Math.sign(w),0,D,H),d.drawImage(e,t,i,r,o,0,0,Q,B),d.setTransform(g,y,w,A,b,C),[Q,B]}d.drawImage(e,t,i,r,o,c,u,f,p);const R=Math.hypot(g,y),k=Math.hypot(w,A);return[R*f,k*p]}function E1(d){const{width:e,height:t}=d;if(e>fA||t>fA)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let c=new Uint8Array(o*(t+1)),u,f,p;const g=e+7&-8;let y=new Uint8Array(g*t),w=0;for(const k of d.data){let F=128;for(;F>0;)y[w++]=k&F?0:255,F>>=1}let A=0;for(w=0,y[w]!==0&&(c[0]=1,++A),f=1;f<e;f++)y[w]!==y[w+1]&&(c[f]=y[w]?2:1,++A),w++;for(y[w]!==0&&(c[f]=2,++A),u=1;u<t;u++){w=u*g,p=u*o,y[w-g]!==y[w]&&(c[p]=y[w]?1:8,++A);let k=(y[w]?4:0)+(y[w-g]?8:0);for(f=1;f<e;f++)k=(k>>2)+(y[w+1]?4:0)+(y[w-g+1]?8:0),r[k]&&(c[p+f]=r[k],++A),w++;if(y[w-g]!==y[w]&&(c[p+f]=y[w]?2:4,++A),A>i)return null}for(w=g*(t-1),p=u*o,y[w]!==0&&(c[p]=8,++A),f=1;f<e;f++)y[w]!==y[w+1]&&(c[p+f]=y[w]?4:8,++A),w++;if(y[w]!==0&&(c[p+f]=4,++A),A>i)return null;const b=new Int32Array([0,o,-1,0,-o,0,0,0,1]),C=new Path2D;for(u=0;A&&u<=t;u++){let k=u*o;const F=k+e;for(;k<F&&!c[k];)k++;if(k===F)continue;C.moveTo(k%o,u);const D=k;let I=c[k];do{const H=b[I];do k+=H;while(!c[k]);const j=c[k];j!==5&&j!==10?(I=j,c[k]=0):(I=j&51*I>>4,c[k]&=I>>2|I<<2),C.lineTo(k%o,k/o|0),c[k]||--A}while(D!==k);--u}return y=null,c=null,function(k){k.save(),k.scale(1/e,-1/t),k.translate(0,-t),k.fill(C),k.beginPath(),k.restore()}}class pA{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=BA,this.textMatrixScale=1,this.fontMatrix=Am,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Zt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=pe.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=pe.applyTransform(t,e),r=pe.applyTransform(t.slice(2),e),o=pe.applyTransform([t[0],t[3]],e),c=pe.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],o[0],c[0]),this.minY=Math.min(this.minY,i[1],r[1],o[1],c[1]),this.maxX=Math.max(this.maxX,i[0],r[0],o[0],c[0]),this.maxY=Math.max(this.maxY,i[1],r[1],o[1],c[1])}updateScalingPathMinMax(e,t){pe.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,o,c,u,f,p,g){const y=pe.bezierBoundingBox(t,i,r,o,c,u,f,p,g);g||this.updateRectMinMax(e,y)}getPathBoundingBox(e=fn.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===fn.STROKE){t||nt("Stroke bounding box must include transform.");const r=pe.singularValueDecompose2dScale(t),o=r[0]*this.lineWidth/2,c=r[1]*this.lineWidth/2;i[0]-=o,i[1]-=c,i[2]+=o,i[3]+=c}return i}updateClipFromPath(){const e=pe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=fn.FILL,t=null){return pe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function gA(d,e){if(typeof ImageData<"u"&&e instanceof ImageData){d.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%Tn,o=(t-r)/Tn,c=r===0?o:o+1,u=d.createImageData(i,Tn);let f=0,p;const g=e.data,y=u.data;let w,A,b,C;if(e.kind===sf.GRAYSCALE_1BPP){const R=g.byteLength,k=new Uint32Array(y.buffer,0,y.byteLength>>2),F=k.length,D=i+7>>3,I=4294967295,H=pn.isLittleEndian?4278190080:255;for(w=0;w<c;w++){for(b=w<o?Tn:r,p=0,A=0;A<b;A++){const j=R-f;let B=0;const V=j>D?i:j*8-7,Q=V&-8;let ne=0,te=0;for(;B<Q;B+=8)te=g[f++],k[p++]=te&128?I:H,k[p++]=te&64?I:H,k[p++]=te&32?I:H,k[p++]=te&16?I:H,k[p++]=te&8?I:H,k[p++]=te&4?I:H,k[p++]=te&2?I:H,k[p++]=te&1?I:H;for(;B<V;B++)ne===0&&(te=g[f++],ne=128),k[p++]=te&ne?I:H,ne>>=1}for(;p<F;)k[p++]=0;d.putImageData(u,0,w*Tn)}}else if(e.kind===sf.RGBA_32BPP){for(A=0,C=i*Tn*4,w=0;w<o;w++)y.set(g.subarray(f,f+C)),f+=C,d.putImageData(u,0,A),A+=Tn;w<c&&(C=i*r*4,y.set(g.subarray(f,f+C)),d.putImageData(u,0,A))}else if(e.kind===sf.RGB_24BPP)for(b=Tn,C=i*b,w=0;w<c;w++){for(w>=o&&(b=r,C=i*b),p=0,A=C;A--;)y[p++]=g[f++],y[p++]=g[f++],y[p++]=g[f++],y[p++]=255;d.putImageData(u,0,w*Tn)}else throw new Error(`bad image kind: ${e.kind}`)}function mA(d,e){if(e.bitmap){d.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%Tn,o=(t-r)/Tn,c=r===0?o:o+1,u=d.createImageData(i,Tn);let f=0;const p=e.data,g=u.data;for(let y=0;y<c;y++){const w=y<o?Tn:r;({srcPos:f}=w1({src:p,srcPos:f,dest:g,width:i,height:w,nonBlackColor:0})),d.putImageData(u,0,y*Tn)}}function Kc(d,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)d[i]!==void 0&&(e[i]=d[i]);d.setLineDash!==void 0&&(e.setLineDash(d.getLineDash()),e.lineDashOffset=d.lineDashOffset)}function Jd(d){if(d.strokeStyle=d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0),!an){const{filter:e}=d;e!=="none"&&e!==""&&(d.filter="none")}}function vA(d,e){if(e)return!0;const t=pe.singularValueDecompose2dScale(d);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Xr.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const b1=["butt","round","square"],x1=["miter","round","bevel"],C1={},yA={};var Kr,Ym,Km;const ay=class ay{constructor(e,t,i,r,o,{optionalContentConfig:c,markedContentStack:u=null},f,p){x(this,Kr);this.ctx=e,this.current=new pA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new S1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,i){const f=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...ht(this.compositeCtx))}this.ctx.save(),Jd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ht(this.ctx)}executeOperatorList(e,t,i,r){const o=e.argsArray,c=e.fnArray;let u=t||0;const f=o.length;if(f===u)return u;const p=f-u>dA&&typeof i=="function",g=p?Date.now()+A1:0;let y=0;const w=this.commonObjs,A=this.objs;let b;for(;;){if(r!==void 0&&u===r.nextBreakPoint)return r.breakIt(u,i),u;if(b=c[u],b!==vi.dependency)this[b].apply(this,o[u]);else for(const C of o[u]){const R=C.startsWith("g_")?w:A;if(!R.has(C))return R.get(C,i),u}if(u++,u===f)return u;if(p&&++y>dA){if(Date.now()>g)return i(),u;y=0}}}endDrawing(){E(this,Kr,Ym).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),E(this,Kr,Km).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),u=i,f=r,p="prescale1",g,y;for(;o>2&&u>1||c>2&&f>1;){let w=u,A=f;o>2&&u>1&&(w=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/w),c>2&&f>1&&(A=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,c/=f/A),g=this.cachedCanvases.getCanvas(p,w,A),y=g.context,y.clearRect(0,0,w,A),y.drawImage(e,0,0,u,f,0,0,w,A),e=g.canvas,u=w,f=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:f}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,o=this.current.fillColor,c=this.current.patternFill,u=ht(t);let f,p,g,y;if((e.bitmap||e.data)&&e.count>1){const V=e.bitmap||e.data.buffer;p=JSON.stringify(c?u:[u.slice(0,4),o]),f=this._cachedBitmapsMap.get(V),f||(f=new Map,this._cachedBitmapsMap.set(V,f));const Q=f.get(p);if(Q&&!c){const ne=Math.round(Math.min(u[0],u[2])+u[4]),te=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:Q,offsetX:ne,offsetY:te}}g=Q}g||(y=this.cachedCanvases.getCanvas("maskCanvas",i,r),mA(y.context,e));let w=pe.transform(u,[1/i,0,0,-1/r,0,0]);w=pe.transform(w,[1,0,0,1,0,-r]);const[A,b,C,R]=pe.getAxialAlignedBoundingBox([0,0,i,r],w),k=Math.round(C-A)||1,F=Math.round(R-b)||1,D=this.cachedCanvases.getCanvas("fillCanvas",k,F),I=D.context,H=A,j=b;I.translate(-H,-j),I.transform(...w),g||(g=this._scaleImage(y.canvas,ms(I)),g=g.img,f&&c&&f.set(p,g)),I.imageSmoothingEnabled=vA(ht(I),e.interpolate),Qd(I,g,0,0,g.width,g.height,0,0,i,r),I.globalCompositeOperation="source-in";const B=pe.transform(ms(I),[1,0,0,1,-H,-j]);return I.fillStyle=c?o.getPattern(t,this,B,fn.FILL):o,I.fillRect(0,0,i,r),f&&!c&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,D.canvas)),{canvas:D.canvas,offsetX:Math.round(H),offsetY:Math.round(j)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=b1[e]}setLineJoin(e){this.ctx.lineJoin=x1[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...ht(this.suspendedCtx)),Kc(this.suspendedCtx,o),_1(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Kc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){const o=r[0],c=r[1],u=r[2]-o,f=r[3]-c;u===0||f===0||(this.genericComposeSMask(t.context,i,u,f,t.subtype,t.backdrop,t.transferMap,o,c,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,o,c,u,f,p,g,y){let w=e.canvas,A=f-g,b=p-y;if(c){const R=pe.makeHexColor(...c);if(A<0||b<0||A+i>w.width||b+r>w.height){const k=this.cachedCanvases.getCanvas("maskExtension",i,r),F=k.context;F.drawImage(w,-A,-b),F.globalCompositeOperation="destination-atop",F.fillStyle=R,F.fillRect(0,0,i,r),F.globalCompositeOperation="source-over",w=k.canvas,A=b=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(A,b,i,r),e.clip(k),e.globalCompositeOperation="destination-atop",e.fillStyle=R,e.fillRect(A,b,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const C=new Path2D;C.rect(f,p,i,r),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(w,A,b,i,r,f,p,i,r),t.restore()}save(){this.inSMaskMode?(Kc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Kc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,o,c){this.ctx.transform(e,t,i,r,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,o=this.current;let c=o.x,u=o.y,f,p;const g=ht(r),y=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,w=y?i.slice(0):null;for(let A=0,b=0,C=e.length;A<C;A++)switch(e[A]|0){case vi.rectangle:c=t[b++],u=t[b++];const R=t[b++],k=t[b++],F=c+R,D=u+k;r.moveTo(c,u),R===0||k===0?r.lineTo(F,D):(r.lineTo(F,u),r.lineTo(F,D),r.lineTo(c,D)),y||o.updateRectMinMax(g,[c,u,F,D]),r.closePath();break;case vi.moveTo:c=t[b++],u=t[b++],r.moveTo(c,u),y||o.updatePathMinMax(g,c,u);break;case vi.lineTo:c=t[b++],u=t[b++],r.lineTo(c,u),y||o.updatePathMinMax(g,c,u);break;case vi.curveTo:f=c,p=u,c=t[b+4],u=t[b+5],r.bezierCurveTo(t[b],t[b+1],t[b+2],t[b+3],c,u),o.updateCurvePathMinMax(g,f,p,t[b],t[b+1],t[b+2],t[b+3],c,u,w),b+=6;break;case vi.curveTo2:f=c,p=u,r.bezierCurveTo(c,u,t[b],t[b+1],t[b+2],t[b+3]),o.updateCurvePathMinMax(g,f,p,c,u,t[b],t[b+1],t[b+2],t[b+3],w),c=t[b+2],u=t[b+3],b+=4;break;case vi.curveTo3:f=c,p=u,c=t[b+2],u=t[b+3],r.bezierCurveTo(t[b],t[b+1],c,u,c,u),o.updateCurvePathMinMax(g,f,p,t[b],t[b+1],c,u,c,u,w),b+=4;break;case vi.closePath:r.closePath();break}y&&o.updateScalingPathMinMax(g,w),o.setCurrentPoint(c,u)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,ms(t),fn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,ms(t),fn.FILL),o=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=C1}eoClip(){this.pendingClip=yA}beginText(){this.current.textMatrix=BA,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var g;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||Am,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ie("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const o=i.loadedName||"sans-serif",c=((g=i.systemFontInfo)==null?void 0:g.css)||`"${o}", ${i.fallbackName}`;let u="normal";i.black?u="900":i.bold&&(u="bold");const f=i.italic?"italic":"normal";let p=t;t<uA?p=uA:t>hA&&(p=hA),this.current.fontSizeScale=t/p,this.ctx.font=`${f} ${u} ${p}px ${c}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,o,c){this.current.textMatrix=[e,t,i,r,o,c],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const o=this.ctx,c=this.current,u=c.font,f=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,g=f&Zt.FILL_STROKE_MASK,y=!!(f&Zt.ADD_TO_PATH_FLAG),w=c.patternFill&&!u.missingFile;let A;(u.disableFontFace||y||w)&&(A=u.getPathGenerator(this.commonObjs,e)),u.disableFontFace||w?(o.save(),o.translate(t,i),o.beginPath(),A(o,p),r&&o.setTransform(...r),(g===Zt.FILL||g===Zt.FILL_STROKE)&&o.fill(),(g===Zt.STROKE||g===Zt.FILL_STROKE)&&o.stroke(),o.restore()):((g===Zt.FILL||g===Zt.FILL_STROKE)&&o.fillText(e,t,i),(g===Zt.STROKE||g===Zt.FILL_STROKE)&&o.strokeText(e,t,i)),y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ht(o),x:t,y:i,fontSize:p,addToPath:A})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return je(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const o=this.ctx,c=t.fontSizeScale,u=t.charSpacing,f=t.wordSpacing,p=t.fontDirection,g=t.textHScale*p,y=e.length,w=i.vertical,A=w?1:-1,b=i.defaultVMetrics,C=r*t.fontMatrix[0],R=t.textRenderingMode===Zt.FILL&&!i.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),p>0?o.scale(g,-1):o.scale(g,1);let k;if(t.patternFill){o.save();const j=t.fillColor.getPattern(o,this,ms(o),fn.FILL);k=ht(o),o.restore(),o.fillStyle=j}let F=t.lineWidth;const D=t.textMatrixScale;if(D===0||F===0){const j=t.textRenderingMode&Zt.FILL_STROKE_MASK;(j===Zt.STROKE||j===Zt.FILL_STROKE)&&(F=this.getSinglePixelWidth())}else F/=D;if(c!==1&&(o.scale(c,c),F/=c),o.lineWidth=F,i.isInvalidPDFjsFont){const j=[];let B=0;for(const V of e)j.push(V.unicode),B+=V.width;o.fillText(j.join(""),0,0),t.x+=B*C*g,o.restore(),this.compose();return}let I=0,H;for(H=0;H<y;++H){const j=e[H];if(typeof j=="number"){I+=A*j*r/1e3;continue}let B=!1;const V=(j.isSpace?f:0)+u,Q=j.fontChar,ne=j.accent;let te,Ee,fe=j.width;if(w){const we=j.vmetric||b,ge=-(j.vmetric?we[1]:fe*.5)*C,K=we[2]*C;fe=we?-we[0]:fe,te=ge/c,Ee=(I+K)/c}else te=I/c,Ee=0;if(i.remeasure&&fe>0){const we=o.measureText(Q).width*1e3/r*c;if(fe<we&&this.isFontSubpixelAAEnabled){const ge=fe/we;B=!0,o.save(),o.scale(ge,1),te/=ge}else fe!==we&&(te+=(fe-we)/2e3*r/c)}if(this.contentVisible&&(j.isInFont||i.missingFile)){if(R&&!ne)o.fillText(Q,te,Ee);else if(this.paintChar(Q,te,Ee,k),ne){const we=te+r*ne.offset.x/c,ge=Ee-r*ne.offset.y/c;this.paintChar(ne.fontChar,we,ge,k)}}const he=w?fe*C-V*p:fe*C+V*p;I+=he,B&&o.restore()}w?t.y-=I:t.x+=I*g,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,o=i.fontSize,c=i.fontDirection,u=r.vertical?1:-1,f=i.charSpacing,p=i.wordSpacing,g=i.textHScale*c,y=i.fontMatrix||Am,w=e.length,A=i.textRenderingMode===Zt.INVISIBLE;let b,C,R,k;if(!(A||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(g,c),b=0;b<w;++b){if(C=e[b],typeof C=="number"){k=u*C*o/1e3,this.ctx.translate(k,0),i.x+=k*g;continue}const F=(C.isSpace?p:0)+f,D=r.charProcOperatorList[C.operatorListId];if(!D){Ie(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),t.scale(o,o),t.transform(...y),this.executeOperatorList(D),this.restore()),R=pe.applyTransform([C.width,0],y)[0]*o+F,t.translate(R,0),i.x+=R*g}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,o,c){this.ctx.rect(i,r,o-i,c-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||ht(this.ctx),o={createCanvasGraphics:c=>new ay(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new qm(e,i,this.ctx,o,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=pe.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=pe.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=y1(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,ms(t),fn.SHADING);const r=ms(t);if(r){const{width:o,height:c}=t.canvas,[u,f,p,g]=pe.getAxialAlignedBoundingBox([0,0,o,c],r);this.ctx.fillRect(u,f,p-u,g-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){nt("Should not call beginInlineImage")}beginImageData(){nt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ht(this.ctx),t)){const i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(ht(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||rp("TODO: Support non-isolated groups."),e.knockout&&Ie("Knockout groups not supported.");const i=ht(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=pe.getAxialAlignedBoundingBox(e.bbox,ht(t));const o=[0,0,t.canvas.width,t.canvas.height];r=pe.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),u=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-c,1),p=Math.max(Math.ceil(r[3])-u,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,f,p),w=y.context;w.translate(-c,-u),w.transform(...i),e.smask?this.smaskStack.push({canvas:y.canvas,context:w,offsetX:c,offsetY:u,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(c,u),t.save()),Kc(t,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=ht(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=pe.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,i,r,o){if(E(this,Kr,Ym).call(this),Jd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const c=t[2]-t[0],u=t[3]-t[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=c,t[3]=u;const[f,p]=pe.singularValueDecompose2dScale(ht(this.ctx)),{viewportScale:g}=this,y=Math.ceil(c*this.outputScaleX*g),w=Math.ceil(u*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(y,w);const{canvas:A,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(e,A),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(f,0,0,-p,0,u*p),Jd(this.ctx)}else Jd(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],c,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new pA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,Kr,Km).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=E1(e)),r.compiled)){r.compiled(i);return}const o=this._createMaskCanvas(e),c=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(c,o.offsetX,o.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,o,c){if(!this.contentVisible)return;e=this.getObject(e.data,e);const u=this.ctx;u.save();const f=ht(u);u.transform(t,i,r,o,0,0);const p=this._createMaskCanvas(e);u.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let g=0,y=c.length;g<y;g+=2){const w=pe.transform(f,[t,i,r,o,c[g],c[g+1]]),[A,b]=pe.applyTransform([0,0],w);u.drawImage(p.canvas,A,b)}u.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const o of e){const{data:c,width:u,height:f,transform:p}=o,g=this.cachedCanvases.getCanvas("maskCanvas",u,f),y=g.context;y.save();const w=this.getObject(c,o);mA(y,w),y.globalCompositeOperation="source-in",y.fillStyle=r?i.getPattern(y,this,ms(t),fn.FILL):i,y.fillRect(0,0,u,f),y.restore(),t.save(),t.transform(...p),t.scale(1,-1),Qd(t,g.canvas,0,0,u,f,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ie("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){Ie("Dependent image isn't ready yet");return}const c=o.width,u=o.height,f=[];for(let p=0,g=r.length;p<g;p+=2)f.push({transform:[t,0,0,i,r[p],r[p+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(o,f)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,o=this.cachedCanvases.getCanvas("inlineImage",i,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(t,0,0),c.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!an){const{filter:u}=r;u!=="none"&&u!==""&&(r.filter="none")}r.scale(1/t,-1/i);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const f=this.cachedCanvases.getCanvas("inlineImage",t,i).context;gA(f,e),o=this.applyTransferMapsToCanvas(f)}const c=this._scaleImage(o,ms(r));r.imageSmoothingEnabled=vA(ht(r),e.interpolate),Qd(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const o=e.width,c=e.height,f=this.cachedCanvases.getCanvas("inlineImage",o,c).context;gA(f,e),r=this.applyTransferMapsToCanvas(f)}for(const o of t)i.save(),i.transform(...o.transform),i.scale(1,-1),Qd(i,r,o.x,o.y,o.w,o.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===yA?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ht(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:o}=this.ctx.getTransform();let c,u;if(i===0&&r===0){const f=Math.abs(t),p=Math.abs(o);if(f===p)if(e===0)c=u=1/f;else{const g=f*e;c=u=g<1?1/g:1}else if(e===0)c=1/f,u=1/p;else{const g=f*e,y=p*e;c=g<1?1/g:1,u=y<1?1/y:1}}else{const f=Math.abs(t*o-i*r),p=Math.hypot(t,i),g=Math.hypot(r,o);if(e===0)c=g/f,u=p/f;else{const y=e*f;c=g>y?g/y:1,u=p>y?p/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,o]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&o===1){t.stroke();return}const c=t.getLineDash();if(e&&t.save(),t.scale(r,o),c.length>0){const u=Math.max(r,o);t.setLineDash(c.map(f=>f/u)),t.lineDashOffset/=u}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Kr=new WeakSet,Ym=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Km=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let rl=ay;for(const d in vi)rl.prototype[d]!==void 0&&(rl.prototype[vi[d]]=rl.prototype[d]);var ju,Hu;class Vs{static get workerPort(){return l(this,ju)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");_(this,ju,e)}static get workerSrc(){return l(this,Hu)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");_(this,Hu,e)}}ju=new WeakMap,Hu=new WeakMap,x(Vs,ju,null),x(Vs,Hu,"");const Zd={DATA:1,ERROR:2},_t={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Dn(d){switch(d instanceof Error||typeof d=="object"&&d!==null||nt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new ba(d.message);case"MissingPDFException":return new Ea(d.message);case"PasswordException":return new _m(d.message,d.code);case"UnexpectedResponseException":return new op(d.message,d.status);case"UnknownErrorException":return new Sm(d.message,d.details);default:return new Sm(d.message,d.toString())}}var El,oi,x_,C_,k_,df;class ru{constructor(e,t,i){x(this,oi);x(this,El,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",E(this,oi,x_).bind(this),{signal:l(this,El).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(c){o.reject(c)}return o.promise}sendWithStream(e,t,i,r){const o=this.streamId++,c=this.sourceName,u=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:c,targetName:u,action:e,streamId:o,data:t,desiredSize:p.desiredSize},r),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,f.postMessage({sourceName:c,targetName:u,stream:_t.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{Lt(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,f.postMessage({sourceName:c,targetName:u,stream:_t.CANCEL,streamId:o,reason:Dn(p)}),g.promise}},i)}destroy(){var e;(e=l(this,El))==null||e.abort(),_(this,El,null)}}El=new WeakMap,oi=new WeakSet,x_=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){E(this,oi,k_).call(this,e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Zd.DATA)r.resolve(e.data);else if(e.callback===Zd.ERROR)r.reject(Dn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,o=this.comObj;new Promise(function(c){c(t(e.data))}).then(function(c){o.postMessage({sourceName:i,targetName:r,callback:Zd.DATA,callbackId:e.callbackId,data:c})},function(c){o.postMessage({sourceName:i,targetName:r,callback:Zd.ERROR,callbackId:e.callbackId,reason:Dn(c)})});return}if(e.streamId){E(this,oi,C_).call(this,e);return}t(e.data)},C_=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,o=this.comObj,c=this,u=this.actionHandler[e.action],f={enqueue(p,g=1,y){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=g,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:r,stream:_t.ENQUEUE,streamId:t,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:_t.CLOSE,streamId:t}),delete c.streamSinks[t])},error(p){Lt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:_t.ERROR,streamId:t,reason:Dn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[t]=f,new Promise(function(p){p(u(e.data,f))}).then(function(){o.postMessage({sourceName:i,targetName:r,stream:_t.START_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:_t.START_COMPLETE,streamId:t,reason:Dn(p)})})},k_=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,o=this.comObj,c=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case _t.START_COMPLETE:e.success?c.startCall.resolve():c.startCall.reject(Dn(e.reason));break;case _t.PULL_COMPLETE:e.success?c.pullCall.resolve():c.pullCall.reject(Dn(e.reason));break;case _t.PULL:if(!u){o.postMessage({sourceName:i,targetName:r,stream:_t.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,new Promise(function(f){var p;f((p=u.onPull)==null?void 0:p.call(u))}).then(function(){o.postMessage({sourceName:i,targetName:r,stream:_t.PULL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:i,targetName:r,stream:_t.PULL_COMPLETE,streamId:t,reason:Dn(f)})});break;case _t.ENQUEUE:if(Lt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(e.chunk);break;case _t.CLOSE:if(Lt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),E(this,oi,df).call(this,c,t);break;case _t.ERROR:Lt(c,"error should have stream controller"),c.controller.error(Dn(e.reason)),E(this,oi,df).call(this,c,t);break;case _t.CANCEL_COMPLETE:e.success?c.cancelCall.resolve():c.cancelCall.reject(Dn(e.reason)),E(this,oi,df).call(this,c,t);break;case _t.CANCEL:if(!u)break;new Promise(function(f){var p;f((p=u.onCancel)==null?void 0:p.call(u,Dn(e.reason)))}).then(function(){o.postMessage({sourceName:i,targetName:r,stream:_t.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:i,targetName:r,stream:_t.CANCEL_COMPLETE,streamId:t,reason:Dn(f)})}),u.sinkCapability.reject(Dn(e.reason)),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},df=async function(e,t){var i,r,o;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(o=e.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[t]};var Ho,Bu;class k1{constructor({parsedData:e,rawData:t}){x(this,Ho);x(this,Bu);_(this,Ho,e),_(this,Bu,t)}getRaw(){return l(this,Bu)}get(e){return l(this,Ho).get(e)??null}getAll(){return Vv(l(this,Ho))}has(e){return l(this,Ho).has(e)}}Ho=new WeakMap,Bu=new WeakMap;const el=Symbol("INTERNAL");var Uu,$u,Vu,bl;class T1{constructor(e,{name:t,intent:i,usage:r,rbGroups:o}){x(this,Uu,!1);x(this,$u,!1);x(this,Vu,!1);x(this,bl,!0);_(this,Uu,!!(e&$n.DISPLAY)),_(this,$u,!!(e&$n.PRINT)),this.name=t,this.intent=i,this.usage=r,this.rbGroups=o}get visible(){if(l(this,Vu))return l(this,bl);if(!l(this,bl))return!1;const{print:e,view:t}=this.usage;return l(this,Uu)?(t==null?void 0:t.viewState)!=="OFF":l(this,$u)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==el&&nt("Internal method `_setVisible` called."),_(this,Vu,i),_(this,bl,t)}}Uu=new WeakMap,$u=new WeakMap,Vu=new WeakMap,bl=new WeakMap;var Lr,Xe,xl,Cl,Wu,Qm;class R1{constructor(e,t=$n.DISPLAY){x(this,Wu);x(this,Lr,null);x(this,Xe,new Map);x(this,xl,null);x(this,Cl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,_(this,Cl,e.order);for(const i of e.groups)l(this,Xe).set(i.id,new T1(t,i));if(e.baseState==="OFF")for(const i of l(this,Xe).values())i._setVisible(el,!1);for(const i of e.on)l(this,Xe).get(i)._setVisible(el,!0);for(const i of e.off)l(this,Xe).get(i)._setVisible(el,!1);_(this,xl,this.getHash())}}isVisible(e){if(l(this,Xe).size===0)return!0;if(!e)return rp("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,Xe).has(e.id)?l(this,Xe).get(e.id).visible:(Ie(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return E(this,Wu,Qm).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(l(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(!l(this,Xe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(!l(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(l(this,Xe).get(t).visible)return!1}return!0}return Ie(`Unknown optional content policy ${e.policy}.`),!0}return Ie(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var o;const r=l(this,Xe).get(e);if(!r){Ie(`Optional content group not found: ${e}`);return}if(i&&t&&r.rbGroups.length)for(const c of r.rbGroups)for(const u of c)u!==e&&((o=l(this,Xe).get(u))==null||o._setVisible(el,!1,!0));r._setVisible(el,!!t,!0),_(this,Lr,null)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const o=l(this,Xe).get(r);if(o)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!o.visible,t);break}}_(this,Lr,null)}get hasInitialVisibility(){return l(this,xl)===null||this.getHash()===l(this,xl)}getOrder(){return l(this,Xe).size?l(this,Cl)?l(this,Cl).slice():[...l(this,Xe).keys()]:null}getGroups(){return l(this,Xe).size>0?Vv(l(this,Xe)):null}getGroup(e){return l(this,Xe).get(e)||null}getHash(){if(l(this,Lr)!==null)return l(this,Lr);const e=new p_;for(const[t,i]of l(this,Xe))e.update(`${t}:${i.visible}`);return _(this,Lr,e.hexdigest())}}Lr=new WeakMap,Xe=new WeakMap,xl=new WeakMap,Cl=new WeakMap,Wu=new WeakSet,Qm=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const o=e[r];let c;if(Array.isArray(o))c=E(this,Wu,Qm).call(this,o);else if(l(this,Xe).has(o))c=l(this,Xe).get(o).visible;else return Ie(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"};class P1{constructor(e,{disableRange:t=!1,disableStream:i=!1}){Lt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:c,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,(o==null?void 0:o.length)>0){const f=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),e.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),e.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(i),!0)});Lt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,o;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Lt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new L1(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new M1(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class L1{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=Xv(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class M1{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function I1(d){let e=!0,t=i("filename\\*","i").exec(d);if(t){t=t[1];let g=u(t);return g=unescape(g),g=f(g),g=p(g),o(g)}if(t=c(d),t){const g=p(t);return o(g)}if(t=i("filename","i").exec(d),t){t=t[1];let g=u(t);return g=p(g),o(g)}function i(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const w=new TextDecoder(g,{fatal:!0}),A=ap(y);y=w.decode(A),e=!1}catch{}}return y}function o(g){return e&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),e&&(g=r("iso-8859-1",g))),g}function c(g){const y=[];let w;const A=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=A.exec(g))!==null;){let[,C,R,k]=w;if(C=parseInt(C,10),C in y){if(C===0)break;continue}y[C]=[R,k]}const b=[];for(let C=0;C<y.length&&C in y;++C){let[R,k]=y[C];k=u(k),R&&(k=unescape(k),C===0&&(k=f(k))),b.push(k)}return b.join("")}function u(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let w=0;w<y.length;++w){const A=y[w].indexOf('"');A!==-1&&(y[w]=y[w].slice(0,A),y.length=w+1),y[w]=y[w].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function f(g){const y=g.indexOf("'");if(y===-1)return g;const w=g.slice(0,y),b=g.slice(y+1).replace(/^[^']*'/,"");return r(w,b)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,w,A,b){if(A==="q"||A==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,R){return String.fromCharCode(parseInt(R,16))}),r(w,b);try{b=atob(b)}catch{}return r(w,b)})}return""}function Jv(d,e){const t=new Headers;if(!d||!e||typeof e!="object")return t;for(const i in e){const r=e[i];r!==void 0&&t.append(i,r)}return t}function Zv({responseHeaders:d,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(d.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*t)||i||!e||d.get("Accept-Ranges")!=="bytes"||(d.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function ey(d){const e=d.get("Content-Disposition");if(e){let t=I1(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Xv(t))return t}return null}function up(d,e){return d===404||d===0&&e.startsWith("file:")?new Ea('Missing PDF "'+e+'".'):new op(`Unexpected server response (${d}) while retrieving PDF "${e}".`,d)}function T_(d){return d===200||d===206}function R_(d,e,t){return{method:"GET",headers:d,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function P_(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:(Ie(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class wA{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Jv(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new D1(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new F1(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class D1{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),r=t.url;fetch(r,R_(i,this._withCredentials,this._abortController)).then(o=>{if(!T_(o.status))throw up(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:f}=Zv({responseHeaders:c,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=f||this._contentLength,this._filename=ey(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ba("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:P_(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class F1{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${i-1}`);const c=r.url;fetch(c,R_(o,this._withCredentials,this._abortController)).then(u=>{if(!T_(u.status))throw up(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:P_(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const gm=200,mm=206;function N1(d){const e=d.response;return typeof e!="string"?e:ap(e).buffer}class O1{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Jv(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const o in i)r[o]=i[o];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,c]of this.headers)t.setRequestHeader(o,c);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=mm):r.expectedStatus=gm,t.responseType="arraybuffer",e.onError&&(t.onerror=function(o){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){var f,p,g;const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(f=i.onError)==null||f.call(i,r.status);return}const o=r.status||gm;if(!(o===gm&&i.expectedStatus===mm)&&o!==i.expectedStatus){(p=i.onError)==null||p.call(i,r.status);return}const u=N1(r);if(o===mm){const y=r.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);i.onDone({begin:parseInt(w[1],10),chunk:u})}else u?i.onDone({begin:0,chunk:u}):(g=i.onError)==null||g.call(i,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class z1{constructor(e){this._source=e,this._manager=new O1(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Lt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new j1(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new H1(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class j1{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(c=>{const[u,...f]=c.split(": ");return[u,f.join(": ")]})),{allowRangeRequests:r,suggestedLength:o}=Zv({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=ey(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=up(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class H1{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=up(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const B1=/^[a-z][a-z0-9\-+.]+:/i;function U1(d){if(B1.test(d))return new URL(d);const e=qr.get("url");return new URL(e.pathToFileURL(d))}function L_(d,e,t){return d.protocol==="http:"?qr.get("http").request(d,{headers:e},t):qr.get("https").request(d,{headers:e},t)}class $1{constructor(e){this.source=e,this.url=U1(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Jv(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new G1(this):new V1(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new X1(this,e,t):new W1(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class M_{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ba("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class I_{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class V1 extends M_{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=r=>{if(r.statusCode===404){const f=new Ea(`Missing PDF "${this._url}".`);this._storedError=f,this._headersCapability.reject(f);return}this._headersCapability.resolve(),this._setReadableStream(r);const o=new Headers(this._readableStream.headers),{allowRangeRequests:c,suggestedLength:u}=Zv({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=ey(o)};this._request=L_(this._url,t,i),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class W1 extends I_{constructor(e,t,i){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${i-1}`;const o=c=>{if(c.statusCode===404){const u=new Ea(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(c)};this._request=L_(this._url,r,o),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class G1 extends M_{constructor(e){super(e);const t=qr.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Ea(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class X1 extends I_{constructor(e,t,i){super(e);const r=qr.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}const q1=1e5,En=30,Y1=.8;var jA,Mr,Cn,Gu,Xu,Bo,Cs,qu,Yu,Uo,kl,Tl,Ir,Rl,Ku,Pl,$o,Qu,Ju,pt,Vo,Wo,Zu,Dr,Ll,qs,D_,F_,Zm,Wn,ff,ev,N_,O_;let Jm=(pt=class{constructor({textContentSource:e,container:t,viewport:i}){x(this,qs);x(this,Mr,Promise.withResolvers());x(this,Cn,null);x(this,Gu,!1);x(this,Xu,!!((jA=globalThis.FontInspector)!=null&&jA.enabled));x(this,Bo,null);x(this,Cs,null);x(this,qu,0);x(this,Yu,0);x(this,Uo,null);x(this,kl,null);x(this,Tl,0);x(this,Ir,0);x(this,Rl,Object.create(null));x(this,Ku,[]);x(this,Pl,null);x(this,$o,[]);x(this,Qu,new WeakMap);x(this,Ju,null);var f;if(e instanceof ReadableStream)_(this,Pl,e);else if(typeof e=="object")_(this,Pl,new ReadableStream({start(p){p.enqueue(e),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');_(this,Cn,_(this,kl,t)),_(this,Ir,i.scale*(globalThis.devicePixelRatio||1)),_(this,Tl,i.rotation),_(this,Cs,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:c,pageY:u}=i.rawDims;_(this,Ju,[1,0,0,-1,-c,u+o]),_(this,Yu,r),_(this,qu,o),E(f=pt,Wn,N_).call(f),va(t,i),l(this,Mr).promise.finally(()=>{l(pt,Ll).delete(this),_(this,Cs,null),_(this,Rl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=pn.platform;return je(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,Uo).read().then(({value:t,done:i})=>{if(i){l(this,Mr).resolve();return}l(this,Bo)??_(this,Bo,t.lang),Object.assign(l(this,Rl),t.styles),E(this,qs,D_).call(this,t.items),e()},l(this,Mr).reject)};return _(this,Uo,l(this,Pl).getReader()),l(pt,Ll).add(this),e(),l(this,Mr).promise}update({viewport:e,onBefore:t=null}){var o;const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==l(this,Tl)&&(t==null||t(),_(this,Tl,r),va(l(this,kl),{rotation:r})),i!==l(this,Ir)){t==null||t(),_(this,Ir,i);const c={div:null,properties:null,ctx:E(o=pt,Wn,ff).call(o,l(this,Bo))};for(const u of l(this,$o))c.properties=l(this,Qu).get(u),c.div=u,E(this,qs,Zm).call(this,c)}}cancel(){var t;const e=new ba("TextLayer task cancelled.");(t=l(this,Uo))==null||t.cancel(e).catch(()=>{}),_(this,Uo,null),l(this,Mr).reject(e)}get textDivs(){return l(this,$o)}get textContentItemsStr(){return l(this,Ku)}static cleanup(){if(!(l(this,Ll).size>0)){l(this,Vo).clear();for(const{canvas:e}of l(this,Wo).values())e.remove();l(this,Wo).clear()}}},Mr=new WeakMap,Cn=new WeakMap,Gu=new WeakMap,Xu=new WeakMap,Bo=new WeakMap,Cs=new WeakMap,qu=new WeakMap,Yu=new WeakMap,Uo=new WeakMap,kl=new WeakMap,Tl=new WeakMap,Ir=new WeakMap,Rl=new WeakMap,Ku=new WeakMap,Pl=new WeakMap,$o=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,Vo=new WeakMap,Wo=new WeakMap,Zu=new WeakMap,Dr=new WeakMap,Ll=new WeakMap,qs=new WeakSet,D_=function(e){var r,o;if(l(this,Gu))return;(o=l(this,Cs)).ctx??(o.ctx=E(r=pt,Wn,ff).call(r,l(this,Bo)));const t=l(this,$o),i=l(this,Ku);for(const c of e){if(t.length>q1){Ie("Ignoring additional textDivs for performance reasons."),_(this,Gu,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const u=l(this,Cn);_(this,Cn,document.createElement("span")),l(this,Cn).classList.add("markedContent"),c.id!==null&&l(this,Cn).setAttribute("id",`${c.id}`),u.append(l(this,Cn))}else c.type==="endMarkedContent"&&_(this,Cn,l(this,Cn).parentNode);continue}i.push(c.str),E(this,qs,F_).call(this,c)}},F_=function(e){var C;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,$o).push(t);const r=pe.transform(l(this,Ju),e.transform);let o=Math.atan2(r[1],r[0]);const c=l(this,Rl)[e.fontName];c.vertical&&(o+=Math.PI/2);let u=l(this,Xu)&&c.fontSubstitution||c.fontFamily;u=pt.fontFamilyMap.get(u)||u;const f=Math.hypot(r[2],r[3]),p=f*E(C=pt,Wn,O_).call(C,u,l(this,Bo));let g,y;o===0?(g=r[4],y=r[5]-p):(g=r[4]+p*Math.sin(o),y=r[5]-p*Math.cos(o));const w="calc(var(--scale-factor)*",A=t.style;l(this,Cn)===l(this,kl)?(A.left=`${(100*g/l(this,Yu)).toFixed(2)}%`,A.top=`${(100*y/l(this,qu)).toFixed(2)}%`):(A.left=`${w}${g.toFixed(2)}px)`,A.top=`${w}${y.toFixed(2)}px)`),A.fontSize=`${w}${(l(pt,Dr)*f).toFixed(2)}px)`,A.fontFamily=u,i.fontSize=f,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,Xu)&&(t.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),o!==0&&(i.angle=o*(180/Math.PI));let b=!1;if(e.str.length>1)b=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const R=Math.abs(e.transform[0]),k=Math.abs(e.transform[3]);R!==k&&Math.max(R,k)/Math.min(R,k)>1.5&&(b=!0)}if(b&&(i.canvasWidth=c.vertical?e.height:e.width),l(this,Qu).set(t,i),l(this,Cs).div=t,l(this,Cs).properties=i,E(this,qs,Zm).call(this,l(this,Cs)),i.hasText&&l(this,Cn).append(t),i.hasEOL){const R=document.createElement("br");R.setAttribute("role","presentation"),l(this,Cn).append(R)}},Zm=function(e){var u;const{div:t,properties:i,ctx:r}=e,{style:o}=t;let c="";if(l(pt,Dr)>1&&(c=`scale(${1/l(pt,Dr)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:f}=o,{canvasWidth:p,fontSize:g}=i;E(u=pt,Wn,ev).call(u,r,g*l(this,Ir),f);const{width:y}=r.measureText(t.textContent);y>0&&(c=`scaleX(${p*l(this,Ir)/y}) ${c}`)}i.angle!==0&&(c=`rotate(${i.angle}deg) ${c}`),c.length>0&&(o.transform=c)},Wn=new WeakSet,ff=function(e=null){let t=l(this,Wo).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Wo).set(e,t),l(this,Zu).set(t,{size:0,family:""})}return t},ev=function(e,t,i){const r=l(this,Zu).get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)},N_=function(){if(l(this,Dr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),_(this,Dr,e.getBoundingClientRect().height),e.remove()},O_=function(e,t){const i=l(this,Vo).get(e);if(i)return i;const r=E(this,Wn,ff).call(this,t);r.canvas.width=r.canvas.height=En,E(this,Wn,ev).call(this,r,En,e);const o=r.measureText("");let c=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);if(c){const g=c/(c+u);return l(this,Vo).set(e,g),r.canvas.width=r.canvas.height=0,g}r.strokeStyle="red",r.clearRect(0,0,En,En),r.strokeText("g",0,0);let f=r.getImageData(0,0,En,En).data;u=0;for(let g=f.length-1-3;g>=0;g-=4)if(f[g]>0){u=Math.ceil(g/4/En);break}r.clearRect(0,0,En,En),r.strokeText("A",0,En),f=r.getImageData(0,0,En,En).data,c=0;for(let g=0,y=f.length;g<y;g+=4)if(f[g]>0){c=En-Math.floor(g/4/En);break}r.canvas.width=r.canvas.height=0;const p=c?c/(c+u):Y1;return l(this,Vo).set(e,p),p},x(pt,Wn),x(pt,Vo,new Map),x(pt,Wo,new Map),x(pt,Zu,new WeakMap),x(pt,Dr,null),x(pt,Ll,new Set),pt);class vu{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(o){var f;if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(vu.shouldBuildText(u))(f=o==null?void 0:o.attributes)!=null&&f.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&t.push({str:c}),!!o.children)for(const p of o.children)r(p)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const K1=65536,Q1=100,J1=5e3,Z1=an?h1:l1,eC=an?d1:w_,tC=an?u1:c1,nC=an?f1:E_;function iC(d={}){typeof d=="string"||d instanceof URL?d={url:d}:(d instanceof ArrayBuffer||ArrayBuffer.isView(d))&&(d={data:d});const e=new tv,{docId:t}=e,i=d.url?sC(d.url):null,r=d.data?rC(d.data):null,o=d.httpHeaders||null,c=d.withCredentials===!0,u=d.password??null,f=d.range instanceof z_?d.range:null,p=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:K1;let g=d.worker instanceof ol?d.worker:null;const y=d.verbosity,w=typeof d.docBaseUrl=="string"&&!cp(d.docBaseUrl)?d.docBaseUrl:null,A=typeof d.cMapUrl=="string"?d.cMapUrl:null,b=d.cMapPacked!==!1,C=d.CMapReaderFactory||eC,R=typeof d.standardFontDataUrl=="string"?d.standardFontDataUrl:null,k=d.StandardFontDataFactory||nC,F=d.stopAtErrors!==!0,D=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,I=d.isEvalSupported!==!1,H=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!an,j=typeof d.isChrome=="boolean"?d.isChrome:!pn.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),B=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,V=typeof d.disableFontFace=="boolean"?d.disableFontFace:an,Q=d.fontExtraProperties===!0,ne=d.enableXfa===!0,te=d.ownerDocument||globalThis.document,Ee=d.disableRange===!0,fe=d.disableStream===!0,he=d.disableAutoFetch===!0,we=d.pdfBug===!0,ge=d.CanvasFactory||Z1,K=d.FilterFactory||tC,U=d.enableHWA===!0,oe=f?f.length:d.length??NaN,J=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!an&&!V,M=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:C===w_&&k===E_&&A&&R&&Jc(A,document.baseURI)&&Jc(R,document.baseURI);d.canvasFactory&&aA("`canvasFactory`-instance option, please use `CanvasFactory` instead."),d.filterFactory&&aA("`filterFactory`-instance option, please use `FilterFactory` instead.");const $=null;jx(y);const le={canvasFactory:new ge({ownerDocument:te,enableHWA:U}),filterFactory:new K({docId:t,ownerDocument:te}),cMapReaderFactory:M?null:new C({baseUrl:A,isCompressed:b}),standardFontDataFactory:M?null:new k({baseUrl:R})};if(!g){const ve={verbosity:y,port:Vs.workerPort};g=ve.port?ol.fromPort(ve):new ol(ve),e._worker=g}const Ae={docId:t,apiVersion:"4.8.69",data:r,password:u,disableAutoFetch:he,rangeChunkSize:p,length:oe,docBaseUrl:w,enableXfa:ne,evaluatorOptions:{maxImageSize:D,disableFontFace:V,ignoreErrors:F,isEvalSupported:I,isOffscreenCanvasSupported:H,isChrome:j,canvasMaxAreaInBytes:B,fontExtraProperties:Q,useSystemFonts:J,cMapUrl:M?A:null,standardFontDataUrl:M?R:null}},ke={disableFontFace:V,fontExtraProperties:Q,ownerDocument:te,pdfBug:we,styleElement:$,loadingParams:{disableAutoFetch:he,enableXfa:ne}};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ve=g.messageHandler.sendWithPromise("GetDocRequest",Ae,r?[r.buffer]:null);let me;if(f)me=new P1(f,{disableRange:Ee,disableStream:fe});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Le;an?Le=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Jc(i)?wA:$1:Le=Jc(i)?wA:z1,me=new Le({url:i,length:oe,httpHeaders:o,withCredentials:c,rangeChunkSize:p,disableRange:Ee,disableStream:fe})}return ve.then(Le=>{if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Oe=new ru(t,Le,g.port),De=new cC(Oe,e,me,ke,le);e._transport=De,Oe.send("Ready",null)})}).catch(e._capability.reject),e}function sC(d){if(d instanceof URL)return d.href;try{return new URL(d,window.location).href}catch{if(an&&typeof d=="string")return d}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function rC(d){if(an&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return ap(d);if(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="object"&&!isNaN(d==null?void 0:d.length))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function AA(d){return typeof d=="object"&&Number.isInteger(d==null?void 0:d.num)&&d.num>=0&&Number.isInteger(d==null?void 0:d.gen)&&d.gen>=0}var qf;const Yf=class Yf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${un(Yf,qf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};qf=new WeakMap,x(Yf,qf,0);let tv=Yf,z_=class{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){nt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class oC{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return je(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Fr,ks,si,tl,pf;class aC{constructor(e,t,i,r=!1){x(this,si);x(this,Fr,null);x(this,ks,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new oA:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new j_,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:o=!1}={}){return new Ih({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return je(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=wr.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1}){var I,H;(I=this._stats)==null||I.time("Overall");const w=this._transport.getRenderingIntent(i,r,g,y),{renderingIntent:A,cacheKey:b}=w;_(this,ks,!1),E(this,si,pf).call(this),u||(u=this._transport.getOptionalContentConfig(A));let C=this._intentStates.get(b);C||(C=Object.create(null),this._intentStates.set(b,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const R=!!(A&$n.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(H=this._stats)==null||H.time("Page Request"),this._pumpOperatorList(w));const k=j=>{var B;C.renderTasks.delete(F),(this._maybeCleanupAfterRender||R)&&_(this,ks,!0),E(this,si,tl).call(this,!R),j?(F.capability.reject(j),this._abortOperatorList({intentState:C,reason:j instanceof Error?j:new Error(j)})):F.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},F=new iv({callback:k,params:{canvasContext:e,viewport:t,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:p});(C.renderTasks||(C.renderTasks=new Set)).add(F);const D=F.task;return Promise.all([C.displayReadyCapability.promise,u]).then(([j,B])=>{var V;if(this.destroyed){k();return}if((V=this._stats)==null||V.time("Rendering"),!(B.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");F.initializeGraphics({transparency:j,optionalContentConfig:B}),F.operatorListChanged()}).catch(k),D}getOperatorList({intent:e="display",annotationMode:t=wr.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var p;function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(f))}const c=this._transport.getRenderingIntent(e,t,i,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let f;return u.opListReadCapability||(f=Object.create(null),f.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(f),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>vu.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function o(){c.read().then(function({value:f,done:p}){if(p){i(u);return}u.lang??(u.lang=f.lang),Object.assign(u.styles,f.styles),u.items.push(...f.items),o()},r)}const c=t.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),_(this,ks,!1),E(this,si,pf).call(this),Promise.all(e)}cleanup(e=!1){_(this,ks,!0);const t=E(this,si,tl).call(this,!1);return e&&t&&this._stats&&(this._stats=new oA),t}_startRenderPage(e,t){var r,o;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=i.displayReadyCapability)==null||o.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&E(this,si,tl).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:o,transfer:c}=i,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:r},c).getReader(),p=this._intentStates.get(t);p.streamReader=f;const g=()=>{f.read().then(({value:y,done:w})=>{if(w){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const w of p.renderTasks)w.operatorListChanged();E(this,si,tl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Gv){let r=Q1;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new ba(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Fr=new WeakMap,ks=new WeakMap,si=new WeakSet,tl=function(e=!1){if(E(this,si,pf).call(this),!l(this,ks)||this.destroyed)return!1;if(e)return _(this,Fr,setTimeout(()=>{_(this,Fr,null),E(this,si,tl).call(this,!1)},J1)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_(this,ks,!1),!0},pf=function(){l(this,Fr)&&(clearTimeout(l(this,Fr)),_(this,Fr,null))};var Ts,Kf;class lC{constructor(){x(this,Ts,new Map);x(this,Kf,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};l(this,Kf).then(()=>{for(const[r]of l(this,Ts))r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:o}=i;if(o.aborted){Ie("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(e,t);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}l(this,Ts).set(t,r)}removeEventListener(e,t){const i=l(this,Ts).get(t);i==null||i(),l(this,Ts).delete(t)}terminate(){for(const[,e]of l(this,Ts))e==null||e();l(this,Ts).clear()}}Ts=new WeakMap,Kf=new WeakMap;var Qf,Go,Xo,Ml,gf,Il,mf;const rt=class rt{constructor({name:e=null,port:t=null,verbosity:i=Hx()}={}){x(this,Ml);var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=l(rt,Xo))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(rt,Xo)||_(rt,Xo,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return an?Promise.all([qr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ru("main","worker",e),this._messageHandler.on("ready",function(){}),E(this,Ml,gf).call(this)}_initialize(){if(l(rt,Go)||l(rt,Il,mf)){this._setupFakeWorker();return}let{workerSrc:e}=rt;try{rt._isSameOrigin(window.location.href,e)||(e=rt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new ru("main","worker",t),r=()=>{o.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),i.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}this._messageHandler=i,this._port=t,this._webWorker=t,E(this,Ml,gf).call(this)}),i.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};c();return}catch{rp("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(rt,Go)||(Ie("Setting up fake worker."),_(rt,Go,!0)),rt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new lC;this._port=t;const i=`fake${un(rt,Qf)._++}`,r=new ru(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new ru(i,i+"_worker",t),E(this,Ml,gf).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(rt,Xo))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=l(this,Xo))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new rt(e)}static get workerSrc(){if(Vs.workerSrc)return Vs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return je(this,"_setupFakeWorkerGlobal",(async()=>l(this,Il,mf)?l(this,Il,mf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Qf=new WeakMap,Go=new WeakMap,Xo=new WeakMap,Ml=new WeakSet,gf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Il=new WeakSet,mf=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},x(rt,Il),x(rt,Qf,0),x(rt,Go,!1),x(rt,Xo),an&&(_(rt,Go,!0),Vs.workerSrc||(Vs.workerSrc="./pdf.worker.mjs")),rt._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(t,i);return i.origin===r.origin},rt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let ol=rt;var Rs,Qi,Dl,Fl,Ji,qo,ou;class cC{constructor(e,t,i,r,o){x(this,qo);x(this,Rs,new Map);x(this,Qi,new Map);x(this,Dl,new Map);x(this,Fl,new Map);x(this,Ji,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new j_,this.fontLoader=new o1({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return je(this,"annotationStorage",new Kv)}getRenderingIntent(e,t=wr.ENABLE,i=null,r=!1,o=!1){let c=$n.DISPLAY,u=$m;switch(e){case"any":c=$n.ANY;break;case"display":break;case"print":c=$n.PRINT;break;default:Ie(`getRenderingIntent - invalid intent: ${e}`)}const f=c&$n.PRINT&&i instanceof m_?i:this.annotationStorage;switch(t){case wr.DISABLE:c+=$n.ANNOTATIONS_DISABLE;break;case wr.ENABLE:break;case wr.ENABLE_FORMS:c+=$n.ANNOTATIONS_FORMS;break;case wr.ENABLE_STORAGE:c+=$n.ANNOTATIONS_STORAGE,u=f.serializable;break;default:Ie(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(c+=$n.IS_EDITING),o&&(c+=$n.OPLIST);const{ids:p,hash:g}=f.modifiedIds,y=[c,u.hash,g];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:p}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=l(this,Ji))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of l(this,Qi).values())e.push(r._destroy());l(this,Qi).clear(),l(this,Dl).clear(),l(this,Fl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Rs).clear(),this.filterFactory.destroy(),Jm.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new ba("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{Lt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){r.close();return}Lt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",async i=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this._fullReader;return(!r||!o)&&(this._lastProgress&&((u=t.onProgress)==null||u.call(t,this._lastProgress)),this._fullReader.onProgress=f=>{var p;(p=t.onProgress)==null||p.call(t,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),e.on("GetRangeReader",(i,r)=>{Lt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){r.close();return}Lt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new oC(i,this))}),e.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new _m(i.message,i.code);break;case"InvalidPDFException":r=new UA(i.message);break;case"MissingPDFException":r=new Ea(i.message);break;case"UnexpectedResponseException":r=new op(i.message,i.status);break;case"UnknownErrorException":r=new Sm(i.message,i.details);break;default:nt("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",i=>{if(_(this,Ji,Promise.withResolvers()),t.onPassword){const r=o=>{o instanceof Error?l(this,Ji).reject(o):l(this,Ji).resolve({password:o})};try{t.onPassword(r,i.code)}catch(o){l(this,Ji).reject(o)}}else l(this,Ji).reject(new _m(i.message,i.code));return l(this,Ji).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;l(this,Qi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,o])=>{var c;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:u,fontExtraProperties:f,pdfBug:p}=this._params;if("error"in o){const A=o.error;Ie(`Error during font loading: ${A}`),this.commonObjs.resolve(i,A);break}const g=p&&((c=globalThis.FontInspector)!=null&&c.enabled)?(A,b)=>globalThis.FontInspector.fontAdded(A,b):null,y=new a1(o,{disableFontFace:u,inspectFont:g});this.fontLoader.bind(y).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!f&&y.data&&(y.data=null),this.commonObjs.resolve(i,y)});break;case"CopyLocalImage":const{imageRef:w}=o;Lt(w,"The imageRef must be defined.");for(const A of l(this,Qi).values())for(const[,b]of A.objs)if((b==null?void 0:b.ref)===w)return b.dataLen?(this.commonObjs.resolve(i,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,o,c])=>{var f;if(this.destroyed)return;const u=l(this,Qi).get(r);if(!u.objs.has(i)){if(u._intentStates.size===0){(f=c==null?void 0:c.bitmap)==null||f.close();return}switch(o){case"Image":u.objs.resolve(i,c),(c==null?void 0:c.dataLen)>Fx&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Ie("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=l(this,Dl).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&l(this,Fl).set(o.refStr,e);const c=new aC(t,o,this,this._params.pdfBug);return l(this,Qi).set(t,c),c});return l(this,Dl).set(t,r),r}getPageIndex(e){return AA(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return E(this,qo,ou).call(this,"GetFieldObjects")}hasJSActions(){return E(this,qo,ou).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,qo,ou).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return E(this,qo,ou).call(this,"GetOptionalContentConfig").then(t=>new R1(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Rs).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var o,c;return{info:r[0],metadata:r[1]?new k1(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return l(this,Rs).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Qi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Rs).clear(),this.filterFactory.destroy(!0),Jm.cleanup()}}cachedPageNumber(e){if(!AA(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Fl).get(t)??null}}Rs=new WeakMap,Qi=new WeakMap,Dl=new WeakMap,Fl=new WeakMap,Ji=new WeakMap,qo=new WeakSet,ou=function(e,t=null){const i=l(this,Rs).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return l(this,Rs).set(e,r),r};const ef=Symbol("INITIAL_DATA");var Ei,eh,nv;class j_{constructor(){x(this,eh);x(this,Ei,Object.create(null))}get(e,t=null){if(t){const r=E(this,eh,nv).call(this,e);return r.promise.then(()=>t(r.data)),null}const i=l(this,Ei)[e];if(!i||i.data===ef)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=l(this,Ei)[e];return!!t&&t.data!==ef}resolve(e,t=null){const i=E(this,eh,nv).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in l(this,Ei)){const{data:i}=l(this,Ei)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}_(this,Ei,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,Ei)){const{data:t}=l(this,Ei)[e];t!==ef&&(yield[e,t])}}}Ei=new WeakMap,eh=new WeakSet,nv=function(e){var t;return(t=l(this,Ei))[e]||(t[e]={...Promise.withResolvers(),data:ef})};var Nr;class uC{constructor(e){x(this,Nr,null);_(this,Nr,e),this.onContinue=null}get promise(){return l(this,Nr).capability.promise}cancel(e=0){l(this,Nr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,Nr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,Nr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Nr=new WeakMap;var Or,Yo;const Ao=class Ao{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:w=null}){x(this,Or,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=y,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new uC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var u,f;if(this.cancelled)return;if(this._canvas){if(l(Ao,Yo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Ao,Yo).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:o,background:c}=this.params;this.gfx=new rl(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:e,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),l(this,Or)&&(window.cancelAnimationFrame(l(this,Or)),_(this,Or,null)),l(Ao,Yo).delete(this._canvas),this.callback(e||new Gv(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?_(this,Or,window.requestAnimationFrame(()=>{_(this,Or,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Ao,Yo).delete(this._canvas),this.callback())))}};Or=new WeakMap,Yo=new WeakMap,x(Ao,Yo,new WeakSet);let iv=Ao;const hC="4.8.69",dC="3634dab10";function _A(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function Qc(d){return Math.max(0,Math.min(255,255*d))}class SA{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Qc(e),[e,e,e]}static G_HTML([e]){const t=_A(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Qc)}static RGB_HTML(e){return`#${e.map(_A).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[Qc(1-Math.min(1,e+r)),Qc(1-Math.min(1,i+r)),Qc(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,o=1-t,c=1-i,u=Math.min(r,o,c);return["CMYK",r,o,c,u]}}class fC{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){nt("Abstract method `_createSVG` called.")}}class ty extends fC{_createSVG(e){return document.createElementNS(vs,e)}}class H_{static setupStorage(e,t,i,r,o){const c=r.getValue(t,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(e.textContent=c.value),o==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?e.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",u=>{r.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&e.setAttribute("value",c.value),o==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})})}break;case"select":if(c.value!==null){e.setAttribute("value",c.value);for(const u of i.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const f=u.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;r.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:o}){const{attributes:c}=t,u=e instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[f,p]of Object.entries(c))if(p!=null)switch(f){case"class":p.length&&e.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!u||f!=="href"&&f!=="newWindow")&&e.setAttribute(f,p)}u&&o.addLinkAttributes(e,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(e,c.dataId,t,i)}static render(e){var y,w;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,o=e.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:i});const u=o!=="richText",f=e.div;if(f.append(c),e.viewport){const A=`matrix(${e.viewport.transform.join(",")})`;f.style.transform=A}u&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const A=document.createTextNode(r.value);c.append(A),u&&vu.shouldBuildText(r.name)&&p.push(A)}return{textDivs:p}}const g=[[r,-1,c]];for(;g.length>0;){const[A,b,C]=g.at(-1);if(b+1===A.children.length){g.pop();continue}const R=A.children[++g.at(-1)[1]];if(R===null)continue;const{name:k}=R;if(k==="#text"){const D=document.createTextNode(R.value);p.push(D),C.append(D);continue}const F=(y=R==null?void 0:R.attributes)!=null&&y.xmlns?document.createElementNS(R.attributes.xmlns,k):document.createElement(k);if(C.append(F),R.attributes&&this.setAttributes({html:F,element:R,storage:t,intent:o,linkService:i}),((w=R.children)==null?void 0:w.length)>0)g.push([R,-1,F]);else if(R.value){const D=document.createTextNode(R.value);u&&vu.shouldBuildText(k)&&p.push(D),F.append(D)}}for(const A of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Fh=1e3,pC=9,wa=new WeakSet;function Ws(d){return{width:d[2]-d[0],height:d[3]-d[1]}}class gC{static create(e){switch(e.data.annotationType){case kt.LINK:return new B_(e);case kt.TEXT:return new mC(e);case kt.WIDGET:switch(e.data.fieldType){case"Tx":return new vC(e);case"Btn":return e.data.radioButton?new V_(e):e.data.checkBox?new wC(e):new AC(e);case"Ch":return new _C(e);case"Sig":return new yC(e)}return new xa(e);case kt.POPUP:return new rv(e);case kt.FREETEXT:return new Y_(e);case kt.LINE:return new EC(e);case kt.SQUARE:return new bC(e);case kt.CIRCLE:return new xC(e);case kt.POLYLINE:return new K_(e);case kt.CARET:return new kC(e);case kt.INK:return new ny(e);case kt.POLYGON:return new CC(e);case kt.HIGHLIGHT:return new Q_(e);case kt.UNDERLINE:return new TC(e);case kt.SQUIGGLY:return new RC(e);case kt.STRIKEOUT:return new PC(e);case kt.STAMP:return new J_(e);case kt.FILEATTACHMENT:return new LC(e);default:return new wt(e)}}}var Ko,Nl,Ol,th,sv;const ly=class ly{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){x(this,th);x(this,Ko,null);x(this,Nl,!1);x(this,Ol,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ly._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;l(this,Ko)||_(this,Ko,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&E(this,th,sv).call(this,t),(i=l(this,Ol))==null||i.popup.updateEdited(e)}resetEdited(){var e;l(this,Ko)&&(E(this,th,sv).call(this,l(this,Ko).rect),(e=l(this,Ol))==null||e.popup.resetEdited(),_(this,Ko,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof xa||(o.tabIndex=Fh);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof rv){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,o),o}const{width:u,height:f}=Ws(t.rect);if(!e&&t.borderStyle.width>0){c.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,R=t.borderStyle.verticalCornerRadius;if(C>0||R>0){const F=`calc(${C}px * var(--scale-factor)) / calc(${R}px * var(--scale-factor))`;c.borderRadius=F}else if(this instanceof V_){const F=`calc(${u}px * var(--scale-factor)) / calc(${f}px * var(--scale-factor))`;c.borderRadius=F}switch(t.borderStyle.style){case Yc.SOLID:c.borderStyle="solid";break;case Yc.DASHED:c.borderStyle="dashed";break;case Yc.BEVELED:Ie("Unimplemented border style: beveled");break;case Yc.INSET:Ie("Unimplemented border style: inset");break;case Yc.UNDERLINE:c.borderBottomStyle="solid";break}const k=t.borderColor||null;k?(_(this,Nl,!0),c.borderColor=pe.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):c.borderWidth=0}const p=pe.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:g,pageHeight:y,pageX:w,pageY:A}=r.rawDims;c.left=`${100*(p[0]-w)/g}%`,c.top=`${100*(p[1]-A)/y}%`;const{rotation:b}=t;return t.hasOwnCanvas||b===0?(c.width=`${100*u/g}%`,c.height=`${100*f/y}%`):this.setRotation(b,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:c}=Ws(this.data.rect);let u,f;e%180===0?(u=100*o/i,f=100*c/r):(u=100*c/i,f=100*o/r),t.style.width=`${u}%`,t.style.height=`${f}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const o=r.detail[t],c=o[0],u=o.slice(1);r.target.style[i]=SA[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:SA[`${c}_rgb`](u)})};return je(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const o=e[r]||i[r];o==null||o(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,o]of Object.entries(t)){const c=i[r];if(c){const u={detail:{[r]:o},target:e};c(u),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,o]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,R,k,F]=e.subarray(2,6);if(r===C&&o===R&&t===k&&i===F)return}const{style:c}=this.container;let u;if(l(this,Nl)){const{borderColor:C,borderWidth:R}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${R}">`],this.container.classList.add("hasBorder")}const f=r-t,p=o-i,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const w=g.createElement("defs");y.append(w);const A=g.createElement("clipPath"),b=`clippath_${this.data.id}`;A.setAttribute("id",b),A.setAttribute("clipPathUnits","objectBoundingBox"),w.append(A);for(let C=2,R=e.length;C<R;C+=8){const k=e[C],F=e[C+1],D=e[C+2],I=e[C+3],H=g.createElement("rect"),j=(D-t)/f,B=(o-F)/p,V=(k-D)/f,Q=(F-I)/p;H.setAttribute("x",j),H.setAttribute("y",B),H.setAttribute("width",V),H.setAttribute("height",Q),A.append(H),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${B}" width="${V}" height="${Q}"/>`)}l(this,Nl)&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:e}=this,t=_(this,Ol,new rv({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){nt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:o,id:c,exportValues:u}of r){if(o===-1||c===t)continue;const f=typeof u=="string"?u:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!wa.has(p)){Ie(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:f,domElement:p})}return i}for(const r of document.getElementsByName(e)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==t&&wa.has(r)&&i.push({id:c,exportValue:o,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Ko=new WeakMap,Nl=new WeakMap,Ol=new WeakMap,th=new WeakSet,sv=function(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:f}}}}=this;i==null||i.splice(0,4,...e);const{width:p,height:g}=Ws(e);t.left=`${100*(e[0]-u)/o}%`,t.top=`${100*(c-e[3]+f)/c}%`,r===0?(t.width=`${100*p/o}%`,t.height=`${100*g/c}%`):this.setRotation(r)};let wt=ly;var Vn,go,U_,$_;class B_ extends wt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});x(this,Vn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let o=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(r,t.action),o=!0):t.attachment?(E(this,Vn,U_).call(this,r,t.attachment,t.attachmentDest),o=!0):t.setOCGState?(E(this,Vn,$_).call(this,r,t.setOCGState),o=!0):t.dest?(this._bindLink(r,t.dest),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),o=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(r),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&E(this,Vn,go).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),E(this,Vn,go).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(i.actions)){const c=r.get(o);c&&(t[c]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:o}}),!1})}t.onclick||(t.onclick=()=>!1),E(this,Vn,go).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),E(this,Vn,go).call(this),!this._fieldObjects){Ie('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var y;r==null||r();const{fields:o,refs:c,include:u}=i,f=[];if(o.length!==0||c.length!==0){const w=new Set(c);for(const A of o){const b=this._fieldObjects[A]||[];for(const{id:C}of b)w.add(C)}for(const A of Object.values(this._fieldObjects))for(const b of A)w.has(b.id)===u&&f.push(b)}else for(const w of Object.values(this._fieldObjects))f.push(...w);const p=this.annotationStorage,g=[];for(const w of f){const{id:A}=w;switch(g.push(A),w.type){case"text":{const C=w.defaultValue||"";p.setValue(A,{value:C});break}case"checkbox":case"radiobutton":{const C=w.defaultValue===w.exportValues;p.setValue(A,{value:C});break}case"combobox":case"listbox":{const C=w.defaultValue||"";p.setValue(A,{value:C});break}default:continue}const b=document.querySelector(`[data-element-id="${A}"]`);if(b){if(!wa.has(b)){Ie(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}Vn=new WeakSet,go=function(){this.container.setAttribute("data-internal-link","")},U_=function(t,i,r=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,r),!1},E(this,Vn,go).call(this)},$_=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),E(this,Vn,go).call(this)};class mC extends wt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class xa extends wt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return pn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,o){i.includes("mouse")?e.addEventListener(i,c=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):e.addEventListener(i,c=>{var u;if(i==="blur"){if(!t.focused||!c.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}o&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}}))})}_setEventListeners(e,t,i,r){var o,c,u;for(const[f,p]of i)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,f,p,r),p==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(e,t,"blur","Blur",null):p==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":pe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||pC,o=e.style;let c;const u=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u),g=Math.round(p/(hm*r))||1,y=p/g;c=Math.min(r,f(y/hm))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,f(p/hm))}o.fontSize=`calc(${c}px * var(--scale-factor))`,o.color=pe.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class vC extends xa{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const o=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[t]=i),o.setValue(c.id,{[r]:i})}render(){var r,o;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const c=e.getValue(t,{value:this.data.fieldValue});let u=c.value||"";const f=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;f&&u.length>f&&(u=u.slice(0,f));let p=c.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:u,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=p??u,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",p??u),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),wa.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Fh,this._setRequired(i,this.data.required),f&&(i.maxLength=f),i.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),g.formattedValue=null}),i.addEventListener("resetform",w=>{const A=this.data.defaultFieldValue??"";i.value=g.userValue=A,g.formattedValue=null});let y=w=>{const{formattedValue:A}=g;A!=null&&(w.target.value=A),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",A=>{var C;if(g.focused)return;const{target:b}=A;g.userValue&&(b.value=g.userValue),g.lastCommittedValue=b.value,g.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(g.focused=!0)}),i.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const b={value(C){g.userValue=C.detail.value??"",e.setValue(t,{value:g.userValue.toString()}),C.target.value=g.userValue},formattedValue(C){const{formattedValue:R}=C.detail;g.formattedValue=R,R!=null&&C.target!==document.activeElement&&(C.target.value=R),e.setValue(t,{formattedValue:R})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var D;const{charLimit:R}=C.detail,{target:k}=C;if(R===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",R);let F=g.userValue;!F||F.length<=R||(F=F.slice(0,R),k.value=g.userValue=F,e.setValue(t,{value:F}),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:F,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(b,A)}),i.addEventListener("keydown",A=>{var R;g.commitKey=1;let b=-1;if(A.key==="Escape"?b=0:A.key==="Enter"&&!this.data.multiLine?b=2:A.key==="Tab"&&(g.commitKey=3),b===-1)return;const{value:C}=A.target;g.lastCommittedValue!==C&&(g.lastCommittedValue=C,g.userValue=C,(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:b,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const w=y;y=null,i.addEventListener("blur",A=>{var C,R;if(!g.focused||!A.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(g.focused=!1);const{value:b}=A.target;g.userValue=b,g.lastCommittedValue!==b&&((R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:g.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}})),w(A)}),(o=this.data.actions)!=null&&o.Keystroke&&i.addEventListener("beforeinput",A=>{var H;g.lastCommittedValue=null;const{data:b,target:C}=A,{value:R,selectionStart:k,selectionEnd:F}=C;let D=k,I=F;switch(A.inputType){case"deleteWordBackward":{const j=R.substring(0,k).match(/\w*[^\w]*$/);j&&(D-=j[0].length);break}case"deleteWordForward":{const j=R.substring(k).match(/^[^\w]*\w*/);j&&(I+=j[0].length);break}case"deleteContentBackward":k===F&&(D-=1);break;case"deleteContentForward":k===F&&(I+=1);break}A.preventDefault(),(H=this.linkService.eventBus)==null||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,change:b||"",willCommit:!1,selStart:D,selEnd:I}})}),this._setEventListeners(i,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/f;i.classList.add("comb"),i.style.letterSpacing=`calc(${A}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class yC extends xa{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class wC extends xa{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return wa.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=Fh,o.addEventListener("change",c=>{const{name:u,checked:f}=c.target;for(const p of this._getElementsByName(u,i)){const g=f&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}e.setValue(i,{value:f})}),o.addEventListener("resetform",c=>{const u=t.defaultFieldValue||"Off";c.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(f){f.target.checked=f.detail.value!=="Off",e.setValue(i,{value:f.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class V_ extends xa{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const c of this._getElementsByName(t.fieldName,i))e.setValue(c.id,{value:!1});const o=document.createElement("input");if(wa.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=Fh,o.addEventListener("change",c=>{const{name:u,checked:f}=c.target;for(const p of this._getElementsByName(u,i))e.setValue(p.id,{value:!1});e.setValue(i,{value:f})}),o.addEventListener("resetform",c=>{const u=t.defaultFieldValue;c.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const c=t.buttonValue;o.addEventListener("updatefromsandbox",u=>{const f={value:p=>{const g=c===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const w=g&&y.id===i;y.domElement&&(y.domElement.checked=w),e.setValue(y.id,{value:w})}}};this._dispatchEventFromSandbox(f,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class AC extends B_{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class _C extends xa{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");wa.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Fh;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,i.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let c=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),c=()=>{g.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=g=>{const y=g?"value":"textContent",{options:w,multiple:A}=r;return A?Array.prototype.filter.call(w,b=>b.selected).map(b=>b[y]):w.selectedIndex===-1?null:w[w.selectedIndex][y]};let f=u(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(w){c==null||c();const A=w.detail.value,b=new Set(Array.isArray(A)?A:[A]);for(const C of r.options)C.selected=b.has(C.value);e.setValue(t,{value:u(!0)}),f=u(!1)},multipleSelection(w){r.multiple=!0},remove(w){const A=r.options,b=w.detail.remove;A[b].selected=!1,r.remove(b),A.length>0&&Array.prototype.findIndex.call(A,R=>R.selected)===-1&&(A[0].selected=!0),e.setValue(t,{value:u(!0),items:p(w)}),f=u(!1)},clear(w){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),f=u(!1)},insert(w){const{index:A,displayValue:b,exportValue:C}=w.detail.insert,R=r.children[A],k=document.createElement("option");k.textContent=b,k.value=C,R?R.before(k):r.append(k),e.setValue(t,{value:u(!0),items:p(w)}),f=u(!1)},items(w){const{items:A}=w.detail;for(;r.length!==0;)r.remove(0);for(const b of A){const{displayValue:C,exportValue:R}=b,k=document.createElement("option");k.textContent=C,k.value=R,r.append(k)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:u(!0),items:p(w)}),f=u(!1)},indices(w){const A=new Set(w.detail.indices);for(const b of w.target.options)b.selected=A.has(b.index);e.setValue(t,{value:u(!0)}),f=u(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{var A;const y=u(!0),w=u(!1);e.setValue(t,{value:y}),g.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:f,change:w,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class rv extends wt{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:wt._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new SC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${Wv}${i}`).join(",")),this.container}}var zl,Jf,Zf,jl,Qo,ft,Ps,Hl,nh,ih,Bl,Ls,bi,Ms,sh,Is,rh,Jo,Zo,Ke,vf,ov,W_,G_,X_,q_,yf,wf,av;class SC{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:o,contentsObj:c,richText:u,parent:f,rect:p,parentRect:g,open:y}){x(this,Ke);x(this,zl,E(this,Ke,X_).bind(this));x(this,Jf,E(this,Ke,av).bind(this));x(this,Zf,E(this,Ke,wf).bind(this));x(this,jl,E(this,Ke,yf).bind(this));x(this,Qo,null);x(this,ft,null);x(this,Ps,null);x(this,Hl,null);x(this,nh,null);x(this,ih,null);x(this,Bl,null);x(this,Ls,!1);x(this,bi,null);x(this,Ms,null);x(this,sh,null);x(this,Is,null);x(this,rh,null);x(this,Jo,null);x(this,Zo,!1);var w;_(this,ft,e),_(this,rh,r),_(this,Ps,c),_(this,Is,u),_(this,ih,f),_(this,Qo,t),_(this,sh,p),_(this,Bl,g),_(this,nh,i),_(this,Hl,qv.toDateObject(o)),this.trigger=i.flatMap(A=>A.getElementsToTriggerPopup());for(const A of this.trigger)A.addEventListener("click",l(this,jl)),A.addEventListener("mouseenter",l(this,Zf)),A.addEventListener("mouseleave",l(this,Jf)),A.classList.add("popupTriggerArea");for(const A of i)(w=A.container)==null||w.addEventListener("keydown",l(this,zl));l(this,ft).hidden=!0,y&&E(this,Ke,yf).call(this)}render(){if(l(this,bi))return;const e=_(this,bi,document.createElement("div"));if(e.className="popup",l(this,Qo)){const o=e.style.outlineColor=pe.makeHexColor(...l(this,Qo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=pe.makeHexColor(...l(this,Qo).map(u=>Math.floor(.7*(255-u)+u)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=l(this,rh),e.append(t),l(this,Hl)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Hl).valueOf()})),t.append(o)}const r=l(this,Ke,vf);if(r)H_.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(l(this,Ps));e.append(o)}l(this,ft).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let o=0,c=r.length;o<c;++o){const u=r[o];i.append(document.createTextNode(u)),o<c-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;l(this,Jo)||_(this,Jo,{contentsObj:l(this,Ps),richText:l(this,Is)}),e&&_(this,Ms,null),t&&(_(this,Is,E(this,Ke,G_).call(this,t)),_(this,Ps,null)),(i=l(this,bi))==null||i.remove(),_(this,bi,null)}resetEdited(){var e;l(this,Jo)&&({contentsObj:un(this,Ps)._,richText:un(this,Is)._}=l(this,Jo),_(this,Jo,null),(e=l(this,bi))==null||e.remove(),_(this,bi,null),_(this,Ms,null))}forceHide(){_(this,Zo,this.isVisible),l(this,Zo)&&(l(this,ft).hidden=!0)}maybeShow(){l(this,Zo)&&(l(this,bi)||E(this,Ke,wf).call(this),_(this,Zo,!1),l(this,ft).hidden=!1)}get isVisible(){return l(this,ft).hidden===!1}}zl=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,jl=new WeakMap,Qo=new WeakMap,ft=new WeakMap,Ps=new WeakMap,Hl=new WeakMap,nh=new WeakMap,ih=new WeakMap,Bl=new WeakMap,Ls=new WeakMap,bi=new WeakMap,Ms=new WeakMap,sh=new WeakMap,Is=new WeakMap,rh=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,Ke=new WeakSet,vf=function(){const e=l(this,Is),t=l(this,Ps);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Is).html||null},ov=function(){var e,t,i;return((i=(t=(e=l(this,Ke,vf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},W_=function(){var e,t,i;return((i=(t=(e=l(this,Ke,vf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},G_=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:l(this,Ke,W_),fontSize:l(this,Ke,ov)?`calc(${l(this,Ke,ov)}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:r});return i},X_=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Ls))&&E(this,Ke,yf).call(this)},q_=function(){if(l(this,Ms)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:o}}}=l(this,ih);let c=!!l(this,Bl),u=c?l(this,Bl):l(this,sh);for(const b of l(this,nh))if(!u||pe.intersect(b.data.rect,u)!==null){u=b.data.rect,c=!0;break}const f=pe.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),g=c?u[2]-u[0]+5:0,y=f[0]+g,w=f[1];_(this,Ms,[100*(y-r)/t,100*(w-o)/i]);const{style:A}=l(this,ft);A.left=`${l(this,Ms)[0]}%`,A.top=`${l(this,Ms)[1]}%`},yf=function(){_(this,Ls,!l(this,Ls)),l(this,Ls)?(E(this,Ke,wf).call(this),l(this,ft).addEventListener("click",l(this,jl)),l(this,ft).addEventListener("keydown",l(this,zl))):(E(this,Ke,av).call(this),l(this,ft).removeEventListener("click",l(this,jl)),l(this,ft).removeEventListener("keydown",l(this,zl)))},wf=function(){l(this,bi)||this.render(),this.isVisible?l(this,Ls)&&l(this,ft).classList.add("focused"):(E(this,Ke,q_).call(this),l(this,ft).hidden=!1,l(this,ft).style.zIndex=parseInt(l(this,ft).style.zIndex)+1e3)},av=function(){l(this,ft).classList.remove("focused"),!(l(this,Ls)||!this.isVisible)&&(l(this,ft).hidden=!0,l(this,ft).style.zIndex=parseInt(l(this,ft).style.zIndex)-1e3)};class Y_ extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Pe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var oh;class EC extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,oh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:r}=Ws(t.rect),o=this.svgFactory.create(i,r,!0),c=_(this,oh,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),c.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),c.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),c.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),c.setAttribute("stroke-width",t.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,oh)}addHighlightArea(){this.container.classList.add("highlightArea")}}oh=new WeakMap;var ah;class bC extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,ah,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:r}=Ws(t.rect),o=this.svgFactory.create(i,r,!0),c=t.borderStyle.width,u=_(this,ah,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",c/2),u.setAttribute("y",c/2),u.setAttribute("width",i-c),u.setAttribute("height",r-c),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ah)}addHighlightArea(){this.container.classList.add("highlightArea")}}ah=new WeakMap;var lh;class xC extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,lh,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:r}=Ws(t.rect),o=this.svgFactory.create(i,r,!0),c=t.borderStyle.width,u=_(this,lh,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",i/2),u.setAttribute("cy",r/2),u.setAttribute("rx",i/2-c/2),u.setAttribute("ry",r/2-c/2),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,lh)}addHighlightArea(){this.container.classList.add("highlightArea")}}lh=new WeakMap;var ch;class K_ extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,ch,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:r,popupRef:o}}=this;if(!i)return this.container;const{width:c,height:u}=Ws(t),f=this.svgFactory.create(c,u,!0);let p=[];for(let y=0,w=i.length;y<w;y+=2){const A=i[y]-t[0],b=t[3]-i[y+1];p.push(`${A},${b}`)}p=p.join(" ");const g=_(this,ch,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",p),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),f.append(g),this.container.append(f),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ch)}addHighlightArea(){this.container.classList.add("highlightArea")}}ch=new WeakMap;class CC extends K_{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class kC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var uh;class ny extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,uh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Pe.HIGHLIGHT:Pe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:r,popupRef:o}}=this,{width:c,height:u}=Ws(t),f=this.svgFactory.create(c,u,!0);for(const p of i){let g=[];for(let w=0,A=p.length;w<A;w+=2){const b=p[w]-t[0],C=t[3]-p[w+1];g.push(`${b},${C}`)}g=g.join(" ");const y=this.svgFactory.createElement(this.svgElementName);l(this,uh).push(y),y.setAttribute("points",g),y.setAttribute("stroke-width",r.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),f.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return l(this,uh)}addHighlightArea(){this.container.classList.add("highlightArea")}}uh=new WeakMap;class Q_ extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Pe.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class TC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class RC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class PC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class J_ extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Pe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var hh,dh,lv;class LC extends wt{constructor(t){var r;super(t,{isRenderable:!0});x(this,dh);x(this,hh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,dh,lv).bind(this)),_(this,hh,r);const{isMac:o}=pn.platform;return t.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&E(this,dh,lv).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return l(this,hh)}addHighlightArea(){this.container.classList.add("highlightArea")}}hh=new WeakMap,dh=new WeakSet,lv=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var fh,ea,ta,ph,_a,Z_,cv,HA;let MC=(HA=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:u}){x(this,_a);x(this,fh,null);x(this,ea,null);x(this,ta,new Map);x(this,ph,null);this.div=e,_(this,fh,t),_(this,ea,i),_(this,ph,u||null),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return l(this,ta).size>0}async render(e){var c;const{annotations:t}=e,i=this.div;va(i,this.viewport);const r=new Map,o={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new ty,annotationStorage:e.annotationStorage||new Kv,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const f=u.annotationType===kt.POPUP;if(f){const y=r.get(u.id);if(!y)continue;o.elements=y}else{const{width:y,height:w}=Ws(u.rect);if(y<=0||w<=0)continue}o.data=u;const p=gC.create(o);if(!p.isRenderable)continue;if(!f&&u.popupRef){const y=r.get(u.popupRef);y?y.push(p):r.set(u.popupRef,[p])}const g=p.render();u.hidden&&(g.style.visibility="hidden"),await E(this,_a,Z_).call(this,g,u.id),p._isEditable&&(l(this,ta).set(p.data.id,p),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(p))}E(this,_a,cv).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,va(t,{rotation:e.rotation}),E(this,_a,cv).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,ta).values())}getEditableAnnotation(e){return l(this,ta).get(e)}},fh=new WeakMap,ea=new WeakMap,ta=new WeakMap,ph=new WeakMap,_a=new WeakSet,Z_=async function(e,t){var c,u;const i=e.firstChild||e,r=i.id=`${Wv}${t}`,o=await((c=l(this,ph))==null?void 0:c.getAriaAttributes(r));if(o)for(const[f,p]of o)i.setAttribute(f,p);this.div.append(e),(u=l(this,fh))==null||u.moveElementInDOM(this.div,e,i,!1)},cv=function(){if(!l(this,ea))return;const e=this.div;for(const[t,i]of l(this,ea)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i)}l(this,ea).clear()},HA);const tf=/\r\n?|\n/g;var xi,On,gh,na,zn,Et,eS,tS,nS,Af,Xs,_f,Sf,iS,hv,sS;const Ze=class Ze extends qe{constructor(t){super({...t,name:"freeTextEditor"});x(this,Et);x(this,xi);x(this,On,"");x(this,gh,`${this.id}-editor`);x(this,na,null);x(this,zn);_(this,xi,t.color||Ze._defaultColor||qe._defaultLineColor),_(this,zn,t.fontSize||Ze._defaultFontSize)}static get _keyboardManager(){const t=Ze.prototype,i=c=>c.isEmpty(),r=ya.TRANSLATE_SMALL,o=ya.TRANSLATE_BIG;return je(this,"_keyboardManager",new Dh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:i}]]))}static initialize(t,i){qe.initialize(t,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Ce.FREETEXT_SIZE:Ze._defaultFontSize=i;break;case Ce.FREETEXT_COLOR:Ze._defaultColor=i;break}}updateParams(t,i){switch(t){case Ce.FREETEXT_SIZE:E(this,Et,eS).call(this,i);break;case Ce.FREETEXT_COLOR:E(this,Et,tS).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ce.FREETEXT_SIZE,Ze._defaultFontSize],[Ce.FREETEXT_COLOR,Ze._defaultColor||qe._defaultLineColor]]}get propertiesToUpdate(){return[[Ce.FREETEXT_SIZE,l(this,zn)],[Ce.FREETEXT_COLOR,l(this,xi)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ze._internalPadding*t,-(Ze._internalPadding+l(this,zn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Pe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),_(this,na,new AbortController);const t=this._uiManager.combinedSignal(l(this,na));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,gh)),this._isDraggable=!0,(t=l(this,na))==null||t.abort(),_(this,na,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,On),i=_(this,On,E(this,Et,nS).call(this).trimEnd());if(t===i)return;const r=o=>{if(_(this,On,o),!o){this.remove();return}E(this,Et,Sf).call(this),this._uiManager.rebuild(this),E(this,Et,Af).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),E(this,Et,Af).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ze._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,gh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${l(this,zn)}px * var(--scale-factor))`,r.color=l(this,xi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Df(this,this.div,["dblclick","keydown"]),this.width){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[g,y]=this.pageDimensions,[w,A]=this.pageTranslation;let b,C;switch(this.rotation){case 0:b=t+(u[0]-w)/g,C=i+this.height-(u[1]-A)/y;break;case 90:b=t+(u[0]-w)/g,C=i-(u[1]-A)/y,[f,p]=[p,-f];break;case 180:b=t-this.width+(u[0]-w)/g,C=i-(u[1]-A)/y,[f,p]=[-f,-p];break;case 270:b=t+(u[0]-w-this.height*y)/g,C=i+(u[1]-A-this.width*g)/y,[f,p]=[-p,f];break}this.setAt(b*o,C*c,f,p)}else this.setAt(t*o,i*c,this.width*o,this.height*c);E(this,Et,Sf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var b,C,R;const i=t.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const o=E(b=Ze,Xs,hv).call(b,i.getData("text")||"").replaceAll(tf,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const u=c.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:f,startOffset:p}=u,g=[],y=[];if(f.nodeType===Node.TEXT_NODE){const k=f.parentElement;if(y.push(f.nodeValue.slice(p).replaceAll(tf,"")),k!==this.editorDiv){let F=g;for(const D of this.editorDiv.childNodes){if(D===k){F=y;continue}F.push(E(C=Ze,Xs,_f).call(C,D))}}g.push(f.nodeValue.slice(0,p).replaceAll(tf,""))}else if(f===this.editorDiv){let k=g,F=0;for(const D of this.editorDiv.childNodes)F++===p&&(k=y),k.push(E(R=Ze,Xs,_f).call(R,D))}_(this,On,`${g.join(`
`)}${o}${y.join(`
`)}`),E(this,Et,Sf).call(this);const w=new Range;let A=g.reduce((k,F)=>k+F.length,0);for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const F=k.nodeValue.length;if(A<=F){w.setStart(k,A),w.setEnd(k,A);break}A-=F}c.removeAllRanges(),c.addRange(w)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,r){var u;let o=null;if(t instanceof Y_){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:g,rotation:y,id:w,popupRef:A},textContent:b,textPosition:C,parent:{page:{pageNumber:R}}}=t;if(!b||b.length===0)return null;o=t={annotationType:Pe.FREETEXT,color:Array.from(p),fontSize:f,value:b.join(`
`),position:C,pageIndex:R-1,rect:g.slice(0),rotation:y,id:w,deleted:!1,popupRef:A}}const c=await super.deserialize(t,i,r);return _(c,zn,t.fontSize),_(c,xi,pe.makeHexColor(...t.color)),_(c,On,E(u=Ze,Xs,hv).call(u,t.value)),c.annotationElementId=t.id||null,c._initialData=o,c}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Ze._internalPadding*this.parentScale,r=this.getRect(i,i),o=qe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,xi)),c={annotationType:Pe.FREETEXT,color:o,fontSize:l(this,zn),value:E(this,Et,iS).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?c:this.annotationElementId&&!E(this,Et,sS).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${l(this,zn)}px * var(--scale-factor))`,r.color=l(this,xi),i.replaceChildren();for(const c of l(this,On).split(`
`)){const u=document.createElement("div");u.append(c?document.createTextNode(c):document.createElement("br")),i.append(u)}const o=Ze._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(o,o),popupContent:l(this,On)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};xi=new WeakMap,On=new WeakMap,gh=new WeakMap,na=new WeakMap,zn=new WeakMap,Et=new WeakSet,eS=function(t){const i=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-l(this,zn))*this.parentScale),_(this,zn,o),E(this,Et,Af).call(this)},r=l(this,zn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},tS=function(t){const i=o=>{_(this,xi,this.editorDiv.style.color=o)},r=l(this,xi);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},nS=function(){var r;const t=[];this.editorDiv.normalize();let i=null;for(const o of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(t.push(E(r=Ze,Xs,_f).call(r,o)),i=o);return t.join(`
`)},Af=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,u=c.style.display,f=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),r=c.getBoundingClientRect(),c.remove(),c.style.display=u,c.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},Xs=new WeakSet,_f=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(tf,"")},Sf=function(){if(this.editorDiv.replaceChildren(),!!l(this,On))for(const t of l(this,On).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},iS=function(){return l(this,On).replaceAll(" "," ")},hv=function(t){return t.replaceAll(" "," ")},sS=function(t){const{value:i,fontSize:r,color:o,pageIndex:c}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==r||t.color.some((u,f)=>u!==o[f])||t.pageIndex!==c},x(Ze,Xs),xe(Ze,"_freeTextDefaultContent",""),xe(Ze,"_internalPadding",0),xe(Ze,"_defaultColor",null),xe(Ze,"_defaultFontSize",10),xe(Ze,"_type","freetext"),xe(Ze,"_editorType",Pe.FREETEXT);let uv=Ze;class rS{toSVGPath(){nt("Abstract method `toSVGPath` must be implemented.")}get box(){nt("Abstract getter `box` must be implemented.")}serialize(e,t){nt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){nt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){nt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var jn,Ci,Ul,$l,Zi,Ne,ia,sa,mh,vh,Vl,Wl,zr,yh,ep,tp,Mt,au,oS,aS,lS,cS,uS,hS;const ws=class ws{constructor({x:e,y:t},i,r,o,c,u=0){x(this,Mt);x(this,jn);x(this,Ci,[]);x(this,Ul);x(this,$l);x(this,Zi,[]);x(this,Ne,new Float64Array(18));x(this,ia);x(this,sa);x(this,mh);x(this,vh);x(this,Vl);x(this,Wl);x(this,zr,[]);_(this,jn,i),_(this,Wl,o*r),_(this,$l,c),l(this,Ne).set([NaN,NaN,NaN,NaN,e,t],6),_(this,Ul,u),_(this,vh,l(ws,yh)*r),_(this,mh,l(ws,tp)*r),_(this,Vl,r),l(this,zr).push(e,t)}isEmpty(){return isNaN(l(this,Ne)[8])}add({x:e,y:t}){var Q;_(this,ia,e),_(this,sa,t);const[i,r,o,c]=l(this,jn);let[u,f,p,g]=l(this,Ne).subarray(8,12);const y=e-p,w=t-g,A=Math.hypot(y,w);if(A<l(this,mh))return!1;const b=A-l(this,vh),C=b/A,R=C*y,k=C*w;let F=u,D=f;u=p,f=g,p+=R,g+=k,(Q=l(this,zr))==null||Q.push(e,t);const I=-k/b,H=R/b,j=I*l(this,Wl),B=H*l(this,Wl);return l(this,Ne).set(l(this,Ne).subarray(2,8),0),l(this,Ne).set([p+j,g+B],4),l(this,Ne).set(l(this,Ne).subarray(14,18),12),l(this,Ne).set([p-j,g-B],16),isNaN(l(this,Ne)[6])?(l(this,Zi).length===0&&(l(this,Ne).set([u+j,f+B],2),l(this,Zi).push(NaN,NaN,NaN,NaN,(u+j-i)/o,(f+B-r)/c),l(this,Ne).set([u-j,f-B],14),l(this,Ci).push(NaN,NaN,NaN,NaN,(u-j-i)/o,(f-B-r)/c)),l(this,Ne).set([F,D,u,f,p,g],6),!this.isEmpty()):(l(this,Ne).set([F,D,u,f,p,g],6),Math.abs(Math.atan2(D-f,F-u)-Math.atan2(k,R))<Math.PI/2?([u,f,p,g]=l(this,Ne).subarray(2,6),l(this,Zi).push(NaN,NaN,NaN,NaN,((u+p)/2-i)/o,((f+g)/2-r)/c),[u,f,F,D]=l(this,Ne).subarray(14,18),l(this,Ci).push(NaN,NaN,NaN,NaN,((F+u)/2-i)/o,((D+f)/2-r)/c),!0):([F,D,u,f,p,g]=l(this,Ne).subarray(0,6),l(this,Zi).push(((F+5*u)/6-i)/o,((D+5*f)/6-r)/c,((5*u+p)/6-i)/o,((5*f+g)/6-r)/c,((u+p)/2-i)/o,((f+g)/2-r)/c),[p,g,u,f,F,D]=l(this,Ne).subarray(12,18),l(this,Ci).push(((F+5*u)/6-i)/o,((D+5*f)/6-r)/c,((5*u+p)/6-i)/o,((5*f+g)/6-r)/c,((u+p)/2-i)/o,((f+g)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Zi),t=l(this,Ci);if(isNaN(l(this,Ne)[6])&&!this.isEmpty())return E(this,Mt,oS).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);E(this,Mt,lS).call(this,i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return E(this,Mt,aS).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,r,o,c){return new dS(e,t,i,r,o,c)}getOutlines(){var y;const e=l(this,Zi),t=l(this,Ci),i=l(this,Ne),[r,o,c,u]=l(this,jn),f=new Float64Array((((y=l(this,zr))==null?void 0:y.length)??0)+2);for(let w=0,A=f.length-2;w<A;w+=2)f[w]=(l(this,zr)[w]-r)/c,f[w+1]=(l(this,zr)[w+1]-o)/u;if(f[f.length-2]=(l(this,ia)-r)/c,f[f.length-1]=(l(this,sa)-o)/u,isNaN(i[6])&&!this.isEmpty())return E(this,Mt,cS).call(this,f);const p=new Float64Array(l(this,Zi).length+24+l(this,Ci).length);let g=e.length;for(let w=0;w<g;w+=2){if(isNaN(e[w])){p[w]=p[w+1]=NaN;continue}p[w]=e[w],p[w+1]=e[w+1]}g=E(this,Mt,hS).call(this,p,g);for(let w=t.length-6;w>=6;w-=6)for(let A=0;A<6;A+=2){if(isNaN(t[w+A])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=t[w+A],p[g+1]=t[w+A+1],g+=2}return E(this,Mt,uS).call(this,p,g),this.newFreeDrawOutline(p,f,l(this,jn),l(this,Vl),l(this,Ul),l(this,$l))}};jn=new WeakMap,Ci=new WeakMap,Ul=new WeakMap,$l=new WeakMap,Zi=new WeakMap,Ne=new WeakMap,ia=new WeakMap,sa=new WeakMap,mh=new WeakMap,vh=new WeakMap,Vl=new WeakMap,Wl=new WeakMap,zr=new WeakMap,yh=new WeakMap,ep=new WeakMap,tp=new WeakMap,Mt=new WeakSet,au=function(){const e=l(this,Ne).subarray(4,6),t=l(this,Ne).subarray(16,18),[i,r,o,c]=l(this,jn);return[(l(this,ia)+(e[0]-t[0])/2-i)/o,(l(this,sa)+(e[1]-t[1])/2-r)/c,(l(this,ia)+(t[0]-e[0])/2-i)/o,(l(this,sa)+(t[1]-e[1])/2-r)/c]},oS=function(){const[e,t,i,r]=l(this,jn),[o,c,u,f]=E(this,Mt,au).call(this);return`M${(l(this,Ne)[2]-e)/i} ${(l(this,Ne)[3]-t)/r} L${(l(this,Ne)[4]-e)/i} ${(l(this,Ne)[5]-t)/r} L${o} ${c} L${u} ${f} L${(l(this,Ne)[16]-e)/i} ${(l(this,Ne)[17]-t)/r} L${(l(this,Ne)[14]-e)/i} ${(l(this,Ne)[15]-t)/r} Z`},aS=function(e){const t=l(this,Ci);e.push(`L${t[4]} ${t[5]} Z`)},lS=function(e){const[t,i,r,o]=l(this,jn),c=l(this,Ne).subarray(4,6),u=l(this,Ne).subarray(16,18),[f,p,g,y]=E(this,Mt,au).call(this);e.push(`L${(c[0]-t)/r} ${(c[1]-i)/o} L${f} ${p} L${g} ${y} L${(u[0]-t)/r} ${(u[1]-i)/o}`)},cS=function(e){const t=l(this,Ne),[i,r,o,c]=l(this,jn),[u,f,p,g]=E(this,Mt,au).call(this),y=new Float64Array(36);return y.set([NaN,NaN,NaN,NaN,(t[2]-i)/o,(t[3]-r)/c,NaN,NaN,NaN,NaN,(t[4]-i)/o,(t[5]-r)/c,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(t[16]-i)/o,(t[17]-r)/c,NaN,NaN,NaN,NaN,(t[14]-i)/o,(t[15]-r)/c],0),this.newFreeDrawOutline(y,e,l(this,jn),l(this,Vl),l(this,Ul),l(this,$l))},uS=function(e,t){const i=l(this,Ci);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},hS=function(e,t){const i=l(this,Ne).subarray(4,6),r=l(this,Ne).subarray(16,18),[o,c,u,f]=l(this,jn),[p,g,y,w]=E(this,Mt,au).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-o)/u,(i[1]-c)/f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,w,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-c)/f],t),t+=24},x(ws,yh,8),x(ws,ep,2),x(ws,tp,l(ws,yh)+l(ws,ep));let Nf=ws;var Gl,ra,Ds,wh,Hn,Ah,yt,Rn,lu,cu,fS;class dS extends rS{constructor(t,i,r,o,c,u){super();x(this,Rn);x(this,Gl);x(this,ra,null);x(this,Ds);x(this,wh);x(this,Hn);x(this,Ah);x(this,yt);_(this,yt,t),_(this,Hn,i),_(this,Gl,r),_(this,Ah,o),_(this,Ds,c),_(this,wh,u),E(this,Rn,fS).call(this,u);const{x:f,y:p,width:g,height:y}=l(this,ra);for(let w=0,A=t.length;w<A;w+=2)t[w]=(t[w]-f)/g,t[w+1]=(t[w+1]-p)/y;for(let w=0,A=i.length;w<A;w+=2)i[w]=(i[w]-f)/g,i[w+1]=(i[w+1]-p)/y}toSVGPath(){const t=[`M${l(this,yt)[4]} ${l(this,yt)[5]}`];for(let i=6,r=l(this,yt).length;i<r;i+=6){if(isNaN(l(this,yt)[i])){t.push(`L${l(this,yt)[i+4]} ${l(this,yt)[i+5]}`);continue}t.push(`C${l(this,yt)[i]} ${l(this,yt)[i+1]} ${l(this,yt)[i+2]} ${l(this,yt)[i+3]} ${l(this,yt)[i+4]} ${l(this,yt)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,r,o],c){const u=r-t,f=o-i;let p,g;switch(c){case 0:p=E(this,Rn,lu).call(this,l(this,yt),t,o,u,-f),g=E(this,Rn,lu).call(this,l(this,Hn),t,o,u,-f);break;case 90:p=E(this,Rn,cu).call(this,l(this,yt),t,i,u,f),g=E(this,Rn,cu).call(this,l(this,Hn),t,i,u,f);break;case 180:p=E(this,Rn,lu).call(this,l(this,yt),r,i,-u,f),g=E(this,Rn,lu).call(this,l(this,Hn),r,i,-u,f);break;case 270:p=E(this,Rn,cu).call(this,l(this,yt),r,o,-u,-f),g=E(this,Rn,cu).call(this,l(this,Hn),r,o,-u,-f);break}return{outline:Array.from(p),points:[Array.from(g)]}}get box(){return l(this,ra)}newOutliner(t,i,r,o,c,u=0){return new Nf(t,i,r,o,c,u)}getNewOutline(t,i){const{x:r,y:o,width:c,height:u}=l(this,ra),[f,p,g,y]=l(this,Gl),w=c*g,A=u*y,b=r*g+f,C=o*y+p,R=this.newOutliner({x:l(this,Hn)[0]*w+b,y:l(this,Hn)[1]*A+C},l(this,Gl),l(this,Ah),t,l(this,wh),i??l(this,Ds));for(let k=2;k<l(this,Hn).length;k+=2)R.add({x:l(this,Hn)[k]*w+b,y:l(this,Hn)[k+1]*A+C});return R.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Gl=new WeakMap,ra=new WeakMap,Ds=new WeakMap,wh=new WeakMap,Hn=new WeakMap,Ah=new WeakMap,yt=new WeakMap,Rn=new WeakSet,lu=function(t,i,r,o,c){const u=new Float64Array(t.length);for(let f=0,p=t.length;f<p;f+=2)u[f]=i+t[f]*o,u[f+1]=r+t[f+1]*c;return u},cu=function(t,i,r,o,c){const u=new Float64Array(t.length);for(let f=0,p=t.length;f<p;f+=2)u[f]=i+t[f+1]*o,u[f+1]=r+t[f]*c;return u},fS=function(t){const i=l(this,yt);let r=i[4],o=i[5],c=r,u=o,f=r,p=o,g=r,y=o;const w=t?Math.max:Math.min;for(let k=6,F=i.length;k<F;k+=6){if(isNaN(i[k]))c=Math.min(c,i[k+4]),u=Math.min(u,i[k+5]),f=Math.max(f,i[k+4]),p=Math.max(p,i[k+5]),y<i[k+5]?(g=i[k+4],y=i[k+5]):y===i[k+5]&&(g=w(g,i[k+4]));else{const D=pe.bezierBoundingBox(r,o,...i.slice(k,k+6));c=Math.min(c,D[0]),u=Math.min(u,D[1]),f=Math.max(f,D[2]),p=Math.max(p,D[3]),y<D[3]?(g=D[2],y=D[3]):y===D[3]&&(g=w(g,D[2]))}r=i[k+4],o=i[k+5]}const A=c-l(this,Ds),b=u-l(this,Ds),C=f-c+2*l(this,Ds),R=p-u+2*l(this,Ds);_(this,ra,{x:A,y:b,width:C,height:R,lastPoint:[g,y]})};var _h,jr,ki,mn,pS,Ef,gS,mS,dv;class EA{constructor(e,t=0,i=0,r=!0){x(this,mn);x(this,_h);x(this,jr,[]);x(this,ki,[]);let o=1/0,c=-1/0,u=1/0,f=-1/0;const p=10**-4;for(const{x:R,y:k,width:F,height:D}of e){const I=Math.floor((R-t)/p)*p,H=Math.ceil((R+F+t)/p)*p,j=Math.floor((k-t)/p)*p,B=Math.ceil((k+D+t)/p)*p,V=[I,j,B,!0],Q=[H,j,B,!1];l(this,jr).push(V,Q),o=Math.min(o,I),c=Math.max(c,H),u=Math.min(u,j),f=Math.max(f,B)}const g=c-o+2*i,y=f-u+2*i,w=o-i,A=u-i,b=l(this,jr).at(r?-1:-2),C=[b[0],b[2]];for(const R of l(this,jr)){const[k,F,D]=R;R[0]=(k-w)/g,R[1]=(F-A)/y,R[2]=(D-A)/y}_(this,_h,{x:w,y:A,width:g,height:y,lastPoint:C})}getOutlines(){l(this,jr).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of l(this,jr))t[3]?(e.push(...E(this,mn,dv).call(this,t)),E(this,mn,gS).call(this,t)):(E(this,mn,mS).call(this,t),e.push(...E(this,mn,dv).call(this,t)));return E(this,mn,pS).call(this,e)}}_h=new WeakMap,jr=new WeakMap,ki=new WeakMap,mn=new WeakSet,pS=function(e){const t=[],i=new Set;for(const c of e){const[u,f,p]=c;t.push([u,f,c],[u,p,c])}t.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=t.length;c<u;c+=2){const f=t[c][2],p=t[c+1][2];f.push(p),p.push(f),i.add(f),i.add(p)}const r=[];let o;for(;i.size>0;){const c=i.values().next().value;let[u,f,p,g,y]=c;i.delete(c);let w=u,A=f;for(o=[u,p],r.push(o);;){let b;if(i.has(g))b=g;else if(i.has(y))b=y;else break;i.delete(b),[u,f,p,g,y]=b,w!==u&&(o.push(w,A,u,A===f?f:p),w=u),A=A===f?p:f}o.push(w,A)}return new IC(r,l(this,_h))},Ef=function(e){const t=l(this,ki);let i=0,r=t.length-1;for(;i<=r;){const o=i+r>>1,c=t[o][0];if(c===e)return o;c<e?i=o+1:r=o-1}return r+1},gS=function([,e,t]){const i=E(this,mn,Ef).call(this,e);l(this,ki).splice(i,0,[e,t])},mS=function([,e,t]){const i=E(this,mn,Ef).call(this,e);for(let r=i;r<l(this,ki).length;r++){const[o,c]=l(this,ki)[r];if(o!==e)break;if(o===e&&c===t){l(this,ki).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[o,c]=l(this,ki)[r];if(o!==e)break;if(o===e&&c===t){l(this,ki).splice(r,1);return}}},dv=function(e){const[t,i,r]=e,o=[[t,i,r]],c=E(this,mn,Ef).call(this,r);for(let u=0;u<c;u++){const[f,p]=l(this,ki)[u];for(let g=0,y=o.length;g<y;g++){const[,w,A]=o[g];if(!(p<=w||A<=f)){if(w>=f){if(A>p)o[g][1]=p;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=f,A>p&&o.push([t,p,A])}}}return o};var Sh,Xl;class IC extends rS{constructor(t,i){super();x(this,Sh);x(this,Xl);_(this,Xl,t),_(this,Sh,i)}toSVGPath(){const t=[];for(const i of l(this,Xl)){let[r,o]=i;t.push(`M${r} ${o}`);for(let c=2;c<i.length;c+=2){const u=i[c],f=i[c+1];u===r?(t.push(`V${f}`),o=f):f===o&&(t.push(`H${u}`),r=u)}t.push("Z")}return t.join(" ")}serialize([t,i,r,o],c){const u=[],f=r-t,p=o-i;for(const g of l(this,Xl)){const y=new Array(g.length);for(let w=0;w<g.length;w+=2)y[w]=t+g[w]*f,y[w+1]=o-g[w+1]*p;u.push(y)}return u}get box(){return l(this,Sh)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}Sh=new WeakMap,Xl=new WeakMap;class fv extends Nf{newFreeDrawOutline(e,t,i,r,o,c){return new DC(e,t,i,r,o,c)}get classNamesForDrawing(){return["highlight","free"]}}class DC extends dS{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,r,o,c=0){return new fv(e,t,i,r,o,c)}}var Ti,oa,ql,Rt,Eh,Yl,bh,xh,Hr,Ri,Kl,Ch,Ye,pv,gv,mv,mo,vS,yr;const bn=class bn{constructor({editor:e=null,uiManager:t=null}){x(this,Ye);x(this,Ti,null);x(this,oa,null);x(this,ql);x(this,Rt,null);x(this,Eh,!1);x(this,Yl,!1);x(this,bh,null);x(this,xh);x(this,Hr,null);x(this,Ri,null);x(this,Kl);var i;e?(_(this,Yl,!1),_(this,Kl,Ce.HIGHLIGHT_COLOR),_(this,bh,e)):(_(this,Yl,!0),_(this,Kl,Ce.HIGHLIGHT_DEFAULT_COLOR)),_(this,Ri,(e==null?void 0:e._uiManager)||t),_(this,xh,l(this,Ri)._eventBus),_(this,ql,(e==null?void 0:e.color)||((i=l(this,Ri))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l(bn,Ch)||_(bn,Ch,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return je(this,"_keyboardManager",new Dh([[["Escape","mac+Escape"],bn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],bn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],bn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],bn.prototype._moveToPrevious],[["Home","mac+Home"],bn.prototype._moveToBeginning],[["End","mac+End"],bn.prototype._moveToEnd]]))}renderButton(){const e=_(this,Ti,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,Ri)._signal;e.addEventListener("click",E(this,Ye,mo).bind(this),{signal:t}),e.addEventListener("keydown",E(this,Ye,mv).bind(this),{signal:t});const i=_(this,oa,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=l(this,ql),e.append(i),e}renderMainDropdown(){const e=_(this,Rt,E(this,Ye,pv).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,Ti)){E(this,Ye,mo).call(this,e);return}const t=e.target.getAttribute("data-color");t&&E(this,Ye,gv).call(this,t,e)}_moveToNext(e){var t,i;if(!l(this,Ye,yr)){E(this,Ye,mo).call(this,e);return}if(e.target===l(this,Ti)){(t=l(this,Rt).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=l(this,Rt))==null?void 0:t.firstChild)||e.target===l(this,Ti)){l(this,Ye,yr)&&this._hideDropdownFromKeyboard();return}l(this,Ye,yr)||E(this,Ye,mo).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!l(this,Ye,yr)){E(this,Ye,mo).call(this,e);return}(t=l(this,Rt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,Ye,yr)){E(this,Ye,mo).call(this,e);return}(t=l(this,Rt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Rt))==null||e.classList.add("hidden"),(t=l(this,Hr))==null||t.abort(),_(this,Hr,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,Yl)){if(!l(this,Ye,yr)){(e=l(this,bh))==null||e.unselect();return}this.hideDropdown(),l(this,Ti).focus({preventScroll:!0,focusVisible:l(this,Eh)})}}updateColor(e){if(l(this,oa)&&(l(this,oa).style.backgroundColor=e),!l(this,Rt))return;const t=l(this,Ri).highlightColors.values();for(const i of l(this,Rt).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,Ti))==null||e.remove(),_(this,Ti,null),_(this,oa,null),(t=l(this,Rt))==null||t.remove(),_(this,Rt,null)}};Ti=new WeakMap,oa=new WeakMap,ql=new WeakMap,Rt=new WeakMap,Eh=new WeakMap,Yl=new WeakMap,bh=new WeakMap,xh=new WeakMap,Hr=new WeakMap,Ri=new WeakMap,Kl=new WeakMap,Ch=new WeakMap,Ye=new WeakSet,pv=function(){const e=document.createElement("div"),t=l(this,Ri)._signal;e.addEventListener("contextmenu",ai,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of l(this,Ri).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=i,o.setAttribute("data-l10n-id",l(bn,Ch)[i]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.setAttribute("aria-selected",r===l(this,ql)),o.addEventListener("click",E(this,Ye,gv).bind(this,r),{signal:t}),e.append(o)}return e.addEventListener("keydown",E(this,Ye,mv).bind(this),{signal:t}),e},gv=function(e,t){t.stopPropagation(),l(this,xh).dispatch("switchannotationeditorparams",{source:this,type:l(this,Kl),value:e})},mv=function(e){bn._keyboardManager.exec(this,e)},mo=function(e){if(l(this,Ye,yr)){this.hideDropdown();return}if(_(this,Eh,e.detail===0),l(this,Hr)||(_(this,Hr,new AbortController),window.addEventListener("pointerdown",E(this,Ye,vS).bind(this),{signal:l(this,Ri).combinedSignal(l(this,Hr))})),l(this,Rt)){l(this,Rt).classList.remove("hidden");return}const t=_(this,Rt,E(this,Ye,pv).call(this));l(this,Ti).append(t)},vS=function(e){var t;(t=l(this,Rt))!=null&&t.contains(e.target)||this.hideDropdown()},yr=function(){return l(this,Rt)&&!l(this,Rt).classList.contains("hidden")},x(bn,Ch,null);let Of=bn;var Ql,kh,Fs,aa,Jl,ti,Th,Rh,la,Pi,sn,kn,Zl,Ns,Pt,ec,ni,Ph,Re,vv,bf,yS,wS,AS,yv,vo,ri,nl,_S,xf,uu,SS,ES,bS,xS,CS;const $e=class $e extends qe{constructor(t){super({...t,name:"highlightEditor"});x(this,Re);x(this,Ql,null);x(this,kh,0);x(this,Fs);x(this,aa,null);x(this,Jl,null);x(this,ti,null);x(this,Th,null);x(this,Rh,0);x(this,la,null);x(this,Pi,null);x(this,sn,null);x(this,kn,!1);x(this,Zl,null);x(this,Ns);x(this,Pt,null);x(this,ec,"");x(this,ni);x(this,Ph,"");this.color=t.color||$e._defaultColor,_(this,ni,t.thickness||$e._defaultThickness),_(this,Ns,t.opacity||$e._defaultOpacity),_(this,Fs,t.boxes||null),_(this,Ph,t.methodOfCreation||""),_(this,ec,t.text||""),this._isDraggable=!1,t.highlightId>-1?(_(this,kn,!0),E(this,Re,bf).call(this,t),E(this,Re,vo).call(this)):l(this,Fs)&&(_(this,Ql,t.anchorNode),_(this,kh,t.anchorOffset),_(this,Th,t.focusNode),_(this,Rh,t.focusOffset),E(this,Re,vv).call(this),E(this,Re,vo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=$e.prototype;return je(this,"_keyboardManager",new Dh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,kn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,ni),methodOfCreation:l(this,Ph)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var r;qe.initialize(t,i),$e._defaultColor||($e._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case Ce.HIGHLIGHT_DEFAULT_COLOR:$e._defaultColor=i;break;case Ce.HIGHLIGHT_THICKNESS:$e._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return l(this,Zl)}updateParams(t,i){switch(t){case Ce.HIGHLIGHT_COLOR:E(this,Re,yS).call(this,i);break;case Ce.HIGHLIGHT_THICKNESS:E(this,Re,wS).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ce.HIGHLIGHT_DEFAULT_COLOR,$e._defaultColor],[Ce.HIGHLIGHT_THICKNESS,$e._defaultThickness]]}get propertiesToUpdate(){return[[Ce.HIGHLIGHT_COLOR,this.color||$e._defaultColor],[Ce.HIGHLIGHT_THICKNESS,l(this,ni)||$e._defaultThickness],[Ce.HIGHLIGHT_FREE,l(this,kn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(_(this,Jl,new Of({editor:this})),t.addColorPicker(l(this,Jl))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,Re,uu).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,E(this,Re,uu).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){E(this,Re,yv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Re,vo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?E(this,Re,yv).call(this):t&&(E(this,Re,vo).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var o,c,u;const{drawLayer:i}=this.parent;let r;l(this,kn)?(t=(t-this.rotation+360)%360,r=E(o=$e,ri,nl).call(o,l(this,Pi).box,t)):r=E(c=$e,ri,nl).call(c,this,t),i.rotate(l(this,sn),t),i.rotate(l(this,Pt),t),i.updateBox(l(this,sn),r),i.updateBox(l(this,Pt),E(u=$e,ri,nl).call(u,l(this,ti).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,ec)&&(t.setAttribute("aria-label",l(this,ec)),t.setAttribute("role","mark")),l(this,kn)?t.classList.add("free"):this.div.addEventListener("keydown",E(this,Re,_S).bind(this),{signal:this._uiManager._signal});const i=_(this,la,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=l(this,aa);const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),Df(this,l(this,la),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(l(this,Pt),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(l(this,Pt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:E(this,Re,xf).call(this,!0);break;case 1:case 3:E(this,Re,xf).call(this,!1);break}}select(){var t,i;super.select(),l(this,Pt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,Pt),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(l(this,Pt),"selected"))}unselect(){var t;super.unselect(),l(this,Pt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,Pt),"selected"),l(this,kn)||E(this,Re,xf).call(this,!1))}get _mustFixPosition(){return!l(this,kn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,sn),t),this.parent.drawLayer.show(l(this,Pt),t))}static startHighlighting(t,i,{target:r,x:o,y:c}){const{x:u,y:f,width:p,height:g}=r.getBoundingClientRect(),y=new AbortController,w=t.combinedSignal(y),A=C=>{C.preventDefault(),C.stopPropagation()},b=C=>{y.abort(),E(this,ri,xS).call(this,t,C)};window.addEventListener("blur",b,{signal:w}),window.addEventListener("pointerup",b,{signal:w}),window.addEventListener("pointerdown",A,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",ai,{signal:w}),r.addEventListener("pointermove",E(this,ri,bS).bind(this,t),{signal:w}),this._freeHighlight=new fv({x:o,y:c},[u,f,p,g],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,i,r){var C,R,k,F;let o=null;if(t instanceof Q_){const{data:{quadPoints:D,rect:I,rotation:H,id:j,color:B,opacity:V,popupRef:Q},parent:{page:{pageNumber:ne}}}=t;o=t={annotationType:Pe.HIGHLIGHT,color:Array.from(B),opacity:V,quadPoints:D,boxes:null,pageIndex:ne-1,rect:I.slice(0),rotation:H,id:j,deleted:!1,popupRef:Q}}else if(t instanceof ny){const{data:{inkLists:D,rect:I,rotation:H,id:j,color:B,borderStyle:{rawWidth:V},popupRef:Q},parent:{page:{pageNumber:ne}}}=t;o=t={annotationType:Pe.HIGHLIGHT,color:Array.from(B),thickness:V,inkLists:D,boxes:null,pageIndex:ne-1,rect:I.slice(0),rotation:H,id:j,deleted:!1,popupRef:Q}}const{color:c,quadPoints:u,inkLists:f,opacity:p}=t,g=await super.deserialize(t,i,r);g.color=pe.makeHexColor(...c),_(g,Ns,p||1),f&&_(g,ni,t.thickness),g.annotationElementId=t.id||null,g._initialData=o;const[y,w]=g.pageDimensions,[A,b]=g.pageTranslation;if(u){const D=_(g,Fs,[]);for(let I=0;I<u.length;I+=8)D.push({x:(u[I]-A)/y,y:1-(u[I+1]-b)/w,width:(u[I+2]-u[I])/y,height:(u[I+1]-u[I+5])/w});E(C=g,Re,vv).call(C),E(R=g,Re,vo).call(R),g.rotate(g.rotation)}else if(f){_(g,kn,!0);const D=f[0],I={x:D[0]-A,y:w-(D[1]-b)},H=new fv(I,[0,0,y,w],1,l(g,ni)/2,!0,.001);for(let V=0,Q=D.length;V<Q;V+=2)I.x=D[V]-A,I.y=w-(D[V+1]-b),H.add(I);const{id:j,clipPathId:B}=i.drawLayer.draw(H,g.color,g._defaultOpacity,!0);E(k=g,Re,bf).call(k,{highlightOutlines:H.getOutlines(),highlightId:j,clipPathId:B}),E(F=g,Re,vo).call(F)}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=qe._colorManager.convert(this.color),o={annotationType:Pe.HIGHLIGHT,color:r,opacity:l(this,Ns),thickness:l(this,ni),quadPoints:E(this,Re,SS).call(this),outlines:E(this,Re,ES).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:E(this,Re,uu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,Re,CS).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ql=new WeakMap,kh=new WeakMap,Fs=new WeakMap,aa=new WeakMap,Jl=new WeakMap,ti=new WeakMap,Th=new WeakMap,Rh=new WeakMap,la=new WeakMap,Pi=new WeakMap,sn=new WeakMap,kn=new WeakMap,Zl=new WeakMap,Ns=new WeakMap,Pt=new WeakMap,ec=new WeakMap,ni=new WeakMap,Ph=new WeakMap,Re=new WeakSet,vv=function(){const t=new EA(l(this,Fs),.001);_(this,Pi,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,Pi).box;const i=new EA(l(this,Fs),.0025,.001,this._uiManager.direction==="ltr");_(this,ti,i.getOutlines());const{lastPoint:r}=l(this,ti).box;_(this,Zl,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},bf=function({highlightOutlines:t,highlightId:i,clipPathId:r}){var y,w;if(_(this,Pi,t),_(this,ti,t.getNewOutline(l(this,ni)/2+1.5,.0025)),i>=0)_(this,sn,i),_(this,aa,r),this.parent.drawLayer.finalizeLine(i,t),_(this,Pt,this.parent.drawLayer.drawOutline(l(this,ti)));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,sn),t),this.parent.drawLayer.updateBox(l(this,sn),E(y=$e,ri,nl).call(y,l(this,Pi).box,(A-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,Pt),l(this,ti)),this.parent.drawLayer.updateBox(l(this,Pt),E(w=$e,ri,nl).call(w,l(this,ti).box,A))}const{x:c,y:u,width:f,height:p}=t.box;switch(this.rotation){case 0:this.x=c,this.y=u,this.width=f,this.height=p;break;case 90:{const[A,b]=this.parentDimensions;this.x=u,this.y=1-c,this.width=f*b/A,this.height=p*A/b;break}case 180:this.x=1-c,this.y=1-u,this.width=f,this.height=p;break;case 270:{const[A,b]=this.parentDimensions;this.x=1-u,this.y=c,this.width=f*b/A,this.height=p*A/b;break}}const{lastPoint:g}=l(this,ti).box;_(this,Zl,[(g[0]-c)/f,(g[1]-u)/p])},yS=function(t){const i=(c,u)=>{var f,p,g;this.color=c,(f=this.parent)==null||f.drawLayer.changeColor(l(this,sn),c),(p=l(this,Jl))==null||p.updateColor(c),_(this,Ns,u),(g=this.parent)==null||g.drawLayer.changeOpacity(l(this,sn),u)},r=this.color,o=l(this,Ns);this.addCommands({cmd:i.bind(this,t,$e._defaultOpacity),undo:i.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},wS=function(t){const i=l(this,ni),r=o=>{_(this,ni,o),E(this,Re,AS).call(this,o)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},AS=function(t){if(!l(this,kn))return;E(this,Re,bf).call(this,{highlightOutlines:l(this,Pi).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},yv=function(){l(this,sn)===null||!this.parent||(this.parent.drawLayer.remove(l(this,sn)),_(this,sn,null),this.parent.drawLayer.remove(l(this,Pt)),_(this,Pt,null))},vo=function(t=this.parent){l(this,sn)===null&&({id:un(this,sn)._,clipPathId:un(this,aa)._}=t.drawLayer.draw(l(this,Pi),this.color,l(this,Ns)),_(this,Pt,t.drawLayer.drawOutline(l(this,ti))),l(this,la)&&(l(this,la).style.clipPath=l(this,aa)))},ri=new WeakSet,nl=function({x:t,y:i,width:r,height:o},c){switch(c){case 90:return{x:1-i-o,y:t,width:o,height:r};case 180:return{x:1-t-r,y:1-i-o,width:r,height:o};case 270:return{x:i,y:1-t-r,width:o,height:r}}return{x:t,y:i,width:r,height:o}},_S=function(t){$e._keyboardManager.exec(this,t)},xf=function(t){if(!l(this,Ql))return;const i=window.getSelection();t?i.setPosition(l(this,Ql),l(this,kh)):i.setPosition(l(this,Th),l(this,Rh))},uu=function(){return l(this,kn)?this.rotation:0},SS=function(){if(l(this,kn))return null;const[t,i]=this.pageDimensions,[r,o]=this.pageTranslation,c=l(this,Fs),u=new Float32Array(c.length*8);let f=0;for(const{x:p,y:g,width:y,height:w}of c){const A=p*t+r,b=(1-g-w)*i+o;u[f]=u[f+4]=A,u[f+1]=u[f+3]=b,u[f+2]=u[f+6]=A+y*t,u[f+5]=u[f+7]=b+w*i,f+=8}return u},ES=function(t){return l(this,Pi).serialize(t,E(this,Re,uu).call(this))},bS=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},xS=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},CS=function(t){const{color:i}=this._initialData;return t.color.some((r,o)=>r!==i[o])},x($e,ri),xe($e,"_defaultColor",null),xe($e,"_defaultOpacity",1),xe($e,"_defaultThickness",12),xe($e,"_type","highlight"),xe($e,"_editorType",Pe.HIGHLIGHT),xe($e,"_freeHighlightId",-1),xe($e,"_freeHighlight",null),xe($e,"_freeHighlightClipId","");let zf=$e;var ca,ua,es,Os,ii,ha,da,fa,zs,tc,pa,ga,Br,Z,kS,TS,RS,PS,Av,LS,_v,MS,IS,DS,FS,NS,yo,Sv,Ev,bv,Cf,kf,il,xv,Tf,Ys,OS,Cv,zS,jS,kv,Rf,hu;const lt=class lt extends qe{constructor(t){super({...t,name:"inkEditor"});x(this,Z);x(this,ca,0);x(this,ua,0);x(this,es,null);x(this,Os,new Path2D);x(this,ii,!1);x(this,ha,null);x(this,da,!1);x(this,fa,!1);x(this,zs,null);x(this,tc,null);x(this,pa,0);x(this,ga,0);x(this,Br,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){qe.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case Ce.INK_THICKNESS:lt._defaultThickness=i;break;case Ce.INK_COLOR:lt._defaultColor=i;break;case Ce.INK_OPACITY:lt._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case Ce.INK_THICKNESS:E(this,Z,kS).call(this,i);break;case Ce.INK_COLOR:E(this,Z,TS).call(this,i);break;case Ce.INK_OPACITY:E(this,Z,RS).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ce.INK_THICKNESS,lt._defaultThickness],[Ce.INK_COLOR,lt._defaultColor||qe._defaultLineColor],[Ce.INK_OPACITY,Math.round(lt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Ce.INK_THICKNESS,this.thickness||lt._defaultThickness],[Ce.INK_COLOR,this.color||lt._defaultColor||qe._defaultLineColor],[Ce.INK_OPACITY,Math.round(100*(this.opacity??lt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(E(this,Z,Cf).call(this),E(this,Z,kf).call(this)),this.isAttachedToDOM||(this.parent.add(this),E(this,Z,il).call(this)),E(this,Z,hu).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,es)&&(clearTimeout(l(this,es)),_(this,es,null)),(t=l(this,zs))==null||t.disconnect(),_(this,zs,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,r=this.width*t,o=this.height*i;this.setDimensions(r,o)}enableEditMode(){l(this,ii)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,E(this,Z,Sv).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),E(this,Z,Ev).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,ii)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_(this,ii,!0),this.div.classList.add("disabled"),E(this,Z,hu).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,ii)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),E(this,Z,LS).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),E(this,Z,_v).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),E(this,Z,bv).call(this,t)}canvasPointerleave(t){E(this,Z,bv).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,ii)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,o,c,u]=E(this,Z,PS).call(this);if(this.setAt(r,o,0,0),this.setDims(c,u),E(this,Z,Cf).call(this),this.width){const[f,p]=this.parentDimensions;this.setAspectRatio(this.width*f,this.height*p),this.setAt(t*f,i*p,this.width*f,this.height*p),_(this,fa,!0),E(this,Z,il).call(this),this.setDims(this.width*f,this.height*p),E(this,Z,yo).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return E(this,Z,kf).call(this),this.div}setDimensions(t,i){const r=Math.round(t),o=Math.round(i);if(l(this,pa)===r&&l(this,ga)===o)return;_(this,pa,r),_(this,ga,o),this.canvas.style.visibility="hidden";const[c,u]=this.parentDimensions;this.width=t/c,this.height=i/u,this.fixAndSetPosition(),l(this,ii)&&E(this,Z,xv).call(this,t,i),E(this,Z,il).call(this),E(this,Z,yo).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,i,r){var R,k,F;if(t instanceof ny)return null;const o=await super.deserialize(t,i,r);o.thickness=t.thickness,o.color=pe.makeHexColor(...t.color),o.opacity=t.opacity;const[c,u]=o.pageDimensions,f=o.width*c,p=o.height*u,g=o.parentScale,y=t.thickness/2;_(o,ii,!0),_(o,pa,Math.round(f)),_(o,ga,Math.round(p));const{paths:w,rect:A,rotation:b}=t;for(let{bezier:D}of w){D=E(R=lt,Ys,zS).call(R,D,A,b);const I=[];o.paths.push(I);let H=g*(D[0]-y),j=g*(D[1]-y);for(let V=2,Q=D.length;V<Q;V+=6){const ne=g*(D[V]-y),te=g*(D[V+1]-y),Ee=g*(D[V+2]-y),fe=g*(D[V+3]-y),he=g*(D[V+4]-y),we=g*(D[V+5]-y);I.push([[H,j],[ne,te],[Ee,fe],[he,we]]),H=he,j=we}const B=E(this,Ys,OS).call(this,I);o.bezierPath2D.push(B)}const C=E(k=o,Z,kv).call(k);return _(o,ua,Math.max(qe.MIN_SIZE,C[2]-C[0])),_(o,ca,Math.max(qe.MIN_SIZE,C[3]-C[1])),E(F=o,Z,xv).call(F,f,p),o}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=qe._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Pe.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:E(this,Z,jS).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ca=new WeakMap,ua=new WeakMap,es=new WeakMap,Os=new WeakMap,ii=new WeakMap,ha=new WeakMap,da=new WeakMap,fa=new WeakMap,zs=new WeakMap,tc=new WeakMap,pa=new WeakMap,ga=new WeakMap,Br=new WeakMap,Z=new WeakSet,kS=function(t){const i=o=>{this.thickness=o,E(this,Z,hu).call(this)},r=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},TS=function(t){const i=o=>{this.color=o,E(this,Z,yo).call(this)},r=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},RS=function(t){const i=o=>{this.opacity=o,E(this,Z,yo).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},PS=function(){const{parentRotation:t,parentDimensions:[i,r]}=this;switch(t){case 90:return[0,r,r,i];case 180:return[i,r,i,r];case 270:return[i,0,r,i];default:return[0,0,i,r]}},Av=function(){const{ctx:t,color:i,opacity:r,thickness:o,parentScale:c,scaleFactor:u}=this;t.lineWidth=o*c/u,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${n1(r)}`},LS=function(t,i){this.canvas.addEventListener("contextmenu",ai,{signal:this._uiManager._signal}),E(this,Z,Ev).call(this),_(this,ha,new AbortController);const r=this._uiManager.combinedSignal(l(this,ha));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,l(this,fa)||(_(this,fa,!0),E(this,Z,il).call(this),this.thickness||(this.thickness=lt._defaultThickness),this.color||(this.color=lt._defaultColor||qe._defaultLineColor),this.opacity??(this.opacity=lt._defaultOpacity)),this.currentPath.push([t,i]),_(this,da,!1),E(this,Z,Av).call(this),_(this,Br,()=>{E(this,Z,DS).call(this),l(this,Br)&&window.requestAnimationFrame(l(this,Br))}),window.requestAnimationFrame(l(this,Br))},_v=function(t,i){const[r,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&i===o)return;const c=this.currentPath;let u=l(this,Os);if(c.push([t,i]),_(this,da,!0),c.length<=2){u.moveTo(...c[0]),u.lineTo(t,i);return}c.length===3&&(_(this,Os,u=new Path2D),u.moveTo(...c[0])),E(this,Z,FS).call(this,u,...c.at(-3),...c.at(-2),t,i)},MS=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,Os).lineTo(...t)},IS=function(t,i){_(this,Br,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),E(this,Z,_v).call(this,t,i),E(this,Z,MS).call(this);let r;if(this.currentPath.length!==1)r=E(this,Z,NS).call(this);else{const p=[t,i];r=[[p,p.slice(),p.slice(),p]]}const o=l(this,Os),c=this.currentPath;this.currentPath=[],_(this,Os,new Path2D);const u=()=>{this.allRawPaths.push(c),this.paths.push(r),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},f=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(E(this,Z,Cf).call(this),E(this,Z,kf).call(this)),E(this,Z,hu).call(this))};this.addCommands({cmd:u,undo:f,mustExec:!0})},DS=function(){if(!l(this,da))return;_(this,da,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),r=i.map(u=>u[0]),o=i.map(u=>u[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...o)-t,Math.max(...o)+t;const{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const u of this.bezierPath2D)c.stroke(u);c.stroke(l(this,Os)),c.restore()},FS=function(t,i,r,o,c,u,f){const p=(i+o)/2,g=(r+c)/2,y=(o+u)/2,w=(c+f)/2;t.bezierCurveTo(p+2*(o-p)/3,g+2*(c-g)/3,y+2*(o-y)/3,w+2*(c-w)/3,y,w)},NS=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let r,[o,c]=t[0];for(r=1;r<t.length-2;r++){const[A,b]=t[r],[C,R]=t[r+1],k=(A+C)/2,F=(b+R)/2,D=[o+2*(A-o)/3,c+2*(b-c)/3],I=[k+2*(A-k)/3,F+2*(b-F)/3];i.push([[o,c],D,I,[k,F]]),[o,c]=[k,F]}const[u,f]=t[r],[p,g]=t[r+1],y=[o+2*(u-o)/3,c+2*(f-c)/3],w=[p+2*(u-p)/3,g+2*(f-g)/3];return i.push([[o,c],y,w,[p,g]]),i},yo=function(){if(this.isEmpty()){E(this,Z,Tf).call(this);return}E(this,Z,Av).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),E(this,Z,Tf).call(this);for(const r of this.bezierPath2D)i.stroke(r)},Sv=function(){if(l(this,tc))return;_(this,tc,new AbortController);const t=this._uiManager.combinedSignal(l(this,tc));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},Ev=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},bv=function(t){var i;(i=l(this,ha))==null||i.abort(),_(this,ha,null),E(this,Z,Sv).call(this),l(this,es)&&clearTimeout(l(this,es)),_(this,es,setTimeout(()=>{_(this,es,null),this.canvas.removeEventListener("contextmenu",ai)},10)),E(this,Z,IS).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Cf=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},kf=function(){_(this,zs,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),l(this,zs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,zs))==null||t.disconnect(),_(this,zs,null)},{once:!0})},il=function(){if(!l(this,fa))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),E(this,Z,Tf).call(this)},xv=function(t,i){const r=E(this,Z,Rf).call(this),o=(t-r)/l(this,ua),c=(i-r)/l(this,ca);this.scaleFactor=Math.min(o,c)},Tf=function(){const t=E(this,Z,Rf).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Ys=new WeakSet,OS=function(t){const i=new Path2D;for(let r=0,o=t.length;r<o;r++){const[c,u,f,p]=t[r];r===0&&i.moveTo(...c),i.bezierCurveTo(u[0],u[1],f[0],f[1],p[0],p[1])}return i},Cv=function(t,i,r){const[o,c,u,f]=i;switch(r){case 0:for(let p=0,g=t.length;p<g;p+=2)t[p]+=o,t[p+1]=f-t[p+1];break;case 90:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=t[p+1]+o,t[p+1]=y+c}break;case 180:for(let p=0,g=t.length;p<g;p+=2)t[p]=u-t[p],t[p+1]+=c;break;case 270:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=u-t[p+1],t[p+1]=f-y}break;default:throw new Error("Invalid rotation")}return t},zS=function(t,i,r){const[o,c,u,f]=i;switch(r){case 0:for(let p=0,g=t.length;p<g;p+=2)t[p]-=o,t[p+1]=f-t[p+1];break;case 90:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=t[p+1]-c,t[p+1]=y-o}break;case 180:for(let p=0,g=t.length;p<g;p+=2)t[p]=u-t[p],t[p+1]-=c;break;case 270:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=f-t[p+1],t[p+1]=u-y}break;default:throw new Error("Invalid rotation")}return t},jS=function(t,i,r,o){var g,y;const c=[],u=this.thickness/2,f=t*i+u,p=t*r+u;for(const w of this.paths){const A=[],b=[];for(let C=0,R=w.length;C<R;C++){const[k,F,D,I]=w[C];if(k[0]===I[0]&&k[1]===I[1]&&R===1){const fe=t*k[0]+f,he=t*k[1]+p;A.push(fe,he),b.push(fe,he);break}const H=t*k[0]+f,j=t*k[1]+p,B=t*F[0]+f,V=t*F[1]+p,Q=t*D[0]+f,ne=t*D[1]+p,te=t*I[0]+f,Ee=t*I[1]+p;C===0&&(A.push(H,j),b.push(H,j)),A.push(B,V,Q,ne,te,Ee),b.push(B,V),C===R-1&&b.push(te,Ee)}c.push({bezier:E(g=lt,Ys,Cv).call(g,A,o,this.rotation),points:E(y=lt,Ys,Cv).call(y,b,o,this.rotation)})}return c},kv=function(){let t=1/0,i=-1/0,r=1/0,o=-1/0;for(const c of this.paths)for(const[u,f,p,g]of c){const y=pe.bezierBoundingBox(...u,...f,...p,...g);t=Math.min(t,y[0]),r=Math.min(r,y[1]),i=Math.max(i,y[2]),o=Math.max(o,y[3])}return[t,r,i,o]},Rf=function(){return l(this,ii)?Math.ceil(this.thickness*this.parentScale):0},hu=function(t=!1){if(this.isEmpty())return;if(!l(this,ii)){E(this,Z,yo).call(this);return}const i=E(this,Z,kv).call(this),r=E(this,Z,Rf).call(this);_(this,ua,Math.max(qe.MIN_SIZE,i[2]-i[0])),_(this,ca,Math.max(qe.MIN_SIZE,i[3]-i[1]));const o=Math.ceil(r+l(this,ua)*this.scaleFactor),c=Math.ceil(r+l(this,ca)*this.scaleFactor),[u,f]=this.parentDimensions;this.width=o/u,this.height=c/f,this.setAspectRatio(o,c);const p=this.translationX,g=this.translationY;this.translationX=-i[0],this.translationY=-i[1],E(this,Z,il).call(this),E(this,Z,yo).call(this),_(this,pa,o),_(this,ga,c),this.setDims(o,c);const y=t?r/this.scaleFactor/2:0;this.translate(p-this.translationX-y,g-this.translationY-y)},x(lt,Ys),xe(lt,"_defaultColor",null),xe(lt,"_defaultOpacity",1),xe(lt,"_defaultThickness",1),xe(lt,"_type","ink"),xe(lt,"_editorType",Pe.INK);let wv=lt;var ut,Xt,Ur,js,$r,nc,ts,Hs,ns,Bn,ic,ze,du,fu,Pf,Rv,HS,Lf,Pv,Mf,BS,US;const mu=class mu extends qe{constructor(t){super({...t,name:"stampEditor"});x(this,ze);x(this,ut,null);x(this,Xt,null);x(this,Ur,null);x(this,js,null);x(this,$r,null);x(this,nc,"");x(this,ts,null);x(this,Hs,null);x(this,ns,null);x(this,Bn,!1);x(this,ic,!1);_(this,js,t.bitmapUrl),_(this,$r,t.bitmapFile)}static initialize(t,i){qe.initialize(t,i)}static get supportedTypes(){return je(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return je(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Pe.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:c,height:u}=t||this.copyCanvas(null,null,!0).imageData,f=await r.guess({name:"altText",request:{data:o,width:c,height:u,channels:o.length/(c*u)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),i&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var t,i;l(this,Xt)&&(_(this,ut,null),this._uiManager.imageManager.deleteId(l(this,Xt)),(t=l(this,ts))==null||t.remove(),_(this,ts,null),(i=l(this,Hs))==null||i.disconnect(),_(this,Hs,null),l(this,ns)&&(clearTimeout(l(this,ns)),_(this,ns,null))),super.remove()}rebuild(){if(!this.parent){l(this,Xt)&&E(this,ze,Pf).call(this);return}super.rebuild(),this.div!==null&&(l(this,Xt)&&l(this,ts)===null&&E(this,ze,Pf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,Ur)||l(this,ut)||l(this,js)||l(this,$r)||l(this,Xt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,ut)?E(this,ze,Rv).call(this):E(this,ze,Pf).call(this),this.width&&!this.annotationElementId){const[r,o]=this.parentDimensions;this.setAt(t*r,i*o,this.width*r,this.height*o)}return this.div}copyCanvas(t,i,r=!1){var A;t||(t=224);const{width:o,height:c}=l(this,ut),u=new bm;let f=l(this,ut),p=o,g=c,y=null;if(i){if(o>i||c>i){const V=Math.min(i/o,i/c);p=Math.floor(o*V),g=Math.floor(c*V)}y=document.createElement("canvas");const b=y.width=Math.ceil(p*u.sx),C=y.height=Math.ceil(g*u.sy);l(this,Bn)||(f=E(this,ze,Lf).call(this,b,C));const R=y.getContext("2d");R.filter=this._uiManager.hcmFilter;let k="white",F="#cfcfd8";this._uiManager.hcmFilter!=="none"?F="black":(A=window.matchMedia)!=null&&A.call(window,"(prefers-color-scheme: dark)").matches&&(k="#8f8f9d",F="#42414d");const D=15,I=D*u.sx,H=D*u.sy,j=new OffscreenCanvas(I*2,H*2),B=j.getContext("2d");B.fillStyle=k,B.fillRect(0,0,I*2,H*2),B.fillStyle=F,B.fillRect(0,0,I,H),B.fillRect(I,H,I,H),R.fillStyle=R.createPattern(j,"repeat"),R.fillRect(0,0,b,C),R.drawImage(f,0,0,f.width,f.height,0,0,b,C)}let w=null;if(r){let b,C;if(u.symmetric&&f.width<t&&f.height<t)b=f.width,C=f.height;else if(f=l(this,ut),o>t||c>t){const F=Math.min(t/o,t/c);b=Math.floor(o*F),C=Math.floor(c*F),l(this,Bn)||(f=E(this,ze,Lf).call(this,b,C))}const k=new OffscreenCanvas(b,C).getContext("2d",{willReadFrequently:!0});k.drawImage(f,0,0,f.width,f.height,0,0,b,C),w={width:b,height:C,data:k.getImageData(0,0,b,C).data}}return{canvas:y,width:p,height:g,imageData:w}}getImageForAltText(){return l(this,ts)}static async deserialize(t,i,r){var C;let o=null;if(t instanceof J_){const{data:{rect:R,rotation:k,id:F,structParent:D,popupRef:I},container:H,parent:{page:{pageNumber:j}}}=t,B=H.querySelector("canvas"),V=r.imageManager.getFromCanvas(H.id,B);B.remove();const Q=((C=await i._structTree.getAriaAttributes(`${Wv}${F}`))==null?void 0:C.get("aria-label"))||"";o=t={annotationType:Pe.STAMP,bitmapId:V.id,bitmap:V.bitmap,pageIndex:j-1,rect:R.slice(0),rotation:k,id:F,deleted:!1,accessibilityData:{decorative:!1,altText:Q},isSvg:!1,structParent:D,popupRef:I}}const c=await super.deserialize(t,i,r),{rect:u,bitmap:f,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:w}=t;g&&r.imageManager.isValidId(g)?(_(c,Xt,g),f&&_(c,ut,f)):_(c,js,p),_(c,Bn,y);const[A,b]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/b,c.annotationElementId=t.id||null,w&&(c.altTextData=w),c._initialData=o,_(c,ic,!!o),c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Pe.STAMP,bitmapId:l(this,Xt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Bn),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=E(this,ze,Mf).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:o,altText:c}=this.serializeAltText(!1);if(!o&&c&&(r.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const f=E(this,ze,US).call(this,r);if(f.isSame)return null;f.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const u=l(this,Bn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(l(this,Xt)))i.stamps.set(l(this,Xt),{area:u,serialized:r}),r.bitmap=E(this,ze,Mf).call(this,!1);else if(l(this,Bn)){const f=i.stamps.get(l(this,Xt));u>f.area&&(f.area=u,f.serialized.bitmap.close(),f.serialized.bitmap=E(this,ze,Mf).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};ut=new WeakMap,Xt=new WeakMap,Ur=new WeakMap,js=new WeakMap,$r=new WeakMap,nc=new WeakMap,ts=new WeakMap,Hs=new WeakMap,ns=new WeakMap,Bn=new WeakMap,ic=new WeakMap,ze=new WeakSet,du=function(t,i=!1){if(!t){this.remove();return}_(this,ut,t.bitmap),i||(_(this,Xt,t.id),_(this,Bn,t.isSvg)),t.file&&_(this,nc,t.file.name),E(this,ze,Rv).call(this)},fu=function(){if(_(this,Ur,null),this._uiManager.enableWaiting(!1),!!l(this,ts)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ut)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ut)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Pf=function(){if(l(this,Xt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Xt)).then(r=>E(this,ze,du).call(this,r,!0)).finally(()=>E(this,ze,fu).call(this));return}if(l(this,js)){const r=l(this,js);_(this,js,null),this._uiManager.enableWaiting(!0),_(this,Ur,this._uiManager.imageManager.getFromUrl(r).then(o=>E(this,ze,du).call(this,o)).finally(()=>E(this,ze,fu).call(this)));return}if(l(this,$r)){const r=l(this,$r);_(this,$r,null),this._uiManager.enableWaiting(!0),_(this,Ur,this._uiManager.imageManager.getFromFile(r).then(o=>E(this,ze,du).call(this,o)).finally(()=>E(this,ze,fu).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=mu.supportedTypesStr;const i=this._uiManager._signal;_(this,Ur,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,ze,du).call(this,o)}r()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>E(this,ze,fu).call(this))),t.click()},Rv=function(){const{div:t}=this;let{width:i,height:r}=l(this,ut);const[o,c]=this.pageDimensions,u=.75;if(this.width)i=this.width*o,r=this.height*c;else if(i>u*o||r>u*c){const y=Math.min(u*o/i,u*c/r);i*=y,r*=y}const[f,p]=this.parentDimensions;this.setDims(i*f/o,r*p/c),this._uiManager.enableWaiting(!1);const g=_(this,ts,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),E(this,ze,Pv).call(this,i,r),E(this,ze,BS).call(this),l(this,ic)||(this.parent.addUndoableEditor(this),_(this,ic,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,nc)&&g.setAttribute("aria-label",l(this,nc))},HS=function(t,i){var u;const[r,o]=this.parentDimensions;this.width=t/r,this.height=i/o,(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,ns)!==null&&clearTimeout(l(this,ns)),_(this,ns,setTimeout(()=>{_(this,ns,null),E(this,ze,Pv).call(this,t,i)},200))},Lf=function(t,i){const{width:r,height:o}=l(this,ut);let c=r,u=o,f=l(this,ut);for(;c>2*t||u>2*i;){const p=c,g=u;c>2*t&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*i&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const y=new OffscreenCanvas(c,u);y.getContext("2d").drawImage(f,0,0,p,g,0,0,c,u),f=y.transferToImageBitmap()}return f},Pv=function(t,i){const r=new bm,o=Math.ceil(t*r.sx),c=Math.ceil(i*r.sy),u=l(this,ts);if(!u||u.width===o&&u.height===c)return;u.width=o,u.height=c;const f=l(this,Bn)?l(this,ut):E(this,ze,Lf).call(this,o,c),p=u.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,o,c)},Mf=function(t){if(t){if(l(this,Bn)){const o=this._uiManager.imageManager.getSvgUrl(l(this,Xt));if(o)return o}const i=document.createElement("canvas");return{width:i.width,height:i.height}=l(this,ut),i.getContext("2d").drawImage(l(this,ut),0,0),i.toDataURL()}if(l(this,Bn)){const[i,r]=this.pageDimensions,o=Math.round(this.width*i*Xr.PDF_TO_CSS_UNITS),c=Math.round(this.height*r*Xr.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,c);return u.getContext("2d").drawImage(l(this,ut),0,0,l(this,ut).width,l(this,ut).height,0,0,o,c),u.transferToImageBitmap()}return structuredClone(l(this,ut))},BS=function(){this._uiManager._signal&&(_(this,Hs,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&E(this,ze,HS).call(this,i.width,i.height)})),l(this,Hs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Hs))==null||t.disconnect(),_(this,Hs,null)},{once:!0}))},US=function(t){var p;const{rect:i,pageIndex:r,accessibilityData:{altText:o}}=this._initialData,c=t.rect.every((g,y)=>Math.abs(g-i[y])<1),u=t.pageIndex===r,f=(((p=t.accessibilityData)==null?void 0:p.alt)||"")===o;return{isSame:c&&u&&f,isSameAltText:f}},xe(mu,"_type","stamp"),xe(mu,"_editorType",Pe.STAMP);let Tv=mu;var ma,sc,is,Vr,Bs,Un,Wr,rc,oc,rn,Us,ye,Gr,qt,$S,Mv,Iv,Dv,If;const mi=class mi{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:f,viewport:p,l10n:g}){x(this,qt);x(this,ma);x(this,sc,!1);x(this,is,null);x(this,Vr,null);x(this,Bs,null);x(this,Un,new Map);x(this,Wr,!1);x(this,rc,!1);x(this,oc,!1);x(this,rn,null);x(this,Us,null);x(this,ye);const y=[...l(mi,Gr).values()];if(!mi._initialized){mi._initialized=!0;for(const w of y)w.initialize(g,e)}e.registerEditorTypes(y),_(this,ye,e),this.pageIndex=t,this.div=i,_(this,ma,o),_(this,is,c),this.viewport=p,_(this,rn,f),this.drawLayer=u,this._structTree=r,l(this,ye).addLayer(this)}get isEmpty(){return l(this,Un).size===0}get isInvisible(){return this.isEmpty&&l(this,ye).getMode()===Pe.NONE}updateToolbar(e){l(this,ye).updateToolbar(e)}updateMode(e=l(this,ye).getMode()){switch(E(this,qt,If).call(this),e){case Pe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Pe.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Pe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of l(mi,Gr).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,rn))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,ye).getMode()!==Pe.INK)return;if(!e){for(const i of l(this,Un).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,ye).setEditingState(e)}addCommands(e){l(this,ye).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,is))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of l(this,Un).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,ye).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!l(this,is))return;const t=l(this,is).getEditableAnnotations();for(const i of t){if(i.hide(),l(this,ye).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;_(this,oc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const o of l(this,Un).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else t.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}if(l(this,is)){const o=l(this,is).getEditableAnnotations();for(const c of o){const{id:u}=c.data;if(l(this,ye).isDeletedAnnotationElement(u))continue;let f=t.get(u);if(f){f.resetAnnotationElement(c),f.show(!1),c.show();continue}f=e.get(u),f&&(l(this,ye).addChangedExistingAnnotation(f),f.renderAnnotationElement(c)&&f.show(!1)),c.show()}}E(this,qt,If).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const o of l(mi,Gr).values())i.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),_(this,oc,!1)}getEditableAnnotation(e){var t;return((t=l(this,is))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,ye).getActive()!==e&&l(this,ye).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,rn))!=null&&e.div&&!l(this,Us)){_(this,Us,new AbortController);const t=l(this,ye).combinedSignal(l(this,Us));l(this,rn).div.addEventListener("pointerdown",E(this,qt,$S).bind(this),{signal:t}),l(this,rn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,rn))!=null&&e.div&&l(this,Us)&&(l(this,Us).abort(),_(this,Us,null),l(this,rn).div.classList.remove("highlighting"))}enableClick(){if(l(this,Vr))return;_(this,Vr,new AbortController);const e=l(this,ye).combinedSignal(l(this,Vr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=l(this,Vr))==null||e.abort(),_(this,Vr,null)}attach(e){l(this,Un).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,ye).isDeletedAnnotationElement(t)&&l(this,ye).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,Un).delete(e.id),(t=l(this,ma))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,oc)&&e.annotationElementId&&l(this,ye).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,ye).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,rc)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,ye).addDeletedAnnotationElement(e.annotationElementId),qe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,ye).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,ye).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Bs)&&(e._focusEventsAllowed=!1,_(this,Bs,setTimeout(()=>{_(this,Bs,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,ye)._signal}),t.focus())},0))),e._structTreeParentId=(i=l(this,ma))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return l(this,ye).getId()}combinedSignal(e){return l(this,ye).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,qt,Mv))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,ye).updateToolbar(e),l(this,ye).updateMode(e);const{offsetX:i,offsetY:r}=E(this,qt,Dv).call(this),o=this.getNextId(),c=E(this,qt,Iv).call(this,{parent:this,id:o,x:i,y:r,uiManager:l(this,ye),isCentered:!0,...t});c&&this.add(c)}async deserialize(e){var t;return await((t=l(mi,Gr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,ye)))||null}createAndAddNewEditor(e,t,i={}){const r=this.getNextId(),o=E(this,qt,Iv).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:l(this,ye),isCentered:t,...i});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(E(this,qt,Dv).call(this),!0)}setSelected(e){l(this,ye).setSelected(e)}toggleSelected(e){l(this,ye).toggleSelected(e)}unselect(e){l(this,ye).unselect(e)}pointerup(e){const{isMac:t}=pn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,Wr)){if(_(this,Wr,!1),!l(this,sc)){_(this,sc,!0);return}if(l(this,ye).getMode()===Pe.STAMP){l(this,ye).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,ye).getMode()===Pe.HIGHLIGHT&&this.enableTextSelection(),l(this,Wr)){_(this,Wr,!1);return}const{isMac:t}=pn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;_(this,Wr,!0);const i=l(this,ye).getActive();_(this,sc,!i||i.isEmpty())}findNewParent(e,t,i){const r=l(this,ye).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=l(this,ye).getActive())==null?void 0:e.parent)===this&&(l(this,ye).commitOrRemove(),l(this,ye).setActiveEditor(null)),l(this,Bs)&&(clearTimeout(l(this,Bs)),_(this,Bs,null));for(const i of l(this,Un).values())(t=l(this,ma))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,Un).clear(),l(this,ye).removeLayer(this)}render({viewport:e}){this.viewport=e,va(this.div,e);for(const t of l(this,ye).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,ye).commitOrRemove(),E(this,qt,If).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,va(this.div,{rotation:i}),t!==i)for(const r of l(this,Un).values())r.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,ye).viewParameters.realScale}};ma=new WeakMap,sc=new WeakMap,is=new WeakMap,Vr=new WeakMap,Bs=new WeakMap,Un=new WeakMap,Wr=new WeakMap,rc=new WeakMap,oc=new WeakMap,rn=new WeakMap,Us=new WeakMap,ye=new WeakMap,Gr=new WeakMap,qt=new WeakSet,$S=function(e){l(this,ye).unselectAll();const{target:t}=e;if(t===l(this,rn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,rn).div.contains(t)){const{isMac:i}=pn.platform;if(e.button!==0||e.ctrlKey&&i)return;l(this,ye).showAllEditors("highlight",!0,!0),l(this,rn).div.classList.add("free"),this.toggleDrawing(),zf.startHighlighting(this,l(this,ye).direction==="ltr",{target:l(this,rn).div,x:e.x,y:e.y}),l(this,rn).div.addEventListener("pointerup",()=>{l(this,rn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ye)._signal}),e.preventDefault()}},Mv=function(){return l(mi,Gr).get(l(this,ye).getMode())},Iv=function(e){const t=l(this,qt,Mv);return t?new t.prototype.constructor(e):null},Dv=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,e),c=Math.max(0,t),u=Math.min(window.innerWidth,e+i),f=Math.min(window.innerHeight,t+r),p=(o+u)/2-e,g=(c+f)/2-t,[y,w]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:w}},If=function(){_(this,rc,!0);for(const e of l(this,Un).values())e.isEmpty()&&e.remove();_(this,rc,!1)},xe(mi,"_initialized",!1),x(mi,Gr,new Map([uv,wv,Tv,zf].map(e=>[e._editorType,e])));let Lv=mi;var ss,Lh,St,$s,Mh,Nv,Sa,Ov,VS;const Vt=class Vt{constructor({pageIndex:e}){x(this,Sa);x(this,ss,null);x(this,Lh,0);x(this,St,new Map);x(this,$s,new Map);this.pageIndex=e}setParent(e){if(!l(this,ss)){_(this,ss,e);return}if(l(this,ss)!==e){if(l(this,St).size>0)for(const t of l(this,St).values())t.remove(),e.append(t);_(this,ss,e)}}static get _svgFactory(){return je(this,"_svgFactory",new ty)}draw(e,t,i,r=!1){const o=un(this,Lh)._++,c=E(this,Sa,Ov).call(this,e.box);c.classList.add(...e.classNamesForDrawing);const u=Vt._svgFactory.createElement("defs");c.append(u);const f=Vt._svgFactory.createElement("path");u.append(f);const p=`path_p${this.pageIndex}_${o}`;f.setAttribute("id",p),f.setAttribute("d",e.toSVGPath()),r&&l(this,$s).set(o,f);const g=E(this,Sa,VS).call(this,u,p),y=Vt._svgFactory.createElement("use");return c.append(y),c.setAttribute("fill",t),c.setAttribute("fill-opacity",i),y.setAttribute("href",`#${p}`),l(this,St).set(o,c),{id:o,clipPathId:`url(#${g})`}}drawOutline(e){const t=un(this,Lh)._++,i=E(this,Sa,Ov).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const r=Vt._svgFactory.createElement("defs");i.append(r);const o=Vt._svgFactory.createElement("path");r.append(o);const c=`path_p${this.pageIndex}_${t}`;o.setAttribute("id",c),o.setAttribute("d",e.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(e.mustRemoveSelfIntersections){const g=Vt._svgFactory.createElement("mask");r.append(g),u=`mask_p${this.pageIndex}_${t}`,g.setAttribute("id",u),g.setAttribute("maskUnits","objectBoundingBox");const y=Vt._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const w=Vt._svgFactory.createElement("use");g.append(w),w.setAttribute("href",`#${c}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const f=Vt._svgFactory.createElement("use");i.append(f),f.setAttribute("href",`#${c}`),u&&f.setAttribute("mask",`url(#${u})`);const p=f.cloneNode();return i.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),l(this,St).set(t,i),t}finalizeLine(e,t){const i=l(this,$s).get(e);l(this,$s).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,St).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){l(this,$s).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;E(i=Vt,Mh,Nv).call(i,l(this,St).get(e),t)}show(e,t){l(this,St).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,St).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,St).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,St).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,St).get(e).classList.add(t)}removeClass(e,t){l(this,St).get(e).classList.remove(t)}getSVGRoot(e){return l(this,St).get(e)}remove(e){l(this,$s).delete(e),l(this,ss)!==null&&(l(this,St).get(e).remove(),l(this,St).delete(e))}destroy(){_(this,ss,null);for(const e of l(this,St).values())e.remove();l(this,St).clear(),l(this,$s).clear()}};ss=new WeakMap,Lh=new WeakMap,St=new WeakMap,$s=new WeakMap,Mh=new WeakSet,Nv=function(e,{x:t=0,y:i=0,width:r=1,height:o=1}={}){const{style:c}=e;c.top=`${100*i}%`,c.left=`${100*t}%`,c.width=`${100*r}%`,c.height=`${100*o}%`},Sa=new WeakSet,Ov=function(e){var i;const t=Vt._svgFactory.create(1,1,!0);return l(this,ss).append(t),t.setAttribute("aria-hidden",!0),E(i=Vt,Mh,Nv).call(i,t,e),t},VS=function(e,t){const i=Vt._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const o=Vt._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),r},x(Vt,Mh);let Fv=Vt;var FC=Te.AbortException,NC=Te.AnnotationEditorLayer,OC=Te.AnnotationEditorParamsType,zC=Te.AnnotationEditorType,jC=Te.AnnotationEditorUIManager,WS=Te.AnnotationLayer,GS=Te.AnnotationMode,HC=Te.ColorPicker,BC=Te.DOMSVGFactory,UC=Te.DrawLayer,$C=Te.FeatureTest,hp=Te.GlobalWorkerOptions,VC=Te.ImageKind,WC=Te.InvalidPDFException,GC=Te.MissingPDFException,XC=Te.OPS,qC=Te.OutputScale,YC=Te.PDFDataRangeTransport,KC=Te.PDFDateString,QC=Te.PDFWorker,JC=Te.PasswordResponses,ZC=Te.PermissionFlag,ek=Te.PixelsPerInch,tk=Te.RenderingCancelledException,XS=Te.TextLayer,nk=Te.UnexpectedResponseException,ik=Te.Util,sk=Te.VerbosityLevel,rk=Te.XfaLayer,ok=Te.build,ak=Te.createValidAbsoluteUrl,lk=Te.fetchData,qS=Te.getDocument,ck=Te.getFilenameFromUrl,uk=Te.getPdfFilenameFromUrl,hk=Te.getXfaPageViewport,dk=Te.isDataScheme,fk=Te.isPdfFile,pk=Te.noContextMenu,gk=Te.normalizeUnicode,mk=Te.setLayerDimensions,vk=Te.shadow,yk=Te.version;const wk=Object.freeze(Object.defineProperty({__proto__:null,AbortException:FC,AnnotationEditorLayer:NC,AnnotationEditorParamsType:OC,AnnotationEditorType:zC,AnnotationEditorUIManager:jC,AnnotationLayer:WS,AnnotationMode:GS,ColorPicker:HC,DOMSVGFactory:BC,DrawLayer:UC,FeatureTest:$C,GlobalWorkerOptions:hp,ImageKind:VC,InvalidPDFException:WC,MissingPDFException:GC,OPS:XC,OutputScale:qC,PDFDataRangeTransport:YC,PDFDateString:KC,PDFWorker:QC,PasswordResponses:JC,PermissionFlag:ZC,PixelsPerInch:ek,RenderingCancelledException:tk,TextLayer:XS,UnexpectedResponseException:nk,Util:ik,VerbosityLevel:sk,XfaLayer:rk,build:ok,createValidAbsoluteUrl:ak,fetchData:lk,getDocument:qS,getFilenameFromUrl:ck,getPdfFilenameFromUrl:uk,getXfaPageViewport:hk,isDataScheme:dk,isPdfFile:fk,noContextMenu:pk,normalizeUnicode:gk,setLayerDimensions:mk,shadow:vk,version:yk},Symbol.toStringTag,{value:"Module"}));var Nt=function(d,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return d.concat(o||Array.prototype.slice.call(e))},Ak=["onCopy","onCut","onPaste"],_k=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Sk=["onFocus","onBlur"],Ek=["onInput","onInvalid","onReset","onSubmit"],bk=["onLoad","onError"],xk=["onKeyDown","onKeyPress","onKeyUp"],Ck=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],kk=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Tk=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Rk=["onSelect"],Pk=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Lk=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Mk=["onScroll"],Ik=["onWheel"],Dk=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Fk=["onTransitionEnd"],Nk=["onToggle"],Ok=["onChange"],zk=Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt(Nt([],Ak,!0),_k,!0),Sk,!0),Ek,!0),bk,!0),xk,!0),Ck,!0),kk,!0),Tk,!0),Rk,!0),Pk,!0),Lk,!0),Mk,!0),Ik,!0),Dk,!0),Fk,!0),Ok,!0),Nk,!0);function YS(d,e){var t={};return zk.forEach(function(i){var r=d[i];r&&(e?t[i]=function(o){return r(o,e(i))}:t[i]=r)}),t}function Nh(d){var e=!1,t=new Promise(function(i,r){d.then(function(o){return!e&&i(o)}).catch(function(o){return!e&&r(o)})});return{promise:t,cancel:function(){e=!0}}}function KS(d){var e,t,i="";if(typeof d=="string"||typeof d=="number")i+=d;else if(typeof d=="object")if(Array.isArray(d)){var r=d.length;for(e=0;e<r;e++)d[e]&&(t=KS(d[e]))&&(i&&(i+=" "),i+=t)}else for(t in d)d[t]&&(i&&(i+=" "),i+=t);return i}function dp(){for(var d,e,t=0,i="",r=arguments.length;t<r;t++)(d=arguments[t])&&(e=KS(d))&&(i&&(i+=" "),i+=e);return i}var jk="Invariant failed";function Qe(d,e){if(!d)throw new Error(jk)}var vm,bA;function Hk(){if(bA)return vm;bA=1;var d=function(){};return vm=d,vm}var Bk=Hk();const on=np(Bk);var xA=Object.prototype.hasOwnProperty;function CA(d,e,t){for(t of d.keys())if(al(t,e))return t}function al(d,e){var t,i,r;if(d===e)return!0;if(d&&e&&(t=d.constructor)===e.constructor){if(t===Date)return d.getTime()===e.getTime();if(t===RegExp)return d.toString()===e.toString();if(t===Array){if((i=d.length)===e.length)for(;i--&&al(d[i],e[i]););return i===-1}if(t===Set){if(d.size!==e.size)return!1;for(i of d)if(r=i,r&&typeof r=="object"&&(r=CA(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(d.size!==e.size)return!1;for(i of d)if(r=i[0],r&&typeof r=="object"&&(r=CA(e,r),!r)||!al(i[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)d=new Uint8Array(d),e=new Uint8Array(e);else if(t===DataView){if((i=d.byteLength)===e.byteLength)for(;i--&&d.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(d)){if((i=d.byteLength)===e.byteLength)for(;i--&&d[i]===e[i];);return i===-1}if(!t||typeof d=="object"){i=0;for(t in d)if(xA.call(d,t)&&++i&&!xA.call(e,t)||!(t in e)||!al(d[t],e[t]))return!1;return Object.keys(e).length===i}}return d!==d&&e!==e}const QS=X.createContext(null);function ll({children:d,type:e}){return re.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:d})}const Uk="noopener noreferrer nofollow";class $k{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Qe(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Qe(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Qe(this.pdfDocument),Qe(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Qe(Array.isArray(t));const i=t[0];new Promise(r=>{Qe(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(o=>{r(o)}).catch(()=>{Qe(!1)}):typeof i=="number"?r(i):Qe(!1)}).then(r=>{const o=r+1;Qe(this.pdfViewer),Qe(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:o})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Qe(this.pdfViewer),Qe(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,i){e.href=t,e.rel=this.externalLinkRel||Uk,e.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const kA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},fp=typeof window<"u",JS=fp&&window.location.protocol==="file:";function Vk(d){return typeof d<"u"}function po(d){return Vk(d)&&d!==null}function Wk(d){return typeof d=="string"}function Gk(d){return d instanceof ArrayBuffer}function Xk(d){return Qe(fp),d instanceof Blob}function zv(d){return Wk(d)&&/^data:/.test(d)}function TA(d){Qe(zv(d));const[e="",t=""]=d.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function qk(){return fp&&window.devicePixelRatio||1}const ZS="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function RA(){on(!JS,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${ZS}`)}function Yk(){on(!JS,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${ZS}`)}function Aa(d){d!=null&&d.cancel&&d.cancel()}function jv(d,e){return Object.defineProperty(d,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(d,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(d,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(d,"originalHeight",{get(){return this.view[3]},configurable:!0}),d}function Kk(d){return d.name==="RenderingCancelledException"}function Qk(d){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return t(new Error("Error while reading a file."));e(i.result)},i.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:o}=r.target;if(!o)return t(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},i.readAsArrayBuffer(d)})}function Jk(d,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return d}}function ac(){return X.useReducer(Jk,{value:void 0,error:void 0})}var Zk=function(d,e,t,i){function r(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function u(g){try{p(i.next(g))}catch(y){c(y)}}function f(g){try{p(i.throw(g))}catch(y){c(y)}}function p(g){g.done?o(g.value):r(g.value).then(u,f)}p((i=i.apply(d,e||[])).next())})},PA=function(d,e){var t={};for(var i in d)Object.prototype.hasOwnProperty.call(d,i)&&e.indexOf(i)<0&&(t[i]=d[i]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(d);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(d,i[r])&&(t[i[r]]=d[i[r]]);return t};const{PDFDataRangeTransport:eT}=wk,tT=(d,e)=>{switch(e){case kA.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");d(t);break}case kA.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");d(t);break}}};function LA(d){return typeof d=="object"&&d!==null&&("data"in d||"range"in d||"url"in d)}const nT=X.forwardRef(function(e,t){var{children:i,className:r,error:o="Failed to load PDF file.",externalLinkRel:c,externalLinkTarget:u,file:f,inputRef:p,imageResourcesPath:g,loading:y="Loading PDF…",noData:w="No PDF file specified.",onItemClick:A,onLoadError:b,onLoadProgress:C,onLoadSuccess:R,onPassword:k=tT,onSourceError:F,onSourceSuccess:D,options:I,renderMode:H,rotate:j}=e,B=PA(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[V,Q]=ac(),{value:ne,error:te}=V,[Ee,fe]=ac(),{value:he,error:we}=Ee,ge=X.useRef(new $k),K=X.useRef([]),U=X.useRef(void 0),oe=X.useRef(void 0);f&&f!==U.current&&LA(f)&&(on(!al(f,U.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),U.current=f),I&&I!==oe.current&&(on(!al(I,oe.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),oe.current=I);const J=X.useRef({scrollPageIntoView:Ue=>{const{dest:it,pageNumber:bt,pageIndex:gt=bt-1}=Ue;if(A){A({dest:it,pageIndex:gt,pageNumber:bt});return}const Ii=K.current[gt];if(Ii){Ii.scrollIntoView();return}on(!1,`An internal link leading to page ${bt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});X.useImperativeHandle(t,()=>({linkService:ge,pages:K,viewer:J}),[]);function M(){D&&D()}function $(){te&&(on(!1,te.toString()),F&&F(te))}function le(){Q({type:"RESET"})}X.useEffect(le,[f,Q]);const Ae=X.useCallback(()=>Zk(this,void 0,void 0,function*(){if(!f)return null;if(typeof f=="string")return zv(f)?{data:TA(f)}:(RA(),{url:f});if(f instanceof eT)return{range:f};if(Gk(f))return{data:f};if(fp&&Xk(f))return{data:yield Qk(f)};if(Qe(typeof f=="object"),Qe(LA(f)),"url"in f&&typeof f.url=="string"){if(zv(f.url)){const{url:Ue}=f,it=PA(f,["url"]),bt=TA(Ue);return Object.assign({data:bt},it)}RA()}return f}),[f]);X.useEffect(()=>{const Ue=Nh(Ae());return Ue.promise.then(it=>{Q({type:"RESOLVE",value:it})}).catch(it=>{Q({type:"REJECT",error:it})}),()=>{Aa(Ue)}},[Ae,Q]),X.useEffect(()=>{if(!(typeof ne>"u")){if(ne===!1){$();return}M()}},[ne]);function ke(){he&&(R&&R(he),K.current=new Array(he.numPages),ge.current.setDocument(he))}function ve(){we&&(on(!1,we.toString()),b&&b(we))}X.useEffect(function(){fe({type:"RESET"})},[fe,ne]),X.useEffect(function(){if(!ne)return;const it=I?Object.assign(Object.assign({},ne),I):ne,bt=qS(it);C&&(bt.onProgress=C),k&&(bt.onPassword=k);const gt=bt,Ii=gt.promise.then(Qs=>{fe({type:"RESOLVE",value:Qs})}).catch(Qs=>{gt.destroyed||fe({type:"REJECT",error:Qs})});return()=>{Ii.finally(()=>gt.destroy())}},[I,fe,ne]),X.useEffect(()=>{if(!(typeof he>"u")){if(he===!1){ve();return}ke()}},[he]),X.useEffect(function(){ge.current.setViewer(J.current),ge.current.setExternalLinkRel(c),ge.current.setExternalLinkTarget(u)},[c,u]);const me=X.useCallback((Ue,it)=>{K.current[Ue]=it},[]),Le=X.useCallback(Ue=>{delete K.current[Ue]},[]),Oe=X.useMemo(()=>({imageResourcesPath:g,linkService:ge.current,onItemClick:A,pdf:he,registerPage:me,renderMode:H,rotate:j,unregisterPage:Le}),[g,A,he,me,H,j,Le]),De=X.useMemo(()=>YS(B,()=>he),[B,he]);function Mi(){return re.jsx(QS.Provider,{value:Oe,children:i})}function Ks(){return f?he==null?re.jsx(ll,{type:"loading",children:typeof y=="function"?y():y}):he===!1?re.jsx(ll,{type:"error",children:typeof o=="function"?o():o}):Mi():re.jsx(ll,{type:"no-data",children:typeof w=="function"?w():w})}return re.jsx("div",Object.assign({className:dp("react-pdf__Document",r),ref:p,style:{"--scale-factor":"1"}},De,{children:Ks()}))});function eE(){return X.useContext(QS)}function tE(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];var t=d.filter(Boolean);if(t.length<=1){var i=t[0];return i||null}return function(o){t.forEach(function(c){typeof c=="function"?c(o):c&&(c.current=o)})}}const nE=X.createContext(null),iE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},iT=/^H(\d+)$/;function sT(d){return d in iE}function pp(d){return"children"in d}function sE(d){return pp(d)?d.children.length===1&&0 in d.children&&"id"in d.children[0]:!1}function rT(d){const e={};if(pp(d)){const{role:t}=d,i=t.match(iT);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(sT(t)){const r=iE[t];r&&(e.role=r)}}return e}function rE(d){const e={};if(pp(d)){if(d.alt!==void 0&&(e["aria-label"]=d.alt),d.lang!==void 0&&(e.lang=d.lang),sE(d)){const[t]=d.children;if(t){const i=rE(t);return Object.assign(Object.assign({},e),i)}}}else"id"in d&&(e["aria-owns"]=d.id);return e}function oT(d){return d?Object.assign(Object.assign({},rT(d)),rE(d)):null}function oE({className:d,node:e}){const t=X.useMemo(()=>oT(e),[e]),i=X.useMemo(()=>!pp(e)||sE(e)?null:e.children.map((r,o)=>re.jsx(oE,{node:r},o)),[e]);return re.jsx("span",Object.assign({className:d},t,{children:i}))}function gp(){return X.useContext(nE)}function aT(){const d=gp();Qe(d);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=d,[i,r]=ac(),{value:o,error:c}=i,{customTextRenderer:u,page:f}=d;function p(){o&&t&&t(o)}function g(){c&&(on(!1,c.toString()),e&&e(c))}return X.useEffect(function(){r({type:"RESET"})},[r,f]),X.useEffect(function(){if(u||!f)return;const w=Nh(f.getStructTree()),A=w;return w.promise.then(b=>{r({type:"RESOLVE",value:b})}).catch(b=>{r({type:"REJECT",error:b})}),()=>Aa(A)},[u,f,r]),X.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}p()}},[o]),o?re.jsx(oE,{className:"react-pdf__Page__structTree structTree",node:o}):null}const MA=GS;function lT(d){const e=gp();Qe(e);const t=Object.assign(Object.assign({},e),d),{_className:i,canvasBackground:r,devicePixelRatio:o=qk(),onRenderError:c,onRenderSuccess:u,page:f,renderForms:p,renderTextLayer:g,rotate:y,scale:w}=t,{canvasRef:A}=d;Qe(f);const b=X.useRef(null);function C(){f&&u&&u(jv(f,w))}function R(I){Kk(I)||(on(!1,I.toString()),c&&c(I))}const k=X.useMemo(()=>f.getViewport({scale:w*o,rotation:y}),[o,f,y,w]),F=X.useMemo(()=>f.getViewport({scale:w,rotation:y}),[f,y,w]);X.useEffect(function(){if(!f)return;f.cleanup();const{current:H}=b;if(!H)return;H.width=k.width,H.height=k.height,H.style.width=`${Math.floor(F.width)}px`,H.style.height=`${Math.floor(F.height)}px`,H.style.visibility="hidden";const j={annotationMode:p?MA.ENABLE_FORMS:MA.ENABLE,canvasContext:H.getContext("2d",{alpha:!1}),viewport:k};r&&(j.background=r);const B=f.render(j),V=B;return B.promise.then(()=>{H.style.visibility="",C()}).catch(R),()=>Aa(V)},[r,f,p,k,F]);const D=X.useCallback(()=>{const{current:I}=b;I&&(I.width=0,I.height=0)},[]);return X.useEffect(()=>D,[D]),re.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:tE(A,b),style:{display:"block",userSelect:"none"},children:g?re.jsx(aT,{}):null})}function cT(d){return"str"in d}function uT(){const d=gp();Qe(d);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:i,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:c,pageIndex:u,pageNumber:f,rotate:p,scale:g}=d;Qe(c);const[y,w]=ac(),{value:A,error:b}=y,C=X.useRef(null);on(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function R(){A&&i&&i(A)}function k(){b&&(on(!1,b.toString()),t&&t(b))}X.useEffect(function(){w({type:"RESET"})},[c,w]),X.useEffect(function(){if(!c)return;const V=Nh(c.getTextContent()),Q=V;return V.promise.then(ne=>{w({type:"RESOLVE",value:ne})}).catch(ne=>{w({type:"REJECT",error:ne})}),()=>Aa(Q)},[c,w]),X.useEffect(()=>{if(A!==void 0){if(A===!1){k();return}R()}},[A]);const F=X.useCallback(()=>{o&&o()},[o]),D=X.useCallback(B=>{on(!1,B.toString()),r&&r(B)},[r]);function I(){const B=C.current;B&&B.classList.add("selecting")}function H(){const B=C.current;B&&B.classList.remove("selecting")}const j=X.useMemo(()=>c.getViewport({scale:g,rotation:p}),[c,p,g]);return X.useLayoutEffect(function(){if(!c||!A)return;const{current:V}=C;if(!V)return;V.innerHTML="";const Q=c.streamTextContent({includeMarkedContent:!0}),ne={container:V,textContentSource:Q,viewport:j},te=new XS(ne),Ee=te;return te.render().then(()=>{const fe=document.createElement("div");fe.className="endOfContent",V.append(fe);const he=V.querySelectorAll('[role="presentation"]');if(e){let we=0;A.items.forEach((ge,K)=>{if(!cT(ge))return;const U=he[we];if(!U)return;const oe=e(Object.assign({pageIndex:u,pageNumber:f,itemIndex:K},ge));U.innerHTML=oe,we+=ge.str&&ge.hasEOL?2:1})}F()}).catch(D),()=>Aa(Ee)},[e,D,F,c,u,f,A,j]),re.jsx("div",{className:dp("react-pdf__Page__textContent","textLayer"),onMouseUp:H,onMouseDown:I,ref:C})}function hT(){const d=eE(),e=gp();Qe(e);const t=Object.assign(Object.assign({},d),e),{imageResourcesPath:i,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:f,page:p,pdf:g,renderForms:y,rotate:w,scale:A=1}=t;Qe(g),Qe(p),Qe(r);const[b,C]=ac(),{value:R,error:k}=b,F=X.useRef(null);on(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function D(){R&&c&&c(R)}function I(){k&&(on(!1,k.toString()),o&&o(k))}X.useEffect(function(){C({type:"RESET"})},[C,p]),X.useEffect(function(){if(!p)return;const Q=Nh(p.getAnnotations()),ne=Q;return Q.promise.then(te=>{C({type:"RESOLVE",value:te})}).catch(te=>{C({type:"REJECT",error:te})}),()=>{Aa(ne)}},[C,p]),X.useEffect(()=>{if(R!==void 0){if(R===!1){I();return}D()}},[R]);function H(){f&&f()}function j(V){on(!1,`${V}`),u&&u(V)}const B=X.useMemo(()=>p.getViewport({scale:A,rotation:w}),[p,w,A]);return X.useEffect(function(){if(!g||!p||!r||!R)return;const{current:Q}=F;if(!Q)return;const ne=B.clone({dontFlip:!0}),te={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:Q,l10n:null,page:p,structTreeLayer:null,viewport:ne},Ee={annotations:R,annotationStorage:g.annotationStorage,div:Q,imageResourcesPath:i,linkService:r,page:p,renderForms:y,viewport:ne};Q.innerHTML="";try{new WS(te).render(Ee),H()}catch(fe){j(fe)}return()=>{}},[R,i,r,p,g,y,B]),re.jsx("div",{className:dp("react-pdf__Page__annotations","annotationLayer"),ref:F})}var dT=function(d,e){var t={};for(var i in d)Object.prototype.hasOwnProperty.call(d,i)&&e.indexOf(i)<0&&(t[i]=d[i]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(d);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(d,i[r])&&(t[i[r]]=d[i[r]]);return t};const IA=1;function fT(d){const e=eE(),t=Object.assign(Object.assign({},e),d),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:c,children:u,className:f,customRenderer:p,customTextRenderer:g,devicePixelRatio:y,error:w="Failed to load the page.",height:A,inputRef:b,loading:C="Loading page…",noData:R="No page specified.",onGetAnnotationsError:k,onGetAnnotationsSuccess:F,onGetStructTreeError:D,onGetStructTreeSuccess:I,onGetTextError:H,onGetTextSuccess:j,onLoadError:B,onLoadSuccess:V,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:ne,onRenderError:te,onRenderSuccess:Ee,onRenderTextLayerError:fe,onRenderTextLayerSuccess:he,pageIndex:we,pageNumber:ge,pdf:K,registerPage:U,renderAnnotationLayer:oe=!0,renderForms:J=!1,renderMode:M="canvas",renderTextLayer:$=!0,rotate:le,scale:Ae=IA,unregisterPage:ke,width:ve}=t,me=dT(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Le,Oe]=ac(),{value:De,error:Mi}=Le,Ks=X.useRef(null);Qe(K);const Ue=po(ge)?ge-1:we??null,it=ge??(po(we)?we+1:null),bt=le??(De?De.rotate:null),gt=X.useMemo(()=>{if(!De)return null;let Di=1;const rs=Ae??IA;if(ve||A){const Zr=De.getViewport({scale:1,rotation:bt});ve?Di=ve/Zr.width:A&&(Di=A/Zr.height)}return rs*Di},[A,De,bt,Ae,ve]);X.useEffect(function(){return()=>{po(Ue)&&r&&ke&&ke(Ue)}},[r,K,Ue,ke]);function Ii(){if(V){if(!De||!gt)return;V(jv(De,gt))}if(r&&U){if(!po(Ue)||!Ks.current)return;U(Ue,Ks.current)}}function Qs(){Mi&&(on(!1,Mi.toString()),B&&B(Mi))}X.useEffect(function(){Oe({type:"RESET"})},[Oe,K,Ue]),X.useEffect(function(){if(!K||!it)return;const rs=Nh(K.getPage(it)),Zr=rs;return rs.promise.then(os=>{Oe({type:"RESOLVE",value:os})}).catch(os=>{Oe({type:"REJECT",error:os})}),()=>Aa(Zr)},[Oe,K,it]),X.useEffect(()=>{if(De!==void 0){if(De===!1){Qs();return}Ii()}},[De,gt]);const cc=X.useMemo(()=>De&&po(Ue)&&it&&po(bt)&&po(gt)?{_className:i,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:k,onGetAnnotationsSuccess:F,onGetStructTreeError:D,onGetStructTreeSuccess:I,onGetTextError:H,onGetTextSuccess:j,onRenderAnnotationLayerError:Q,onRenderAnnotationLayerSuccess:ne,onRenderError:te,onRenderSuccess:Ee,onRenderTextLayerError:fe,onRenderTextLayerSuccess:he,page:De,pageIndex:Ue,pageNumber:it,renderForms:J,renderTextLayer:$,rotate:bt,scale:gt}:null,[i,o,g,y,k,F,D,I,H,j,Q,ne,te,Ee,fe,he,De,Ue,it,J,$,bt,gt]),Jr=X.useMemo(()=>YS(me,()=>De&&(gt?jv(De,gt):void 0)),[me,De,gt]),li=`${Ue}@${gt}/${bt}`;function uc(){switch(M){case"custom":return Qe(p),re.jsx(p,{},`${li}_custom`);case"none":return null;case"canvas":default:return re.jsx(lT,{canvasRef:c},`${li}_canvas`)}}function zh(){return $?re.jsx(uT,{},`${li}_text`):null}function jh(){return oe?re.jsx(hT,{},`${li}_annotations`):null}function Hh(){return re.jsxs(nE.Provider,{value:cc,children:[uc(),zh(),jh(),u]})}function Bh(){return it?K===null||De===void 0||De===null?re.jsx(ll,{type:"loading",children:typeof C=="function"?C():C}):K===!1||De===!1?re.jsx(ll,{type:"error",children:typeof w=="function"?w():w}):Hh():re.jsx(ll,{type:"no-data",children:typeof R=="function"?R():R})}return re.jsx("div",Object.assign({className:dp(i,f),"data-page-number":it,ref:tE(b,Ks),style:{"--scale-factor":`${gt}`,backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Jr,{children:Bh()}))}Yk();hp.workerSrc="pdf.worker.mjs";var ym={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var DA;function pT(){return DA||(DA=1,function(d){(function(){var e={}.hasOwnProperty;function t(){for(var o="",c=0;c<arguments.length;c++){var u=arguments[c];u&&(o=r(o,i(u)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var c="";for(var u in o)e.call(o,u)&&o[u]&&(c=r(c,u));return c}function r(o,c){return c?o?o+" "+c:o+c:o}d.exports?(t.default=t,d.exports=t):window.classNames=t})()}(ym)),ym.exports}var gT=pT();const lc=np(gT),mT=["xxl","xl","lg","md","sm","xs"],vT="xs",mp=X.createContext({prefixes:{},breakpoints:mT,minBreakpoint:vT}),{Consumer:KT,Provider:QT}=mp;function Oh(d,e){const{prefixes:t}=X.useContext(mp);return d||t[e]||e}function aE(){const{breakpoints:d}=X.useContext(mp);return d}function lE(){const{minBreakpoint:d}=X.useContext(mp);return d}const cE=X.forwardRef(({bsPrefix:d,className:e,as:t="div",...i},r)=>{const o=Oh(d,"row"),c=aE(),u=lE(),f=`${o}-cols`,p=[];return c.forEach(g=>{const y=i[g];delete i[g];let w;y!=null&&typeof y=="object"?{cols:w}=y:w=y;const A=g!==u?`-${g}`:"";w!=null&&p.push(`${f}${A}-${w}`)}),re.jsx(t,{ref:r,...i,className:lc(e,o,...p)})});cE.displayName="Row";function yT({as:d,bsPrefix:e,className:t,...i}){e=Oh(e,"col");const r=aE(),o=lE(),c=[],u=[];return r.forEach(f=>{const p=i[f];delete i[f];let g,y,w;typeof p=="object"&&p!=null?{span:g,offset:y,order:w}=p:g=p;const A=f!==o?`-${f}`:"";g&&c.push(g===!0?`${e}${A}`:`${e}${A}-${g}`),w!=null&&u.push(`order${A}-${w}`),y!=null&&u.push(`offset${A}-${y}`)}),[{...i,className:lc(t,...c,...u)},{as:d,bsPrefix:e,spans:c}]}const Hv=X.forwardRef((d,e)=>{const[{className:t,...i},{as:r="div",bsPrefix:o,spans:c}]=yT(d);return re.jsx(r,{...i,ref:e,className:lc(t,!c.length&&o)})});Hv.displayName="Col";function Bv(){return Bv=Object.assign?Object.assign.bind():function(d){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(d[i]=t[i])}return d},Bv.apply(null,arguments)}function wT(d,e){if(d==null)return{};var t={};for(var i in d)if({}.hasOwnProperty.call(d,i)){if(e.indexOf(i)!==-1)continue;t[i]=d[i]}return t}function FA(d){return"default"+d.charAt(0).toUpperCase()+d.substr(1)}function AT(d){var e=_T(d,"string");return typeof e=="symbol"?e:String(e)}function _T(d,e){if(typeof d!="object"||d===null)return d;var t=d[Symbol.toPrimitive];if(t!==void 0){var i=t.call(d,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(d)}function ST(d,e,t){var i=X.useRef(d!==void 0),r=X.useState(e),o=r[0],c=r[1],u=d!==void 0,f=i.current;return i.current=u,!u&&f&&o!==e&&c(e),[u?d:o,X.useCallback(function(p){for(var g=arguments.length,y=new Array(g>1?g-1:0),w=1;w<g;w++)y[w-1]=arguments[w];t&&t.apply(void 0,[p].concat(y)),c(p)},[t])]}function ET(d,e){return Object.keys(e).reduce(function(t,i){var r,o=t,c=o[FA(i)],u=o[i],f=wT(o,[FA(i),i].map(AT)),p=e[i],g=ST(u,c,d[p]),y=g[0],w=g[1];return Bv({},f,(r={},r[i]=y,r[p]=w,r))},d)}var bT=Function.prototype.bind.call(Function.prototype.call,[].slice);function xT(d,e){return bT(d.querySelectorAll(e))}function CT(){const[,d]=X.useReducer(e=>e+1,0);return d}const NA=d=>!d||typeof d=="function"?d:e=>{d.current=e};function kT(d,e){const t=NA(d),i=NA(e);return r=>{t&&t(r),i&&i(r)}}function TT(d,e){return X.useMemo(()=>kT(d,e),[d,e])}const iy=X.createContext(null);iy.displayName="NavContext";const Uv=X.createContext(null),sy=(d,e=null)=>d!=null?String(d):e||null,uE=X.createContext(null),RT="data-rr-ui-",PT="rrUi";function ry(d){return`${RT}${d}`}function LT(d){return`${PT}${d}`}function MT(d){const e=X.useRef(d);return X.useEffect(()=>{e.current=d},[d]),e}function hE(d){const e=MT(d);return X.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const IT=["as","disabled"];function DT(d,e){if(d==null)return{};var t={};for(var i in d)if({}.hasOwnProperty.call(d,i)){if(e.indexOf(i)>=0)continue;t[i]=d[i]}return t}function FT(d){return!d||d.trim()==="#"}function dE({tagName:d,disabled:e,href:t,target:i,rel:r,role:o,onClick:c,tabIndex:u=0,type:f}){d||(t!=null||i!=null||r!=null?d="a":d="button");const p={tagName:d};if(d==="button")return[{type:f||"button",disabled:e},p];const g=w=>{if((e||d==="a"&&FT(t))&&w.preventDefault(),e){w.stopPropagation();return}c==null||c(w)},y=w=>{w.key===" "&&(w.preventDefault(),g(w))};return d==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:o??"button",disabled:void 0,tabIndex:e?void 0:u,href:t,target:d==="a"?i:void 0,"aria-disabled":e||void 0,rel:d==="a"?r:void 0,onClick:g,onKeyDown:y},p]}const fE=X.forwardRef((d,e)=>{let{as:t,disabled:i}=d,r=DT(d,IT);const[o,{tagName:c}]=dE(Object.assign({tagName:t,disabled:i},r));return re.jsx(c,Object.assign({},r,o,{ref:e}))});fE.displayName="Button";const NT=["as","active","eventKey"];function OT(d,e){if(d==null)return{};var t={};for(var i in d)if({}.hasOwnProperty.call(d,i)){if(e.indexOf(i)>=0)continue;t[i]=d[i]}return t}function pE({key:d,onClick:e,active:t,id:i,role:r,disabled:o}){const c=X.useContext(Uv),u=X.useContext(iy),f=X.useContext(uE);let p=t;const g={role:r};if(u){!r&&u.role==="tablist"&&(g.role="tab");const y=u.getControllerId(d??null),w=u.getControlledId(d??null);g[ry("event-key")]=d,g.id=y||i,p=t==null&&d!=null?u.activeKey===d:t,(p||!(f!=null&&f.unmountOnExit)&&!(f!=null&&f.mountOnEnter))&&(g["aria-controls"]=w)}return g.role==="tab"&&(g["aria-selected"]=p,p||(g.tabIndex=-1),o&&(g.tabIndex=-1,g["aria-disabled"]=!0)),g.onClick=hE(y=>{o||(e==null||e(y),d!=null&&c&&!y.isPropagationStopped()&&c(d,y))}),[g,{isActive:p}]}const gE=X.forwardRef((d,e)=>{let{as:t=fE,active:i,eventKey:r}=d,o=OT(d,NT);const[c,u]=pE(Object.assign({key:sy(r,o.href),active:i},o));return c[ry("active")]=u.isActive,re.jsx(t,Object.assign({},o,c,{ref:e}))});gE.displayName="NavItem";const zT=["as","onSelect","activeKey","role","onKeyDown"];function jT(d,e){if(d==null)return{};var t={};for(var i in d)if({}.hasOwnProperty.call(d,i)){if(e.indexOf(i)>=0)continue;t[i]=d[i]}return t}const OA=()=>{},zA=ry("event-key"),mE=X.forwardRef((d,e)=>{let{as:t="div",onSelect:i,activeKey:r,role:o,onKeyDown:c}=d,u=jT(d,zT);const f=CT(),p=X.useRef(!1),g=X.useContext(Uv),y=X.useContext(uE);let w,A;y&&(o=o||"tablist",r=y.activeKey,w=y.getControlledId,A=y.getControllerId);const b=X.useRef(null),C=D=>{const I=b.current;if(!I)return null;const H=xT(I,`[${zA}]:not([aria-disabled=true])`),j=I.querySelector("[aria-selected=true]");if(!j||j!==document.activeElement)return null;const B=H.indexOf(j);if(B===-1)return null;let V=B+D;return V>=H.length&&(V=0),V<0&&(V=H.length-1),H[V]},R=(D,I)=>{D!=null&&(i==null||i(D,I),g==null||g(D,I))},k=D=>{if(c==null||c(D),!y)return;let I;switch(D.key){case"ArrowLeft":case"ArrowUp":I=C(-1);break;case"ArrowRight":case"ArrowDown":I=C(1);break;default:return}I&&(D.preventDefault(),R(I.dataset[LT("EventKey")]||null,D),p.current=!0,f())};X.useEffect(()=>{if(b.current&&p.current){const D=b.current.querySelector(`[${zA}][aria-selected=true]`);D==null||D.focus()}p.current=!1});const F=TT(e,b);return re.jsx(Uv.Provider,{value:R,children:re.jsx(iy.Provider,{value:{role:o,activeKey:sy(r),getControlledId:w||OA,getControllerId:A||OA},children:re.jsx(t,Object.assign({},u,{onKeyDown:k,ref:F,role:o}))})})});mE.displayName="Nav";const HT=Object.assign(mE,{Item:gE}),vE=X.createContext(null);vE.displayName="NavbarContext";const yE=X.createContext(null);yE.displayName="CardHeaderContext";const wE=X.forwardRef(({className:d,bsPrefix:e,as:t="div",...i},r)=>(e=Oh(e,"nav-item"),re.jsx(t,{ref:r,className:lc(d,e),...i})));wE.displayName="NavItem";const BT=["onKeyDown"];function UT(d,e){if(d==null)return{};var t={};for(var i in d)if({}.hasOwnProperty.call(d,i)){if(e.indexOf(i)>=0)continue;t[i]=d[i]}return t}function $T(d){return!d||d.trim()==="#"}const AE=X.forwardRef((d,e)=>{let{onKeyDown:t}=d,i=UT(d,BT);const[r]=dE(Object.assign({tagName:"a"},i)),o=hE(c=>{r.onKeyDown(c),t==null||t(c)});return $T(i.href)||i.role==="button"?re.jsx("a",Object.assign({ref:e},i,r,{onKeyDown:o})):re.jsx("a",Object.assign({ref:e},i,{onKeyDown:t}))});AE.displayName="Anchor";const _E=X.forwardRef(({bsPrefix:d,className:e,as:t=AE,active:i,eventKey:r,disabled:o=!1,...c},u)=>{d=Oh(d,"nav-link");const[f,p]=pE({key:sy(r,c.href),active:i,disabled:o,...c});return re.jsx(t,{...c,...f,ref:u,disabled:o,className:lc(e,d,o&&"disabled",p.isActive&&"active")})});_E.displayName="NavLink";const SE=X.forwardRef((d,e)=>{const{as:t="div",bsPrefix:i,variant:r,fill:o=!1,justify:c=!1,navbar:u,navbarScroll:f,className:p,activeKey:g,...y}=ET(d,{activeKey:"onSelect"}),w=Oh(i,"nav");let A,b,C=!1;const R=X.useContext(vE),k=X.useContext(yE);return R?(A=R.bsPrefix,C=u??!0):k&&({cardHeaderBsPrefix:b}=k),re.jsx(HT,{as:t,ref:e,activeKey:g,className:lc(p,{[w]:!C,[`${A}-nav`]:C,[`${A}-nav-scroll`]:C&&f,[`${b}-${r}`]:!!b,[`${w}-${r}`]:!!r,[`${w}-fill`]:o,[`${w}-justified`]:c}),...y})});SE.displayName="Nav";const wm=Object.assign(SE,{Item:wE,Link:_E}),EE="/rayo-project-blog/assets/rayologotipo-BqUbV4ea.png",VT=({contentItems:d,onSelectContent:e,activeContentId:t})=>re.jsxs("div",{className:"d-flex flex-column h-100",children:[re.jsx("div",{className:"sidebar-profile-icon-container text-center mb-3",children:re.jsx("div",{className:"sidebar-profile-icon",children:re.jsx("img",{src:EE,alt:"Logo",className:"profile-image"})})}),re.jsx("h5",{className:"text-center project-title",children:"RAYO PROJECT"}),re.jsx("p",{className:"text-center text-muted small mb-3 project-authors",children:"Juan Ramírez & Daniel Yepez"}),re.jsx("div",{className:"sidebar-nav-list-wrapper",children:re.jsx(wm,{className:"flex-column nav-pills",children:d.map(i=>re.jsx(wm.Item,{children:re.jsx(wm.Link,{href:`#${i.id}`,className:`sidebar-nav-link ${i.id===t?"active":""}`,onClick:r=>{r.preventDefault(),e(i.id)},children:i.title})},i.id))})})]});hp.workerSrc=new URL("/rayo-project-blog/assets/pdf.worker.min-GB3t0DcA.mjs",import.meta.url).toString();const WT=({activeContent:d})=>{const[e,t]=X.useState(null),[i,r]=X.useState(null),o=X.useRef(null);function c({numPages:f}){t(f)}if(X.useEffect(()=>{const f=()=>{o.current&&r(o.current.offsetWidth)};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[d]),!d)return re.jsx("div",{className:"text-center",children:re.jsx("p",{className:"main-text",children:"Selecciona un elemento del menú."})});const u=(f,p,g)=>f.split(/(\[IMAGEN_PARRAFO:.*?\])|(\[PDF:.*?\])/g).map((w,A)=>{if(!w)return null;if(w.startsWith("[IMAGEN_PARRAFO:")){const b=w.substring(16,w.length-1),C=p&&p[b];if(C)return re.jsx("img",{src:b,alt:C.alt||"Imagen en el párrafo",className:C.className||"inline-image"},A)}if(w.startsWith("[PDF:")){const b=w.substring(5,w.length-1),C=g&&g[b];if(C)return re.jsx("div",{ref:o,className:"inline-pdf-viewer-container",style:{height:C.height||"auto"},children:i&&re.jsx(nT,{file:b,onLoadSuccess:c,error:"No se pudo cargar el PDF.",loading:"Cargando PDF...",children:Array.from(new Array(e),(R,k)=>re.jsx(fT,{pageNumber:k+1,width:i},`page_${k+1}`))})},A)}return re.jsx("span",{children:w},A)});return re.jsxs("div",{className:"text-center",children:[re.jsx("div",{className:"large-image-placeholder mb-4",children:d.image&&re.jsx("img",{src:d.image,alt:d.title,className:"large-image-actual-image"})}),re.jsx("div",{className:"main-profile-icon-container mb-3",children:re.jsx("div",{className:"main-profile-icon",children:re.jsx("img",{src:EE,alt:"Logo",className:"profile-image"})})}),re.jsx("h1",{className:"main-title mb-4",children:d.title}),d.paragraphs.map((f,p)=>re.jsx("p",{className:"main-text text-start",children:u(f,d.inlineImages,d.inlinePdfs)},p))]})},nf=[{id:"bio-rayo",title:"🧩 ¿Cómo se formó el proyecto Rayo?",image:"src/assets/books.jpeg",paragraphs:["En 2024, Juan Ramírez y Daniel Yepez comenzaron sus estudios en Ingeniería de Sistemas en la Universidad de Nariño, sede Ipiales. Desde el inicio, compartieron una gran pasión por la computación y el aprendizaje, lo que los llevó a colaborar en distintos proyectos académicos. En 2025, durante la asignatura de Ingeniería de Software I, la docente Gloria Thomé les asignó la tarea de desarrollar un proyecto de software que resolviera un problema real.","Tras analizar diversas problemáticas en su entorno, identificaron la necesidad de mejorar los procesos de aprendizaje y evaluación en la educación. Convencidos del potencial de la Inteligencia Artificial, decidieron crear un software que optimizara la enseñanza y permitiera una experiencia más personalizada para estudiantes y docentes. Así nació RAYO, una herramienta diseñada para revolucionar la educación mediante IA.","Lo que comenzó como un simple proyecto académico rápidamente evolucionó hacia una iniciativa con gran potencial de impacto. Impulsados por su deseo de innovación y su compromiso con la educación, Juan y Daniel se dedicaron a convertir RAYO en una solución real para mejorar el aprendizaje y las evaluaciones en el ámbito educativo."]},{id:"rayo-logo-concept",title:"✨ Les presentamos el logotipo de RAYO, nuestro proyecto de software.",image:"src/assets/rayoconcept.png",paragraphs:["¿Cuál es el significado detrás de sus colores?","Amarillo claro (#fdf4b4): Representa creatividad, optimismo, claridad y enfoque. Es un color que inspira energía positiva y puede asociarse con la innovación y la facilidad de uso del software.","Azul claro (#5cb7f2): Simboliza confianza, profesionalismo, tranquilidad y tecnología. Es ideal para transmitir seguridad y seriedad, especialmente en un entorno educativo.","Para la creación del logotipo se usó la herramienta Photopea."]},{id:"rayo-reasons",title:"🧐 ¿Con qué fin se lleva a cabo este proyecto de software?",image:"https://images.pexels.com/photos/29875053/pexels-photo-29875053/free-photo-of-dramatic-cumulus-clouds-in-blue-sky.jpeg",paragraphs:["El proyecto RAYO fue diseñado con el propósito de mejorar la eficiencia en el aprendizaje y las evaluaciones académicas. Mediante el uso de Inteligencia Artificial, busca personalizar la experiencia educativa en la asignatura de Programación 3 de la Universidad de Nariño, con la intención de expandir el software a otras materias en el futuro. RAYO ofrece soluciones innovadoras, como evaluaciones personalizadas para los estudiantes, basadas en parámetros definidos por los docentes. Además, incorpora un chatbot que asiste a los estudiantes en la resolución de dudas relacionadas con la clase de Programación 3. Nacido como una iniciativa académica, RAYO tiene el potencial de generar un impacto positivo en el ámbito educativo, promoviendo el desarrollo de nuevas metodologías de enseñanza y optimizando el proceso de aprendizaje."]},{id:"rayo-lema",title:'⚡ "Optimiza tu tiempo, impulsa su futuro."',image:"https://images.pexels.com/photos/1106468/pexels-photo-1106468.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",paragraphs:["Hemos escogido este como el lema de nuestra empresa proyecto debido a que enfatiza en nuestra misión: optimizar impulsar el futuro de los estudiantes a través de la optimización de procesos educativos."]},{id:"rayo-pros",title:'📈 ¿Qué ventajas tendría este software?"',image:"https://images.pexels.com/photos/159711/books-bookstore-book-reading-159711.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",paragraphs:["[IMAGEN_PARRAFO:src/assets/ventajasrayo.png]","El software RAYO presenta varias ventajas: permite una creación y calificación eficiente de evaluaciones, ofrece personalización en los procesos de evaluación, y genera informes detallados para estudiantes y docentes. Además, su diseño facilita la interacción a través del lenguaje natural y proporciona interfaces intuitivas. Esta herramienta es una iniciativa de desarrollo con IA impulsada por la UDENAR."],inlineImages:{"src/assets/ventajasrayo.png":{alt:"Ventajas del proyecto",className:"inline-paragraph-image"}}},{id:"rayo-comparison",title:"📲 Comparación de RAYO con otros software.",image:"https://images.pexels.com/photos/2004161/pexels-photo-2004161.jpeg",paragraphs:["1️⃣ Generación de exámenes personalizados","RAYO: Genera versiones diferentes de un mismo examen para cada estudiante.","Comparación:","- Google Forms permite crear cuestionarios, pero todos reciben el mismo examen. ","- Quizizz & Kahoot! generan preguntas aleatorias, pero no exámenes únicos por estudiante. ","- ExamView permite generar versiones diferentes, pero es más técnico y limitado en personalización. ","✅ Diferencia clave: RAYO automatiza la generación de múltiples versiones con el mismo nivel de dificultad, evitando copias. ","‎","2️⃣ Revisión automatizada y detección de áreas de mejora","Rayo: Corrige preguntas objetivas y sugiere mejoras en respuestas abiertas. ","Comparación:","- Google Forms & Microsoft Forms corrigen respuestas de opción múltiple, pero no analizan áreas de mejora.","- Grammarly & Turnitin analizan texto, pero no aplican a exámenes educativos.","- Edmodo permite calificaciones, pero sin sugerencias de mejora automatizadas. ","✅ Diferencia clave: RAYO no solo califica, sino que también detecta patrones de error para guiar a los estudiantes. ","‎","3️⃣ Generación de reportes de desempeño","Rayo: Analiza fortalezas y debilidades individuales y grupales.","Comparación:","- Moodle ofrece reportes de desempeño, pero es complejo de configurar. ","- Khan Academy genera reportes de progreso, pero solo en su plataforma. ","- Socrative ofrece análisis básicos, pero sin personalización avanzada. ","✅ Diferencia clave: RAYO genera reportes detallados y accionables de forma automática. "]},{id:"rayo-schema",title:"⚡ Esquema general del software RAYO.",image:"https://images.pexels.com/photos/5324968/pexels-photo-5324968.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",paragraphs:["Aquí presentamos el esquema general de la aplicación mostrando sus diferentes componentes:","[IMAGEN_PARRAFO:src/assets/esquema.jpg]"],inlineImages:{"src/assets/esquema.jpg":{alt:"Esquema del proyecto",className:"inline-paragraph-image"}}},{id:"rayo-ficha",title:"📑 Ficha de caracterización del proyecto.",image:"https://images.pexels.com/photos/3183150/pexels-photo-3183150.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",paragraphs:["[IMAGEN_PARRAFO:src/assets/ficha.jpg]","El proyecto RAYO es liderado por Juan Camilo Ramírez Bastidas y Daniel Felipe Yepez Guerrero. Su objetivo principal es desarrollar una página web que genere exámenes de manera automática basándose en temáticas seleccionadas. Con un propósito claro de mejorar la eficiencia en el aprendizaje y las evaluaciones académicas, el proyecto tiene un tiempo estimado de ejecución de 4 a 10 meses, un presupuesto de $269.512.452, y su información está disponible en https://www.tumblr.com/rayoproject."],inlineImages:{"src/assets/ficha.jpg":{alt:"Ficha de caracterización",className:"inline-paragraph-image"}}},{id:"rayo-financiacion",title:"💸 Posibles fuentes de financiación.",image:"https://images.pexels.com/photos/534216/pexels-photo-534216.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",paragraphs:["[IMAGEN_PARRAFO:src/assets/finan.jpg]","El proyecto RAYO podría contar con el respaldo de la Universidad de Nariño, a través de su Dirección de Planeación y Desarrollo (Área Financiera y de Presupuesto), con la posible participación de su Directora de Planeación y Desarrollo. Asimismo, podría recibir apoyo del Ministerio de Educación, representado por el Viceministro, desde el Viceministerio de Educación Superior y la Dirección de Calidad de Educación."],inlineImages:{"src/assets/finan.jpg":{alt:"Ficha de posibles fuentes de financiación",className:"inline-paragraph-image"}}},{id:"rayo-scrum",title:"💸 SCRUM.",image:"https://images.pexels.com/photos/534216/pexels-photo-534216.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",paragraphs:["[PDF:src/assets/scrum.pdf]"],inlinePdfs:{"src/assets/scrum.pdf":{title:"SCRUM de RAYO",width:"100%",height:"500px"}}}];function GT(){const d=nf.length>0?nf[0].id:null,[e,t]=X.useState(d),i=()=>nf.find(r=>r.id===e)||null;return re.jsx("div",{className:"app-container",children:re.jsxs(cE,{className:"g-0 h-100 w-100",children:[re.jsx(Hv,{xs:12,md:4,lg:3,className:"sidebar-column",children:re.jsx(VT,{contentItems:nf.map(r=>({id:r.id,title:r.title})),onSelectContent:t,activeContentId:e})}),re.jsx(Hv,{xs:12,md:8,lg:9,className:"main-content-column",children:re.jsx(WT,{activeContent:i()})})]})})}hp.workerSrc=new URL("/rayo-project-blog/assets/pdf.worker.min-GB3t0DcA.mjs",import.meta.url).toString();Mx.createRoot(document.getElementById("root")).render(re.jsx(xx.StrictMode,{children:re.jsx(GT,{})}));
